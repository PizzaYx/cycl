{"version":3,"file":"shsyDetail.js","sources":["pages/merchant/shsyDetail.vue","pages/merchant/shsyDetail.vue?type=page"],"sourcesContent":["<!-- 商户收运详细 -->\n<template>\n    <view class=\"container\">\n        <!-- 头部导航 -->\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"收运详细\"\n            @clickLeft=\"back\" />\n\n        <!-- 用户信息 -->\n        <view class=\"user-info\">\n            <view class=\"name\">{{ pageData.merchantName }}</view>\n            <view class=\"status-tag\" :class=\"getStatusClass()\">\n                {{ getRecordStatusText() }}\n            </view>\n        </view>\n        <!-- 内容区域 -->\n        <view class=\"content\">\n\n            <!-- 基础信息列表 -->\n            <view class=\"info-list\">\n                <view class=\"info-item\" v-for=\"(item, index) in infoList\" :key=\"index\">\n                    <text class=\"label\">{{ item.label }}</text>\n                    <text class=\"value\">{{ item.value }}</text>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport { apiGetPlanById } from '@/api/apis.js'\nimport { onLoad } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\n\n// 页面参数\nconst merchantId = ref(); // 商户ID\nconst id = ref(); // 收运ID\n\n// 页面数据\nconst pageData = ref({\n\n});\n\n// 获取收运记录状态文字\nconst getRecordStatusText = () => {\n    switch (pageData.value.status) {\n        case 0:\n            return '进行中';\n        case 1:\n            {\n                if (pageData.value.merchantConfirm) {\n                    return '已完成';\n                } else {\n                    return '待确认';\n                }\n            }\n        case 2:\n            return '无需收运';\n        default:\n            return '未知状态';\n    }\n};\n\n// 获取状态样式类名\nconst getStatusClass = () => {\n    switch (pageData.value.status) {\n        case 0: return 'processing';\n        case 1: {\n            if (pageData.value.merchantConfirm) {\n                return 'completed';\n            } else {\n                return 'pending';\n            }\n        }\n        case 2: return 'cancelled';\n        default: return '';\n    }\n};\n\n// 信息列表配置\nconst infoList = computed(() => [\n    {\n        label: '预估时间:',\n        value: pageData.value.appointmentTime ? pageData.value.appointmentTime : '暂无',\n    },\n    {\n        label: '收运时间:',\n        value: pageData.value.arrivalTime ? pageData.value.arrivalTime : '暂无',\n    },\n    {\n        label: '预估重量:',\n        value: pageData.value.estimateWeight ? pageData.value.estimateWeight + ' kg' : '暂无'\n\n    },\n    {\n        label: '收运重量:',\n        value: pageData.value.weight ? pageData.value.weight + ' kg' : '暂无'\n    },\n    {\n        label: '预估桶数:',\n        value: pageData.value.estimateBucketNum ? pageData.value.estimateBucketNum + ' 个' : '暂无'\n    },\n    {\n        label: '收运桶数:',\n        value: pageData.value.bucketNum ? pageData.value.bucketNum + ' 个' : '暂无'\n    },\n    {\n        label: '收运地址:',\n        value: pageData.value.address ? pageData.value.address : '暂无',\n    },\n    {\n        label: '车牌号:',\n        value: pageData.value.registrationNumber ?? '暂无',\n    },\n    {\n        label: '其他说明:',\n        value: pageData.value.explain ?? '暂无',\n    },\n\n]);\n\nonLoad((options) => {\n    if (options.id) id.value = options.id;\n    // 处理参数名可能有空格的情况\n    if (options.merchantId) {\n        merchantId.value = options.merchantId;\n    } else if (options['merchantId ']) {\n        merchantId.value = options['merchantId '];\n    }\n\n    console.log('接收到的参数:', options);\n    console.log('解析后的参数:', { merchantId: merchantId.value, id: id.value });\n\n    // 在参数赋值后立即调用API\n    getSyCheckDetail();\n});\n\n// 页面逻辑\nonMounted(() => {\n    // API调用已移到onLoad中\n})\n\n\n\n//获取收运记录详情\nconst getSyCheckDetail = async () => {\n    console.log('获取收运记录详情', merchantId.value, id.value);\n    const res = await apiGetPlanById({\n        merchantId: merchantId.value,\n        id: id.value,\n\n    })\n\n    if (res.code === 200) {\n        const data = res.data;\n\n        // 统一更新pageData\n        pageData.value = {\n            driverName: data.driverName,\n            status: data.status,\n            merchantName: data.merchantName,\n            estimateWeight: data.estimateWeight,\n            weight: data.weight,\n            estimateBucketNum: data.estimateBucketNum,\n            bucketNum: data.bucketNum,\n            registrationNumber: data.registrationNumber,\n            img: data.img ? data.img.split(',') : [],\n            appointmentTime: data.appointmentTime,\n            arrivalTime: data.arrivalTime,\n            address: data.address,\n            explain: data.explain,\n            merchantConfirm: data.merchantConfirm,\n        };\n\n        console.log('获取收运记录详情成功', pageData.value);\n    }\n}\n// 返回上一页\nconst back = () => {\n    uni.navigateBack()\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: $bg-theme-color;\n    padding: 0 30rpx;\n}\n\n.user-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx;\n    background-color: #ffffff;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n    margin-top: 20rpx;\n    border-radius: 16rpx;\n\n    .name {\n        font-size: 32rpx;\n        font-weight: bold;\n        color: #333333;\n    }\n\n    .status-tag {\n        border-radius: 8rpx;\n        font-size: 24rpx;\n        width: 120rpx;\n        height: 40rpx;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n\n        &.processing {\n            //进行中 待完成\n            color: rgba(0, 170, 255, 1);\n            background: rgba(0, 170, 255, 0.10);\n        }\n\n        &.completed {\n            //已完成\n            color: rgba(61, 61, 61, 0.50);\n            background: rgba(153, 153, 153, 0.1);\n        }\n\n        &.pending {\n            //待确认\n            color: rgba(255, 161, 0, 1);\n            background: rgba(255, 161, 0, 0.10);\n        }\n\n        &.cancelled {\n            //无法收运\n            color: rgba(61, 61, 61, 0.50);\n            background: rgba(153, 153, 153, 0.1);\n        }\n    }\n}\n\n.content {\n    padding: 32rpx 0;\n    position: relative;\n    background-color: #ffffff;\n    border-radius: 16rpx;\n    margin-top: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n\n    .info-list {\n        padding: 0 30rpx;\n\n        .info-item {\n            display: flex;\n            margin-bottom: 32rpx;\n            padding-bottom: 32rpx;\n            border-bottom: 1rpx solid #f0f0f0;\n\n            &:last-child {\n                border-bottom: none;\n                margin-bottom: 0;\n                padding-bottom: 0;\n            }\n\n            .label {\n                width: 140rpx;\n                font-size: 14px;\n                color: #999999;\n                flex-shrink: 0;\n            }\n\n            .value {\n                margin-left: 30rpx;\n                flex: 1;\n                font-size: 14px;\n                color: #333333;\n            }\n        }\n    }\n\n    .photo-section {\n        margin-top: 48rpx;\n        padding: 0 30rpx;\n\n        .photo-title {\n            font-size: 14px;\n            color: #999999;\n            margin-bottom: 24rpx;\n            display: block;\n        }\n\n        .photo-list {\n            display: flex;\n            gap: 20rpx;\n\n            .photo-item {\n                width: 186rpx;\n                height: 186rpx;\n                border-radius: 8rpx;\n                box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n            }\n        }\n    }\n}\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/merchant/shsyDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onLoad","uni","onMounted","apiGetPlanById"],"mappings":";;;;;;;;;;;;;;AAkCA,UAAM,aAAaA,cAAG,IAAA;AACtB,UAAM,KAAKA,cAAG,IAAA;AAGd,UAAM,WAAWA,cAAAA,IAAI,CAErB,CAAC;AAGD,UAAM,sBAAsB,MAAM;AAC9B,cAAQ,SAAS,MAAM,QAAM;AAAA,QACzB,KAAK;AACD,iBAAO;AAAA,QACX,KAAK,GACD;AACI,cAAI,SAAS,MAAM,iBAAiB;AAChC,mBAAO;AAAA,UAC3B,OAAuB;AACH,mBAAO;AAAA,UACV;AAAA,QACJ;AAAA,QACL,KAAK;AACD,iBAAO;AAAA,QACX;AACI,iBAAO;AAAA,MACd;AAAA,IACL;AAGA,UAAM,iBAAiB,MAAM;AACzB,cAAQ,SAAS,MAAM,QAAM;AAAA,QACzB,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK,GAAG;AACJ,cAAI,SAAS,MAAM,iBAAiB;AAChC,mBAAO;AAAA,UACvB,OAAmB;AACH,mBAAO;AAAA,UACV;AAAA,QACJ;AAAA,QACD,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACnB;AAAA,IACL;AAGA,UAAM,WAAWC,cAAQ,SAAC,MAAM;AAAA,MAC5B;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,kBAAkB,SAAS,MAAM,kBAAkB;AAAA,MAC5E;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,cAAc,SAAS,MAAM,cAAc;AAAA,MACpE;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,iBAAiB,SAAS,MAAM,iBAAiB,QAAQ;AAAA,MAElF;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,SAAS,SAAS,MAAM,SAAS,QAAQ;AAAA,MAClE;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,oBAAoB,SAAS,MAAM,oBAAoB,OAAO;AAAA,MACvF;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,YAAY,SAAS,MAAM,YAAY,OAAO;AAAA,MACvE;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,UAAU,SAAS,MAAM,UAAU;AAAA,MAC5D;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,sBAAsB;AAAA,MAC/C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,WAAW;AAAA,MACpC;AAAA,IAEL,CAAC;AAEDC,kBAAM,OAAC,CAAC,YAAY;AAChB,UAAI,QAAQ;AAAI,WAAG,QAAQ,QAAQ;AAEnC,UAAI,QAAQ,YAAY;AACpB,mBAAW,QAAQ,QAAQ;AAAA,MACnC,WAAe,QAAQ,aAAa,GAAG;AAC/B,mBAAW,QAAQ,QAAQ,aAAa;AAAA,MAC3C;AAEDC,oBAAA,MAAA,MAAA,OAAA,wCAAY,WAAW,OAAO;AAC9BA,oBAAAA,MAAA,MAAA,OAAA,wCAAY,WAAW,EAAE,YAAY,WAAW,OAAO,IAAI,GAAG,MAAO,CAAA;AAGrE;IACJ,CAAC;AAGDC,kBAAAA,UAAU,MAAM;AAAA,IAEhB,CAAC;AAKD,UAAM,mBAAmB,YAAY;AACjCD,+EAAY,YAAY,WAAW,OAAO,GAAG,KAAK;AAClD,YAAM,MAAM,MAAME,wBAAe;AAAA,QAC7B,YAAY,WAAW;AAAA,QACvB,IAAI,GAAG;AAAA,MAEf,CAAK;AAED,UAAI,IAAI,SAAS,KAAK;AAClB,cAAM,OAAO,IAAI;AAGjB,iBAAS,QAAQ;AAAA,UACb,YAAY,KAAK;AAAA,UACjB,QAAQ,KAAK;AAAA,UACb,cAAc,KAAK;AAAA,UACnB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK;AAAA,UACb,mBAAmB,KAAK;AAAA,UACxB,WAAW,KAAK;AAAA,UAChB,oBAAoB,KAAK;AAAA,UACzB,KAAK,KAAK,MAAM,KAAK,IAAI,MAAM,GAAG,IAAI,CAAE;AAAA,UACxC,iBAAiB,KAAK;AAAA,UACtB,aAAa,KAAK;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,SAAS,KAAK;AAAA,UACd,iBAAiB,KAAK;AAAA,QAClC;AAEQF,sBAAA,MAAA,MAAA,OAAA,wCAAY,cAAc,SAAS,KAAK;AAAA,MAC3C;AAAA,IACL;AAEA,UAAM,OAAO,MAAM;AACfA,oBAAAA,MAAI,aAAc;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClLA,GAAG,WAAW,eAAe;"}