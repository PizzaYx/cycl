{"version":3,"file":"shsyDetail.js","sources":["pages/merchant/shsyDetail.vue","pages/merchant/shsyDetail.vue?type=page"],"sourcesContent":["<!-- 商户收运详细 -->\n<template>\n    <view class=\"container\">\n        <!-- 头部导航 -->\n        <PageHeader title=\"收运详细\" @back=\"back\" />\n\n        <!-- 用户信息 -->\n        <view class=\"user-info\">\n            <view class=\"name\">{{ pageData.merchantName }}</view>\n            <StatusTag :status=\"pageData.status\" />\n        </view>\n        <!-- 内容区域 -->\n        <view class=\"content\">\n            <!-- 基础信息列表 -->\n            <view class=\"info-list\">\n                <view class=\"info-item\" v-for=\"(item, index) in infoList\" :key=\"index\">\n                    <text class=\"label\">{{ item.label }}</text>\n                    <text class=\"value\">{{ item.value }}</text>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport { apiGetPlanById } from '@/api/apis.js'\nimport { onLoad } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\nimport StatusTag from '@/components/StatusTag/StatusTag.vue'\nimport PageHeader from '@/components/PageHeader/PageHeader.vue'\nimport { formatWeight, formatNum } from '@/utils/orderUtils'\n\n// 页面参数\nconst merchantId = ref(); // 商户ID\nconst id = ref(); // 收运ID\n\n// 页面数据\nconst pageData = ref({\n\n});\n\n\n// 信息列表配置\nconst infoList = computed(() => [\n    {\n        label: '预估时间:',\n        value: pageData.value.appointmentTime ? pageData.value.appointmentTime : '暂无',\n    },\n    {\n        label: '收运时间:',\n        value: pageData.value.arrivalTime ? pageData.value.arrivalTime : '暂无',\n    },\n    {\n        label: '预估重量:',\n        value: formatWeight(pageData.value.estimateWeight)\n    },\n    {\n        label: '收运重量:',\n        value: formatWeight(pageData.value.weight)\n    },\n    {\n        label: '预估桶数:',\n        value: formatNum(pageData.value.estimateBucketNum)\n    },\n    {\n        label: '收运桶数:',\n        value: formatNum(pageData.value.bucketNum)\n    },\n    {\n        label: '收运地址:',\n        value: pageData.value.address ? pageData.value.address : '暂无',\n    },\n    {\n        label: '车牌号:',\n        value: pageData.value.registrationNumber ?? '暂无',\n    },\n    {\n        label: '其他说明:',\n        value: pageData.value.explain ?? '暂无',\n    }\n]);\n\nonLoad((options) => {\n    if (options.id) id.value = options.id;\n    // 处理参数名可能有空格的情况\n    if (options.merchantId) {\n        merchantId.value = options.merchantId;\n    } else if (options['merchantId ']) {\n        merchantId.value = options['merchantId '];\n    }\n\n    console.log('接收到的参数:', options);\n    console.log('解析后的参数:', { merchantId: merchantId.value, id: id.value });\n\n    // 在参数赋值后立即调用API\n    getSyCheckDetail();\n});\n\n// 页面逻辑\nonMounted(() => {\n    // API调用已移到onLoad中\n})\n\n\n\n//获取收运记录详情\nconst getSyCheckDetail = async () => {\n    console.log('获取收运记录详情', merchantId.value, id.value);\n    const res = await apiGetPlanById({\n        merchantId: merchantId.value,\n        id: id.value,\n\n    })\n\n    if (res.code === 200) {\n        const data = res.data;\n\n        // 统一更新pageData\n        pageData.value = {\n            driverName: data.driverName,\n            status: data.status,\n            merchantName: data.merchantName,\n            estimateWeight: data.estimateWeight,\n            weight: data.weight,\n            estimateBucketNum: data.estimateBucketNum,\n            bucketNum: data.bucketNum,\n            registrationNumber: data.registrationNumber,\n            img: data.img ? data.img.split(',') : [],\n            appointmentTime: data.appointmentTime,\n            arrivalTime: data.arrivalTime,\n            address: data.address,\n            explain: data.explain,\n            merchantConfirm: data.merchantConfirm,\n        };\n\n        console.log('获取收运记录详情成功', pageData.value);\n    }\n}\n// 返回上一页\nconst back = () => {\n    uni.navigateBack()\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: $bg-theme-color;\n    padding: 0 30rpx;\n}\n\n.user-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx;\n    background-color: #ffffff;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n    margin-top: 20rpx;\n    border-radius: 16rpx;\n\n    .name {\n        font-size: 32rpx;\n        font-weight: bold;\n        color: #333333;\n    }\n\n}\n\n.content {\n    padding: 32rpx 0;\n    position: relative;\n    background-color: #ffffff;\n    border-radius: 16rpx;\n    margin-top: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n\n    .info-list {\n        padding: 0 30rpx;\n        margin-bottom: 40rpx;\n\n        .info-item {\n            display: block;\n            margin-bottom: 30rpx;\n            // padding-bottom: 32rpx;\n            border-bottom: 1rpx solid #f0f0f0;\n\n            &:last-child {\n                border-bottom: none;\n                margin-bottom: 0;\n                padding-bottom: 0;\n            }\n\n            .label {\n                display: block;\n                font-size: 14px;\n                color: #999999;\n                margin-bottom: 20rpx;\n            }\n\n            .value {\n                display: block;\n                font-size: 14px;\n                color: #333333;\n                line-height: 1.4;\n                margin-bottom: 5rpx;\n            }\n        }\n    }\n\n    .photo-section {\n        margin-top: 48rpx;\n        padding: 0 30rpx;\n\n        .photo-title {\n            font-size: 14px;\n            color: #999999;\n            margin-bottom: 24rpx;\n            display: block;\n        }\n\n        .photo-list {\n            display: flex;\n            gap: 20rpx;\n\n            .photo-item {\n                width: 186rpx;\n                height: 186rpx;\n                border-radius: 8rpx;\n                box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n            }\n        }\n    }\n}\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/merchant/shsyDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","formatWeight","formatNum","onLoad","uni","onMounted","apiGetPlanById"],"mappings":";;;;;;;AA4BA,MAAM,YAAY,MAAW;AAC7B,MAAM,aAAa,MAAW;;;;AAI9B,UAAM,aAAaA,cAAG,IAAA;AACtB,UAAM,KAAKA,cAAG,IAAA;AAGd,UAAM,WAAWA,cAAAA,IAAI,CAErB,CAAC;AAID,UAAM,WAAWC,cAAQ,SAAC,MAAM;AAAA,MAC5B;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,kBAAkB,SAAS,MAAM,kBAAkB;AAAA,MAC5E;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,cAAc,SAAS,MAAM,cAAc;AAAA,MACpE;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOC,iBAAY,aAAC,SAAS,MAAM,cAAc;AAAA,MACpD;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOA,iBAAY,aAAC,SAAS,MAAM,MAAM;AAAA,MAC5C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOC,iBAAS,UAAC,SAAS,MAAM,iBAAiB;AAAA,MACpD;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOA,iBAAS,UAAC,SAAS,MAAM,SAAS;AAAA,MAC5C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,UAAU,SAAS,MAAM,UAAU;AAAA,MAC5D;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,sBAAsB;AAAA,MAC/C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,WAAW;AAAA,MACpC;AAAA,IACL,CAAC;AAEDC,kBAAM,OAAC,CAAC,YAAY;AAChB,UAAI,QAAQ;AAAI,WAAG,QAAQ,QAAQ;AAEnC,UAAI,QAAQ,YAAY;AACpB,mBAAW,QAAQ,QAAQ;AAAA,MACnC,WAAe,QAAQ,aAAa,GAAG;AAC/B,mBAAW,QAAQ,QAAQ,aAAa;AAAA,MAC3C;AAEDC,oBAAA,MAAA,MAAA,OAAA,uCAAY,WAAW,OAAO;AAC9BA,oBAAAA,MAAA,MAAA,OAAA,uCAAY,WAAW,EAAE,YAAY,WAAW,OAAO,IAAI,GAAG,MAAO,CAAA;AAGrE;IACJ,CAAC;AAGDC,kBAAAA,UAAU,MAAM;AAAA,IAEhB,CAAC;AAKD,UAAM,mBAAmB,YAAY;AACjCD,+EAAY,YAAY,WAAW,OAAO,GAAG,KAAK;AAClD,YAAM,MAAM,MAAME,wBAAe;AAAA,QAC7B,YAAY,WAAW;AAAA,QACvB,IAAI,GAAG;AAAA,MAEf,CAAK;AAED,UAAI,IAAI,SAAS,KAAK;AAClB,cAAM,OAAO,IAAI;AAGjB,iBAAS,QAAQ;AAAA,UACb,YAAY,KAAK;AAAA,UACjB,QAAQ,KAAK;AAAA,UACb,cAAc,KAAK;AAAA,UACnB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK;AAAA,UACb,mBAAmB,KAAK;AAAA,UACxB,WAAW,KAAK;AAAA,UAChB,oBAAoB,KAAK;AAAA,UACzB,KAAK,KAAK,MAAM,KAAK,IAAI,MAAM,GAAG,IAAI,CAAE;AAAA,UACxC,iBAAiB,KAAK;AAAA,UACtB,aAAa,KAAK;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,SAAS,KAAK;AAAA,UACd,iBAAiB,KAAK;AAAA,QAClC;AAEQF,sBAAA,MAAA,MAAA,OAAA,wCAAY,cAAc,SAAS,KAAK;AAAA,MAC3C;AAAA,IACL;AAEA,UAAM,OAAO,MAAM;AACfA,oBAAAA,MAAI,aAAc;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;AC5IA,GAAG,WAAW,eAAe;"}