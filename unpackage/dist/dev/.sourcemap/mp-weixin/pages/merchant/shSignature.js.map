{"version":3,"file":"shSignature.js","sources":["pages/merchant/shSignature.vue","pages/merchant/shSignature.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"contract-container\">\n        <!-- 导航栏 -->\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"合同签名\"\n            @clickLeft=\"back\" />\n\n        <!-- 合同内容区域 -->\n        <scroll-view class=\"contract-content\" scroll-y>\n            <!-- 合同标题 -->\n            <view class=\"contract-header\">\n                <text class=\"contract-title\">{{ contractData.title || '垃圾收运服务合同' }}</text>\n                <text class=\"contract-date\">签订日期：{{ contractData.date || '2024年1月1日' }}</text>\n            </view>\n\n            <!-- 富文本合同内容 -->\n            <view class=\"contract-body\">\n                <mp-html :content=\"contractContent\" @tap=\"onRichTextTap\"></mp-html>\n            </view>\n\n        </scroll-view>\n\n\n\n        <!-- 底部操作按钮 -->\n        <view class=\"bottom-actions\">\n            <button class=\"action-btn signature-btn\" @click=\"showSignatureModal('partyB')\">\n                {{ signatures.partyB ? '修改签名' : '签名' }}\n            </button>\n            <button class=\"action-btn preview-btn\" @click=\"previewContract\">预览</button>\n            <button class=\"action-btn submit-btn\" :disabled=\"!canSubmit\" @click=\"submitContract\">\n                提交\n            </button>\n        </view>\n\n        <!-- 签名弹窗（原生方式） -->\n        <view v-if=\"showSignatureModalFlag\" class=\"signature-modal-native\">\n            <!-- <view class=\"modal-header\">\n                <text class=\"modal-title\">乙方签名</text>\n                <uni-icons type=\"close\" size=\"20\" color=\"#999\" @click=\"closeSignatureModal\"></uni-icons>\n            </view> -->\n\n            <view style=\"width: 100%; height: 100%;\">\n                <l-signature ref=\"signatureRef\" :penColor=\"penColor\" :penSize=\"penSize\" :openSmooth=\"openSmooth\"\n                    openSmooth landscape></l-signature>\n            </view>\n\n            <view class=\"signature-buttons-rotated\">\n                <button class=\"signature-btn clear-btn\" @click=\"clearSignature\">清空</button>\n                <button class=\"signature-btn undo-btn\" @click=\"undoSignature\">撤销</button>\n                <button class=\"signature-btn save-btn\" @click=\"saveSignature\">保存签名</button>\n            </view>\n        </view>\n\n        <!-- 预览弹窗 -->\n        <view v-if=\"showPreviewModal\" class=\"preview-modal\">\n            <view class=\"preview-header\">\n                <text class=\"preview-title\">合同预览</text>\n                <uni-icons type=\"close\" size=\"20\" color=\"#999\" @click=\"showPreviewModal = false\"></uni-icons>\n            </view>\n            <scroll-view class=\"preview-content\" scroll-y>\n                <mp-html :content=\"previewContent\"></mp-html>\n            </scroll-view>\n            <view class=\"preview-footer\">\n                <button class=\"preview-close-btn\" @click=\"showPreviewModal = false\">关闭</button>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 页面参数\nconst contractId = ref('')\nconst contractData = ref({})\n\n// 签名相关数据\nconst penColor = ref('black')\nconst penSize = ref(3)\nconst openSmooth = ref(true)\nconst signatureRef = ref(null)\nconst testSignatureRef = ref(null)\n\n// 当前签名类型\nconst currentSignatureType = ref('')\n\n// 控制弹窗显示\nconst showSignatureModalFlag = ref(false)\nconst showPreviewModal = ref(false)\nconst previewContent = ref('')\n\n// 签名数据\nconst signatures = ref({\n    partyB: ''  // 乙方签名\n})\n\n\n// 富文本合同内容（HTML格式）\nconst contractContent = ref(`\n<div style=\"font-size: 16px; line-height: 1.8; color: #333; padding: 20px;\">\n    <h2 style=\"text-align: center; margin-bottom: 30px; color: #333;\">垃圾收运服务合同</h2>\n    \n    <p><strong>甲方（商户）：</strong>________________</p>\n    <p><strong>乙方（收运方）：</strong>________________</p>\n    \n    <p style=\"margin: 20px 0;\">根据《中华人民共和国合同法》及相关法律法规，甲乙双方在平等、自愿、协商一致的基础上，就垃圾收运服务事宜达成如下协议：</p>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第一条 服务内容</h3>\n    <p>乙方为甲方提供垃圾收运服务，包括但不限于：</p>\n    <ol style=\"margin: 10px 0; padding-left: 20px;\">\n        <li>定期上门收集生活垃圾；</li>\n        <li>按照环保要求进行分类处理；</li>\n        <li>提供收运服务相关证明文件。</li>\n    </ol>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第二条 服务时间</h3>\n    <p>服务时间：每周一、三、五上午8:00-12:00</p>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第三条 费用标准</h3>\n    <p>服务费用：每月500元，按季度结算。</p>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第四条 双方权利义务</h3>\n    <p><strong>甲方权利：</strong></p>\n    <ol style=\"margin: 10px 0; padding-left: 20px;\">\n        <li>要求乙方按时提供收运服务；</li>\n        <li>对服务质量进行监督。</li>\n    </ol>\n    \n    <p><strong>甲方义务：</strong></p>\n    <ol style=\"margin: 10px 0; padding-left: 20px;\">\n        <li>按时支付服务费用；</li>\n        <li>配合乙方收运工作。</li>\n    </ol>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第五条 违约责任</h3>\n    <p>任何一方违反本合同约定，应承担相应的违约责任。</p>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第六条 合同期限</h3>\n    <p>本合同自双方签字盖章之日起生效，有效期为一年。</p>\n    \n    <h3 style=\"color: #333; margin: 20px 0 10px 0;\">第七条 争议解决</h3>\n    <p>因本合同引起的争议，双方应友好协商解决；协商不成的，可向有管辖权的人民法院起诉。</p>\n    \n    <div style=\"margin-top: 40px;\">\n        <p><strong>乙方（签字）：</strong><span id=\"signature-btn\" style=\"padding: 8px 16px; background: #07c160; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; display: inline-block; margin-left: 10px;\">点击签名</span></p>\n        <p><strong>日期：</strong>________________</p>\n    </div>\n</div>\n`)\n\n// 计算属性：是否可以提交\nconst canSubmit = computed(() => {\n    return signatures.value.partyB\n})\n\n// 页面加载\nonLoad((options) => {\n    contractId.value = options.id || ''\n    // 这里可以根据合同ID获取合同数据\n    loadContractData()\n})\n\n// 加载合同数据\nconst loadContractData = async () => {\n    try {\n        // 模拟API调用\n        // const result = await getContractById(contractId.value)\n        // contractData.value = result.data\n\n        // 模拟数据\n        contractData.value = {\n            title: '垃圾收运服务合同',\n            date: '2024年1月1日',\n            content: contractContent.value\n        }\n    } catch (error) {\n        console.error('加载合同数据失败:', error)\n        uni.showToast({\n            title: '加载合同失败',\n            icon: 'none'\n        })\n    }\n}\n\n// 富文本点击事件\nconst onRichTextTap = (e) => {\n    console.log('富文本点击事件触发:', e)\n\n    // 直接弹出签名弹窗，因为富文本组件无法准确获取点击目标\n    console.log('点击了富文本区域，弹出签名弹窗')\n    showSignatureModal('partyB')\n    console.log('showSignatureModalFlag 设置为:', showSignatureModalFlag.value)\n}\n\n// 更新合同内容中的签名显示\nconst updateContractSignature = (signaturePath) => {\n    // 创建签名图片的HTML\n    const signatureHtml = `<img src=\"${signaturePath}\" style=\"max-width: 150px; max-height: 40px; border-radius: 4px; vertical-align: middle;\" alt=\"乙方签名\" />`\n\n    // 更新合同内容，将按钮替换为签名图片\n    contractContent.value = contractContent.value.replace(\n        '<span id=\"signature-btn\" style=\"padding: 8px 16px; background: #07c160; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; display: inline-block; margin-left: 10px;\">点击签名</span>',\n        signatureHtml\n    )\n}\n\n\n// 显示签名弹窗\nconst showSignatureModal = (type) => {\n    currentSignatureType.value = type\n    showSignatureModalFlag.value = true\n}\n\n// 关闭签名弹窗\nconst closeSignatureModal = () => {\n    showSignatureModalFlag.value = false\n}\n\n// 清空签名\nconst clearSignature = () => {\n    if (signatureRef.value && showSignatureModalFlag.value) {\n        try {\n            signatureRef.value.clear()\n        } catch (error) {\n            console.warn('清空签名失败:', error)\n        }\n    }\n}\n\n// 撤销签名\nconst undoSignature = () => {\n    if (signatureRef.value && showSignatureModalFlag.value) {\n        try {\n            signatureRef.value.undo()\n        } catch (error) {\n            console.warn('撤销签名失败:', error)\n        }\n    }\n}\n\n// 保存签名\nconst saveSignature = () => {\n    if (!signatureRef.value) {\n        uni.showToast({\n            title: '签名组件未加载',\n            icon: 'none'\n        })\n        return\n    }\n\n    signatureRef.value.canvasToTempFilePath({\n        success: (res) => {\n            if (res.isEmpty) {\n                uni.showToast({\n                    title: '请先进行签名',\n                    icon: 'none'\n                })\n                return\n            }\n\n            // 保存签名图片\n            signatures.value[currentSignatureType.value] = res.tempFilePath\n\n            // 更新合同内容中的签名显示\n            updateContractSignature(res.tempFilePath)\n\n            uni.showToast({\n                title: '签名保存成功',\n                icon: 'success'\n            })\n\n            // 关闭弹窗\n            closeSignatureModal()\n        },\n        fail: (error) => {\n            console.error('保存签名失败:', error)\n            uni.showToast({\n                title: '保存签名失败',\n                icon: 'none'\n            })\n        }\n    })\n}\n\n// 预览合同\nconst previewContract = () => {\n    // 创建预览内容，包含签名\n    let content = contractContent.value\n\n    // 如果已签名，确保签名图片在预览中显示\n    if (signatures.value.partyB) {\n        const signatureHtml = `<img src=\"${signatures.value.partyB}\" style=\"max-width: 150px; max-height: 40px; border-radius: 4px; vertical-align: middle;\" alt=\"乙方签名\" />`\n        content = content.replace(\n            '<span id=\"signature-btn\" style=\"padding: 8px 16px; background: #07c160; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; display: inline-block; margin-left: 10px;\">点击签名</span>',\n            signatureHtml\n        )\n    }\n\n    // 显示预览弹窗\n    showPreviewModal.value = true\n    previewContent.value = content\n}\n\n// 提交合同\nconst submitContract = () => {\n    if (!canSubmit.value) {\n        uni.showToast({\n            title: '请完成乙方签名',\n            icon: 'none'\n        })\n        return\n    }\n\n    uni.showModal({\n        title: '确认提交',\n        content: '确定要提交合同吗？提交后将无法修改。',\n        success: (res) => {\n            if (res.confirm) {\n                // 这里调用提交合同的API\n                submitContractToServer()\n            }\n        }\n    })\n}\n\n// 提交合同到服务器\nconst submitContractToServer = async () => {\n    try {\n        uni.showLoading({\n            title: '提交中...'\n        })\n\n        // 模拟API调用\n        // const result = await submitContract({\n        //     contractId: contractId.value,\n        //     signatures: signatures.value\n        // })\n\n        // 模拟成功\n        setTimeout(() => {\n            uni.hideLoading()\n            uni.showToast({\n                title: '合同提交成功',\n                icon: 'success'\n            })\n\n            // 返回上一页\n            setTimeout(() => {\n                uni.navigateBack()\n            }, 1500)\n        }, 2000)\n\n    } catch (error) {\n        uni.hideLoading()\n        console.error('提交合同失败:', error)\n        uni.showToast({\n            title: '提交失败，请重试',\n            icon: 'none'\n        })\n    }\n}\n\n// 测试签名函数（无弹窗）\nconst clearTestSignature = () => {\n    if (testSignatureRef.value) {\n        try {\n            testSignatureRef.value.clear()\n            console.log('测试签名清空成功')\n        } catch (error) {\n            console.warn('测试签名清空失败:', error)\n        }\n    }\n}\n\nconst undoTestSignature = () => {\n    if (testSignatureRef.value) {\n        try {\n            testSignatureRef.value.undo()\n            console.log('测试签名撤销成功')\n        } catch (error) {\n            console.warn('测试签名撤销失败:', error)\n        }\n    }\n}\n\nconst saveTestSignature = () => {\n    if (!testSignatureRef.value) {\n        uni.showToast({\n            title: '测试签名组件未加载',\n            icon: 'none'\n        })\n        return\n    }\n\n    testSignatureRef.value.canvasToTempFilePath({\n        success: (res) => {\n            if (res.isEmpty) {\n                uni.showToast({\n                    title: '请先进行测试签名',\n                    icon: 'none'\n                })\n                return\n            }\n\n            console.log('测试签名保存成功:', res.tempFilePath)\n            uni.showToast({\n                title: '测试签名保存成功',\n                icon: 'success'\n            })\n        },\n        fail: (error) => {\n            console.error('测试签名保存失败:', error)\n            uni.showToast({\n                title: '测试签名保存失败',\n                icon: 'none'\n            })\n        }\n    })\n}\n\n// 返回上一页\nconst back = () => {\n    uni.navigateBack()\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.contract-container {\n    min-height: 100vh;\n    background-color: #f5f5f5;\n}\n\n.contract-content {\n    height: calc(100vh - 120rpx);\n    padding: 20rpx;\n}\n\n.contract-header {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    margin-bottom: 20rpx;\n    text-align: center;\n\n    .contract-title {\n        font-size: 36rpx;\n        font-weight: bold;\n        color: #333;\n        display: block;\n        margin-bottom: 20rpx;\n    }\n\n    .contract-date {\n        font-size: 28rpx;\n        color: #666;\n    }\n}\n\n.contract-body {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    margin-bottom: 20rpx;\n    min-height: 800rpx;\n}\n\n.signature-section {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    margin-bottom: 20rpx;\n\n    .section-title {\n        font-size: 32rpx;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 30rpx;\n        display: block;\n    }\n}\n\n.signature-item {\n    margin-bottom: 40rpx;\n\n    .signature-label {\n        font-size: 28rpx;\n        color: #333;\n        margin-bottom: 20rpx;\n        display: block;\n    }\n\n    .signature-box {\n        width: 100%;\n        height: 200rpx;\n        border: 2rpx dashed #ddd;\n        border-radius: 12rpx;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: #fafafa;\n\n        .signature-image {\n            width: 100%;\n            height: 100%;\n            border-radius: 8rpx;\n        }\n\n        .signature-placeholder {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n\n            .placeholder-text {\n                font-size: 28rpx;\n                color: #999;\n            }\n        }\n\n        &:active {\n            background: #f0f0f0;\n        }\n    }\n}\n\n\n.bottom-actions {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: #fff;\n    padding: 20rpx 30rpx;\n    border-top: 1rpx solid #eee;\n    display: flex;\n    gap: 20rpx;\n\n    .action-btn {\n        flex: 1;\n        height: 80rpx;\n        border-radius: 40rpx;\n        font-size: 32rpx;\n        font-weight: bold;\n        border: none;\n\n        &.signature-btn {\n            background: #ff9500;\n            color: #fff;\n        }\n\n        &.preview-btn {\n            background: #f0f0f0;\n            color: #666;\n        }\n\n        &.submit-btn {\n            background: linear-gradient(135deg, #07c160 0%, #10ad6a 100%);\n            color: #fff;\n\n            &:disabled {\n                background: #ccc;\n                color: #999;\n            }\n        }\n    }\n}\n\n.signature-modal-native {\n    width: 100vw; // 全屏宽度\n    height: 100vh; // 全屏高度\n    background: #fff; // 白色背景\n    border-radius: 0; // 无圆角\n    overflow: hidden; // 隐藏溢出\n    position: fixed; // 固定定位\n    z-index: 2; // \n    top: 0; // 添加这行\n    left: 0; // 添加这行\n\n    // 添加按钮容器样式\n    .signature-buttons-rotated {\n        position: absolute;\n        left: 35rpx; // 靠左边\n        top: calc(50% - 230rpx); // 垂直居中\n        transform: rotate(90deg);\n        transform-origin: left center;\n        display: flex;\n        gap: 20rpx;\n        z-index: 10;\n        background: rgba(255, 255, 255, 0.9);\n        padding: 10rpx;\n        border-radius: 10rpx;\n\n        .signature-btn {\n            height: 70rpx;\n            width: 140rpx;\n            border-radius: 35rpx;\n            font-size: 28rpx;\n            border: none;\n\n\n            &.clear-btn {\n                background: #ff4444;\n                color: #fff;\n            }\n\n            &.undo-btn {\n                background: #ff9500;\n                color: #fff;\n            }\n\n            &.save-btn {\n                background: #07c160;\n                color: #fff;\n            }\n        }\n    }\n\n\n}\n\n// 预览弹窗样式\n.preview-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: #fff;\n    z-index: 1000;\n    display: flex;\n    flex-direction: column;\n\n    .preview-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 20rpx 30rpx;\n        border-bottom: 1rpx solid #eee;\n        background: #fff;\n\n        .preview-title {\n            font-size: 36rpx;\n            font-weight: bold;\n            color: #333;\n        }\n    }\n\n    .preview-content {\n        flex: 1;\n        padding: 30rpx;\n        background: #f5f5f5;\n    }\n\n    .preview-footer {\n        padding: 20rpx 30rpx;\n        border-top: 1rpx solid #eee;\n        background: #fff;\n\n        .preview-close-btn {\n            width: 100%;\n            height: 80rpx;\n            background: #07c160;\n            color: #fff;\n            border: none;\n            border-radius: 40rpx;\n            font-size: 32rpx;\n            font-weight: bold;\n        }\n    }\n}\n\n// 富文本样式调整\n:deep(.rich-text) {\n    font-size: 28rpx;\n    line-height: 1.6;\n    color: #333;\n}\n</style>\n","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/merchant/shSignature.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onLoad","uni"],"mappings":"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"}