{"version":3,"file":"shCertification.js","sources":["pages/merchant/shCertification.vue","pages/merchant/shCertification.vue?type=page"],"sourcesContent":["<!-- 认证界面 -->\n<template>\n    <view class=\"auth-container\">\n        <PageHeader title=\"商户认证\" @back=\"back\" />\n        <!-- 步骤条 -->\n        <view class=\"step-container\">\n            <view class=\"step-item\" :class=\"{ active: currentStep >= 1, completed: currentStep > 1 }\">\n                <view class=\"step-circle\">\n                    <text class=\"step-number\" v-if=\"currentStep <= 1\">1</text>\n                    <text class=\"step-check\" v-else>✓</text>\n                </view>\n                <text class=\"step-label\">申请认证</text>\n            </view>\n            <view class=\"step-line\" :class=\"{ active: currentStep > 1 }\"></view>\n            <view class=\"step-item\" :class=\"{ active: currentStep >= 2, completed: currentStep > 2 }\">\n                <view class=\"step-circle\">\n                    <text class=\"step-number\" v-if=\"currentStep <= 2\">2</text>\n                    <text class=\"step-check\" v-else>✓</text>\n                </view>\n                <text class=\"step-label\">待审核</text>\n            </view>\n            <view class=\"step-line\" :class=\"{ active: currentStep > 2 }\"></view>\n            <view class=\"step-item\" :class=\"{ active: currentStep >= 3 }\">\n                <view class=\"step-circle\">\n                    <text class=\"step-number\">3</text>\n                </view>\n                <text class=\"step-label\">认证完成</text>\n            </view>\n        </view>\n\n        <!-- 认证表单 -->\n        <view class=\"auth-form\">\n            <view class=\"form-section\" :class=\"{ readonly: isReadOnly }\">\n                <view class=\"status-tip\" v-if=\"isReadOnly\">\n                    <view class=\"tip-content\" v-if=\"authStatus === 'pending'\">\n                        <uni-icons type=\"info\" size=\"16\" color=\"#ff9500\"></uni-icons>\n                        <text class=\"tip-text\">您的认证申请正在审核中，请耐心等待</text>\n                    </view>\n                    <view class=\"tip-content approved\" v-else-if=\"authStatus === 'approved'\">\n                        <uni-icons type=\"checkmarkempty\" size=\"16\" color=\"#07c160\"></uni-icons>\n                        <text class=\"tip-text\">恭喜！您的商户认证已通过</text>\n                    </view>\n                </view>\n\n                <!-- 审核不通过提示 -->\n                <view class=\"status-tip\" v-if=\"authStatus === 'rejected'\">\n                    <view class=\"tip-content rejected\">\n                        <uni-icons type=\"closeempty\" size=\"16\" color=\"#ff4444\"></uni-icons>\n                        <text class=\"tip-text\">很抱歉，您的认证申请未通过审核，请重新提交</text>\n                    </view>\n                </view>\n                <text class=\"section-title\">基本信息</text>\n\n                <!-- 使用uni-forms表单组件 -->\n                <uni-forms ref=\"formRef\" :modelValue=\"formData\" :rules=\"formRules\" label-position=\"top\">\n                    <uni-forms-item label=\"商户名称\" name=\"merchantName\" :required=\"!isReadOnly\">\n                        <view class=\"merchant-name-input\">\n                            <input v-model=\"formData.merchantName\" placeholder=\"请输入商户名称\" :disabled=\"isReadOnly\"\n                                class=\"input-field\" placeholder-class=\"custom-placeholder\" />\n                            <image v-if=\"!isReadOnly\" src=\"/static/logo.png\" class=\"select-icon\"\n                                @click=\"showMerchantList\" />\n                        </view>\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"商户地址\" name=\"address\" :required=\"!isReadOnly\">\n                        <input v-model=\"formData.address\" placeholder=\"请输入详细地址\" :disabled=\"isReadOnly\"\n                            class=\"input-field\" placeholder-class=\"custom-placeholder\" />\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"所属区域\" name=\"appcode\" :required=\"!isReadOnly\">\n                        <!-- 只读模式：使用input显示 -->\n                        <input v-if=\"isReadOnly\" :value=\"getSelectedAreaText()\" :disabled=\"true\" class=\"input-field\" />\n                        <!-- 可编辑模式：使用uni-data-select -->\n                        <view v-else class=\"area-select-wrapper\">\n                            <uni-data-select v-model=\"formData.appcode\" :localdata=\"appCodeOptions\" mode=\"selector\"\n                                :clear=\"false\" class=\"area-select\">\n                                <template v-slot:selected=\"{ selectedItems }\">\n                                    <view class=\"custom-selected\">\n                                        <text v-if=\"selectedItems.length > 0\" class=\"selected-text\">\n                                            {{ selectedItems[0].text }}\n                                        </text>\n                                        <text v-else class=\"placeholder-text\">请选择区域</text>\n                                    </view>\n                                </template>\n                            </uni-data-select>\n                            <view class=\"area-underline\"></view>\n                        </view>\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"商户位置\" name=\"latitude\" :required=\"!isReadOnly\">\n                        <view class=\"location-field\">\n                            <view class=\"location-display\" @click=\"isReadOnly ? viewLocation() : openLocationPicker()\">\n                                <text v-if=\"getLocationText()\" class=\"location-text\">{{ getLocationText() }}</text>\n                                <text v-else class=\"location-placeholder\">{{ isReadOnly ? '点击查看位置' : '点击选择商户位置'\n                                }}</text>\n                            </view>\n                            <image src=\"/static/logo.png\" class=\"select-icon\"\n                                @click=\"isReadOnly ? viewLocation() : openLocationPicker()\" />\n                        </view>\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"联系人\" name=\"contactPerson\" :required=\"!isReadOnly\">\n                        <input v-model=\"formData.contactPerson\" placeholder=\"请输入联系人姓名\" :disabled=\"isReadOnly\"\n                            class=\"input-field\" placeholder-class=\"custom-placeholder\" />\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"联系电话\" name=\"contactPhone\" :required=\"!isReadOnly\">\n                        <input v-model=\"formData.contactPhone\" placeholder=\"请输入联系电话\" type=\"number\" maxlength=\"11\"\n                            :disabled=\"isReadOnly\" class=\"input-field\" placeholder-class=\"custom-placeholder\" />\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"需要垃圾桶数(个)\" name=\"bucketCount\" :required=\"!isReadOnly\">\n                        <input v-model=\"formData.bucketCount\" placeholder=\"请输入垃圾桶数量\" type=\"number\"\n                            :disabled=\"isReadOnly\" class=\"input-field\" placeholder-class=\"custom-placeholder\" />\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"预估垃圾重量(kg)\" name=\"estimatedWeight\" :required=\"!isReadOnly\">\n                        <input v-model=\"formData.estimatedWeight\" placeholder=\"请输入预估垃圾重量\" type=\"number\"\n                            :disabled=\"isReadOnly\" class=\"input-field\" placeholder-class=\"custom-placeholder\" />\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"营业执照上传\" name=\"licenseImages\" :required=\"!isReadOnly\">\n                        <uni-file-picker v-model=\"formData.licenseImages\" file-mediatype=\"image\" mode=\"grid\" :limit=\"3\"\n                            :auto-upload=\"false\" :upload-url=\"uploadUrl\" :header=\"uploadHeaders\" @select=\"onFileSelect\"\n                            :readonly=\"isReadOnly\" :del-icon=\"!isReadOnly\" file-extname=\"jpg,jpeg,png\"\n                            :max-size=\"20971520\" return-type=\"array\">\n                        </uni-file-picker>\n                        <text class=\"upload-tip\" v-if=\"!isReadOnly\">最多上传3张图片，每张图片不超过20MB，支持jpg、png格式</text>\n                    </uni-forms-item>\n\n                    <uni-forms-item label=\"电子合同\" name=\"content\" :required=\"!isReadOnly\">\n                        <view class=\"contract-field\">\n                            <view class=\"contract-display\" @click=\"goToContract()\">\n                                <text v-if=\"isContractSigned\" class=\"contract-text\">已签名</text>\n                                <text v-else\n                                    :class=\"isReadOnly ? 'contract-placeholder-readonly' : 'contract-placeholder'\">{{\n                                        contractDisplayText\n                                    }}</text>\n                            </view>\n                            <image src=\"/static/logo.png\" class=\"select-icon\" @click=\"goToContract()\" />\n                        </view>\n                    </uni-forms-item>\n                </uni-forms>\n            </view>\n\n            <!-- 提交按钮 -->\n            <view class=\"submit-section\" v-if=\"authStatus === 'none' || authStatus === 'rejected'\">\n                <button class=\"submit-btn\" @click=\"submitAuth\" :loading=\"submitting\">\n                    {{ authStatus === 'rejected' ? '重新提交' : '提交认证' }}\n                </button>\n            </view>\n        </view>\n\n        <!-- 商户选择弹窗 -->\n        <view v-if=\"showMerchantPopup\" class=\"merchant-popup-mask\" @click=\"closeMerchantList\">\n            <view class=\"merchant-popup\" @click.stop>\n                <view class=\"popup-header\">\n                    <text class=\"popup-title\">选择商户</text>\n                    <text class=\"popup-close\" @click=\"closeMerchantList\">关闭</text>\n                </view>\n                <view class=\"search-box\">\n                    <input v-model=\"searchKeyword\" placeholder=\"搜索商户名称\" class=\"search-input\" />\n                </view>\n                <scroll-view class=\"merchant-list\" scroll-y>\n                    <view v-for=\"merchant in filteredMerchantList\" :key=\"merchant.id\" class=\"merchant-item\"\n                        @click=\"selectMerchant(merchant)\">\n                        <text class=\"merchant-name\">{{ merchant.name }}</text>\n                    </view>\n                    <view v-if=\"filteredMerchantList.length === 0\" class=\"empty-merchant\">\n                        <text>暂无匹配的商户</text>\n                    </view>\n                </scroll-view>\n            </view>\n        </view>\n\n    </view>\n</template>\n\n<script setup>\nimport { ref, reactive, computed, onMounted } from 'vue'\nimport { apiPostMerchantCheck, apiPostEditMerchantCheck, apiGetMerchantCheck, apiSelectMerchantList } from '@/api/apis.js'\nimport { useUserStore } from '@/stores/user.js'\nimport { uploadUrl, createUploadHeaders } from '@/utils/config.js'\nimport PageHeader from '@/components/PageHeader/PageHeader.vue'\n\n//返回上一页\nconst back = () => {\n    uni.navigateBack()\n}\n\n//商户信息\nconst userStore = useUserStore();\n\n\n// 商户认证数据 - 直接存储API返回的数据\nconst merchantData = ref(null)\n//0:未审核/待审核 1:认证成功 2: 审核不通过\n\n// 当前步骤 - 基于 merchant.status\nconst currentStep = computed(() => {\n    const status = merchantData.value?.status\n    switch (status) {\n        case 0: // 待审核\n            return 2\n        case 1: // 认证成功\n            return 3\n        case 2: // 审核不通过\n            return 1\n        default: // 未提交认证\n            return 1\n    }\n})\n\n// 认证状态 - 根据后端状态码正确映射\nconst authStatus = computed(() => {\n    const status = merchantData.value?.status\n    switch (status) {\n        case 0: // 未审核/待审核 -> 认证中\n            return 'pending'\n        case 1: // 认证成功 -> 已认证\n            return 'approved'\n        case 2: // 审核不通过 -> 未认证\n            return 'rejected'\n        default: // 未提交认证 -> 未认证\n            return 'none'\n    }\n})\n\n\n// 是否为只读状态 - 只有待审核和已通过状态才是只读\nconst isReadOnly = computed(() => {\n    return authStatus.value === 'pending' || authStatus.value === 'approved'\n})\n\n// 判断合同是否已签名\nconst isContractSigned = computed(() => {\n    // 如果有content，表示已签名（第一次提交或修改了合同）\n    if (formData.content) {\n        return true\n    }\n    // 如果有covenantId，表示已签名（服务器返回的合同ID，修改状态但未修改合同）\n    if (formData.covenantId) {\n        return true\n    }\n    return false\n})\n\n// 合同显示文本\nconst contractDisplayText = computed(() => {\n    if (isContractSigned.value) {\n        // 已签名状态：已签名\n        return '已签名'\n    } else {\n        // 未签名状态：请点击查看电子合同并签名\n        return '请点击查看电子合同并签名'\n    }\n})\n\n// // 是否显示商户选择器（只有需要认证的状态才显示）\n// const showMerchantSelector = computed(() => {\n//     return authStatus.value === 'none' || authStatus.value === 'rejected'\n// })\n\n// 表单数据\nconst formData = reactive({\n    merchantName: '',\n    address: '',\n    contactPerson: '',\n    contactPhone: '',\n    bucketCount: '',\n    estimatedWeight: '',\n    appcode: '', // 区域代码\n    latitude: '', // 纬度\n    longitude: '', // 经度\n    locationName: '', // 选择的位置名称（用于显示）\n    licenseImages: [], // 改为数组支持多图上传\n    content: '', // 合同内容\n    startTime: '', // 合同开始时间\n    endTime: '', // 合同结束时间\n    tempId: null, // 合同模板ID\n    covenantId: null // 合同ID\n})\n\n// 区域选择数据\nconst appCodeOptions = [\n    { value: 1, text: '普兴' },\n    { value: 2, text: '兴义' },\n    { value: 3, text: '安西' },\n    { value: 4, text: '五津' },\n    { value: 5, text: '花桥' },\n    { value: 6, text: '永商' },\n    { value: 7, text: '花源' }\n]\n\n// //商户名称选择\n// const merchantNameOptions = ref([])\n\n// 表单引用\nconst formRef = ref()\n\n// 表单验证规则\nconst formRules = {\n    merchantName: {\n        rules: [\n            { required: true, errorMessage: '请输入商户名称' }\n        ]\n    },\n    address: {\n        rules: [\n            { required: true, errorMessage: '请输入商户地址' }\n        ]\n    },\n    appcode: {\n        rules: [\n            { required: true, errorMessage: '请选择所属区域' },\n            {\n                validateFunction: function (rule, value, data, callback) {\n                    // 验证选中的值是否在有效的区域选项中\n                    const validValues = appCodeOptions.map(option => option.value);\n                    if (value && !validValues.includes(parseInt(value))) {\n                        callback('请选择有效的区域');\n                        return false;\n                    }\n                    return true;\n                }\n            }\n        ]\n    },\n    contactPerson: {\n        rules: [\n            { required: true, errorMessage: '请输入联系人姓名' }\n        ]\n    },\n    contactPhone: {\n        rules: [\n            { required: true, errorMessage: '请输入联系电话' },\n            { pattern: /^1[3-9]\\d{9}$/, errorMessage: '请输入正确的手机号码' }\n        ]\n    },\n    bucketCount: {\n        rules: [\n            { required: true, errorMessage: '请输入垃圾桶数量' },\n            {\n                validateFunction: function (rule, value, data, callback) {\n                    if (value && (isNaN(value) || parseInt(value) <= 0)) {\n                        callback('垃圾桶数量必须大于0')\n                    }\n                    return true\n                }\n            }\n        ]\n    },\n    estimatedWeight: {\n        rules: [\n            { required: true, errorMessage: '请输入预估垃圾重量' },\n            {\n                validateFunction: function (rule, value, data, callback) {\n                    if (value && (isNaN(value) || parseFloat(value) <= 0)) {\n                        callback('预估垃圾重量必须大于0')\n                    }\n                    return true\n                }\n            }\n        ]\n    },\n    latitude: {\n        rules: [\n            { required: true, errorMessage: '请选择商户位置坐标' },\n            {\n                validateFunction: function (rule, value, data, callback) {\n                    if (value && (isNaN(value) || parseFloat(value) < -90 || parseFloat(value) > 90)) {\n                        callback('纬度值必须在-90到90之间');\n                        return false;\n                    }\n                    return true;\n                }\n            }\n        ]\n    },\n    longitude: {\n        rules: [\n            { required: true, errorMessage: '请选择商户位置坐标' },\n            {\n                validateFunction: function (rule, value, data, callback) {\n                    if (value && (isNaN(value) || parseFloat(value) < -180 || parseFloat(value) > 180)) {\n                        callback('经度值必须在-180到180之间');\n                        return false;\n                    }\n                    return true;\n                }\n            }\n        ]\n    },\n    licenseImages: {\n        rules: [\n            {\n                required: true,\n                validateFunction: function (rule, value, data, callback) {\n\n                    // 特殊处理：如果是 undefined 或 null，直接失败\n                    if (value === undefined || value === null) {\n                        console.log('验证失败: 值为 undefined 或 null')\n                        callback('请至少上传1张营业执照')\n                        return false\n                    }\n\n                    // 检查是否为数组\n                    if (!Array.isArray(value)) {\n                        console.log('验证失败: 不是数组，类型为:', typeof value)\n                        callback('请至少上传1张营业执照')\n                        return false\n                    }\n\n                    // 检查数组长度\n                    if (value.length === 0) {\n                        console.log('验证失败: 数组为空')\n                        callback('请至少上传1张营业执照')\n                        return false\n                    }\n\n                    // 检查是否有有效的文件（更全面的检查）\n                    const validFiles = value.filter((file, index) => {\n                        console.log(`检查文件${index}:`, JSON.stringify(file))\n                        if (!file) {\n                            console.log(`文件${index}: 文件对象为空`)\n                            return false\n                        }\n\n                        // 检查各种可能的文件格式\n                        const hasUrl = file.url && file.url.trim()\n                        const hasPath = file.path && file.path.trim()\n                        const hasResponse = file.response && file.response.url\n                        const isString = typeof file === 'string' && file.trim()\n                        const hasFileId = file.fileID || file.id\n                        const hasName = file.name\n                        const hasSize = file.size\n                        const hasTempFilePath = file.tempFilePath // uni-file-picker 的临时文件路径\n                        const hasFile = file.file // 原始文件对象\n\n                        console.log(`文件${index}检查结果:`, {\n                            hasUrl, hasPath, hasResponse, isString, hasFileId, hasName, hasSize, hasTempFilePath, hasFile,\n                            url: file.url,\n                            path: file.path,\n                            name: file.name,\n                            size: file.size,\n                            tempFilePath: file.tempFilePath,\n                            file: file.file\n                        })\n\n                        const isValid = hasUrl || hasPath || hasResponse || isString || hasFileId || hasName || hasTempFilePath || hasFile\n                        console.log(`文件${index}是否有效:`, isValid)\n                        return isValid\n                    })\n\n                    console.log('有效文件数量:', validFiles.length)\n                    console.log('有效文件详情:', validFiles.map(f => ({ url: f.url, path: f.path, name: f.name })))\n\n                    if (validFiles.length === 0) {\n                        console.log('验证失败: 没有有效文件')\n                        callback('请至少上传1张营业执照')\n                        return false\n                    }\n\n                    // 检查文件数量限制\n                    if (validFiles.length > 3) {\n                        console.log('验证失败: 文件数量超过限制')\n                        callback('最多只能上传3张图片')\n                        return false\n                    }\n\n                    console.log('验证成功: 有效文件数量', validFiles.length)\n                    console.log('===== 验证营业执照结束 =====')\n                    return true\n                },\n                errorMessage: '请至少上传1张营业执照'\n            }\n        ]\n    },\n    content: {\n        rules: [\n            {\n                required: true,\n                validateFunction: function (rule, value, data, callback) {\n                    if (!value) {\n                        callback('请查看并签署电子合同')\n                        return false\n                    }\n                    return true\n                },\n                errorMessage: '请查看并签署电子合同'\n            }\n        ]\n    }\n}\n\n// 文件上传配置\nconst uploadHeaders = createUploadHeaders().value // 添加 .value 获取实际值\n\n// 提交状态\nconst submitting = ref(false)\n\n// 商户选择相关\nconst merchantList = ref([]) // 商户列表\nconst searchKeyword = ref('') // 搜索关键词\nconst showMerchantPopup = ref(false) // 弹窗显示状态\n\n// 过滤后的商户列表 - 简单模糊搜索\nconst filteredMerchantList = computed(() => {\n    if (!searchKeyword.value) {\n        return merchantList.value\n    }\n\n    const keyword = searchKeyword.value.toLowerCase().trim()\n    if (!keyword) {\n        return merchantList.value\n    }\n\n    return merchantList.value.filter(merchant => {\n        return merchant.name.toLowerCase().includes(keyword)\n    })\n})\n\n// 获取选中区域的文本（用于只读显示）\nconst getSelectedAreaText = () => {\n    if (!formData.appcode) {\n        return ''\n    }\n    const selectedOption = appCodeOptions.find(option => option.value === parseInt(formData.appcode))\n    return selectedOption ? selectedOption.text : ''\n}\n\n// 获取位置文本（用于只读显示）\nconst getLocationText = () => {\n    if (formData.latitude && formData.longitude) {\n        return formData.locationName || `经度: ${formData.longitude}, 纬度: ${formData.latitude}`\n    }\n    return ''\n}\n\n\n\n// 跳转到电子合同页面\nconst goToContract = () => {\n    // 根据认证状态决定页面参数\n    const isReadOnly = authStatus.value === 'pending' || authStatus.value === 'approved'\n\n    console.log('===== shCertification.vue 准备跳转到合同页面 =====')\n    console.log('当前状态:', {\n        isReadOnly: isReadOnly,\n        hasContent: !!formData.content,\n        content: formData.content\n    })\n\n    // 如果有合同内容，传递合同数据用于回显\n    if (formData.content) {\n        console.log('===== 传递已签名的合同内容 =====')\n        const contractContent = encodeURIComponent(formData.content)\n        const startTime = formData.startTime\n        const endTime = formData.endTime\n\n        let url = `/pages/syContract/syContractFromAuth?isReadOnly=${isReadOnly}&hasContract=true&content=${contractContent}&startTime=${startTime}&endTime=${endTime}`\n\n        uni.navigateTo({\n            url: url,\n            success: () => {\n                console.log('跳转到合同页面成功，显示已签名合同')\n            },\n            fail: (err) => {\n                console.error('跳转失败:', err)\n                uni.showToast({\n                    title: '页面跳转失败',\n                    icon: 'none'\n                })\n            }\n        })\n        return\n    }\n\n    // 如果有covenantId但没有content，直接跳转到合同页面（合同页面会用商户ID获取）\n    if (formData.covenantId) {\n        console.log('===== 跳转到合同页面，合同页面会用商户ID获取合同 =====')\n        let url = `/pages/syContract/syContractFromAuth?isReadOnly=${isReadOnly}`\n\n        uni.navigateTo({\n            url: url,\n            success: () => {\n                console.log('跳转到合同页面成功，合同页面会用商户ID获取合同')\n            },\n            fail: (err) => {\n                console.error('跳转失败:', err)\n                uni.showToast({\n                    title: '页面跳转失败',\n                    icon: 'none'\n                })\n            }\n        })\n        return\n    }\n\n    // 如果都没有，跳转到合同页面进行签名\n    console.log('===== 跳转到合同页面进行签名 =====')\n    let url = `/pages/syContract/syContractFromAuth?isReadOnly=${isReadOnly}`\n\n    // 如果是只读模式且有tempId，传入tempId\n    if (isReadOnly && formData.tempId) {\n        url += `&tempId=${formData.tempId}`\n    }\n\n    uni.navigateTo({\n        url: url,\n        success: () => {\n            console.log('跳转到电子合同页面成功，进行签名')\n        },\n        fail: (err) => {\n            console.error('跳转失败:', err)\n            uni.showToast({\n                title: '页面跳转失败',\n                icon: 'none'\n            })\n        }\n    })\n}\n\n// 查看位置（只读模式）\nconst viewLocation = () => {\n    if (formData.latitude && formData.longitude) {\n        // 使用系统地图查看位置\n        uni.openLocation({\n            latitude: parseFloat(formData.latitude),\n            longitude: parseFloat(formData.longitude),\n            name: formData.locationName || '商户位置',\n            address: formData.locationName || '商户位置',\n            success: () => {\n                console.log('打开系统地图成功')\n            },\n            fail: (err) => {\n                console.error('打开系统地图失败:', err)\n                // 如果系统地图打开失败，显示位置信息弹窗\n                uni.showModal({\n                    title: '商户位置',\n                    content: `位置名称：${formData.locationName || '已选择位置'}\\n经度：${formData.longitude}\\n纬度：${formData.latitude}`,\n                    showCancel: false,\n                    confirmText: '确定'\n                })\n            }\n        })\n    } else {\n        uni.showToast({\n            title: '暂无位置信息',\n            icon: 'none'\n        })\n    }\n}\n\n\n\n// 页面加载完成\nonMounted(() => {\n    // 这里可以调用接口获取认证状态\n    loadAuthStatus()\n    // 加载商户列表\n    loadMerchantList()\n\n    // 监听合同页面返回的数据\n    uni.$on('contractUpdated', (contractData) => {\n        // 判断返回的数据是否有值，有值才更新合同状态\n        if (contractData && contractData.content) {\n            formData.content = contractData.content\n            formData.startTime = contractData.createTime\n            formData.endTime = contractData.endTime\n            uni.showToast({\n                title: '合同签名成功',\n                icon: 'success'\n            })\n        } else {\n            console.log('合同数据无效，不更新')\n        }\n    })\n})\n\n// 加载认证状态\nconst loadAuthStatus = async () => {\n    try {\n        // 调用获取认证信息接口\n        const result = await apiGetMerchantCheck({\n            userid: userStore.userId\n        })\n\n        console.log('获取认证状态API返回:', result)\n\n        if (result.code === 200 && result.data) {\n            // 存储商户认证数据\n            merchantData.value = result.data\n\n            // 数据回显\n            fillFormData(result.data)\n\n            console.log('认证状态加载成功, 状态:', result.data)\n        } else {\n            console.log('用户尚未提交认证申请')\n            // 没有认证数据，保持默认状态\n            merchantData.value = null\n        }\n    } catch (error) {\n        console.error('加载认证状态失败:', error)\n        // 发生错误时也保持默认状态\n        merchantData.value = null\n    }\n}\n\n// 数据回显函数\nconst fillFormData = (data) => {\n    if (!data) return\n\n    console.log('开始数据回显:', data)\n\n    // 基本信息回显\n    formData.merchantName = data.name || ''\n    formData.address = data.address || ''\n    formData.appcode = data.appcode || ''\n    formData.contactPerson = data.contactTruename || ''\n    formData.contactPhone = data.contactTel || ''\n    formData.bucketCount = data.bucketNum?.toString() || ''\n    formData.estimatedWeight = data.trashWeight?.toString() || ''\n\n\n    // 经纬度回显\n    if (data.lat && data.lon) {\n        formData.latitude = data.lat.toString()\n        formData.longitude = data.lon.toString()\n        // 可以根据经纬度获取位置名称，这里先用默认值\n        formData.locationName = '已选择位置'\n    }\n\n    // 图片回显\n    if (data.img) {\n        console.log('===== 开始图片回显 =====')\n        console.log('服务器返回的img字段:', data.img)\n\n        const imageUrls = data.img.split(',').filter(url => url.trim())\n        console.log('解析后的图片URLs:', imageUrls)\n\n        formData.licenseImages = imageUrls.map((url, index) => {\n            const trimmedUrl = url.trim()\n            console.log(`回显第${index + 1}个图片URL:`, trimmedUrl)\n            return {\n                url: trimmedUrl,\n                path: trimmedUrl,\n                name: '营业执照'\n            }\n        })\n\n        console.log('回显后的formData.licenseImages:', formData.licenseImages)\n        console.log('===== 图片回显完成 =====')\n    }\n\n    // 电子合同状态回显（如果有合同内容则回显）\n    if (data.content) {\n        formData.content = data.content || ''\n        formData.startTime = data.createTime || ''\n        formData.endTime = data.endTime || ''\n    }\n\n    // 回显covenantId（合同ID）\n    formData.covenantId = data.covenantId || null\n    console.log('回显covenantId:', formData.covenantId, '原始数据:', data.covenantId)\n\n    // 回显tempId（最外层）\n    formData.tempId = data.tempId || ''\n\n    console.log('数据回显完成:', formData)\n    console.log('isContractSigned:', isContractSigned.value)\n}\n\n// 加载商户列表\nconst loadMerchantList = async () => {\n    try {\n        console.log('开始加载商户列表...')\n        const result = await apiSelectMerchantList()\n        console.log('获取商户列表API返回:', result)\n\n        if (result.code === 200 && result.data) {\n            // 只提取name字段，保持原有的id作为key\n            merchantList.value = result.data.map((item, index) => ({\n                id: item.id || index, // 使用返回的id或索引作为key\n                name: item.name\n            }))\n            console.log('商户列表加载成功，数量:', merchantList.value.length)\n        } else {\n            console.log('获取商户列表失败')\n            merchantList.value = []\n        }\n    } catch (error) {\n        console.error('加载商户列表失败:', error)\n        merchantList.value = []\n    }\n}\n\n// 显示商户选择列表\nconst showMerchantList = () => {\n    console.log('点击选择按钮')\n    console.log('merchantList.value:', merchantList.value)\n\n    if (merchantList.value.length === 0) {\n        uni.showToast({\n            title: '商户列表为空',\n            icon: 'none'\n        })\n        return\n    }\n    showMerchantPopup.value = true\n}\n\n// 关闭商户选择列表\nconst closeMerchantList = () => {\n    showMerchantPopup.value = false\n    // 清空搜索关键词\n    searchKeyword.value = ''\n}\n\n// 选择商户\nconst selectMerchant = (merchant) => {\n    console.log('选择商户:', merchant)\n    formData.merchantName = merchant.name\n    closeMerchantList()\n}\n\n\n// 手动上传文件\nconst uploadFileManually = (file, fileIndex = null) => {\n    uni.uploadFile({\n        url: uploadUrl,\n        filePath: file.tempFilePath || file.path,\n        name: 'file',\n        header: uploadHeaders,\n        success: (res) => {\n            console.log('手动上传成功:', res)\n            // 处理上传成功\n            const response = JSON.parse(res.data)\n            if (response.code === 200 && response.url) {\n                // 优先使用传入的文件索引，否则尝试匹配\n                let targetIndex = fileIndex\n                if (targetIndex === null || targetIndex === undefined) {\n                    targetIndex = formData.licenseImages.findIndex(f => {\n                        // 尝试多种匹配方式\n                        return f === file ||\n                            (f.name && file.name && f.name === file.name) ||\n                            (f.uuid && file.uuid && f.uuid === file.uuid) ||\n                            (f.tempFilePath && file.tempFilePath && f.tempFilePath === file.tempFilePath)\n                    })\n                }\n\n                if (targetIndex !== -1 && targetIndex < formData.licenseImages.length) {\n                    const oldFile = formData.licenseImages[targetIndex]\n                    console.log('更新前的文件:', oldFile)\n\n                    formData.licenseImages[targetIndex] = {\n                        ...file,\n                        url: response.url,\n                        fileName: response.fileName,\n                        newFileName: response.newFileName,\n                        originalFilename: response.originalFilename,\n                        response: response\n                    }\n                } else {\n                    // 如果找不到有效的索引，替换数组中的最后一个文件（通常是新选择的文件）\n                    const lastIndex = formData.licenseImages.length - 1\n                    if (lastIndex >= 0) {\n                        formData.licenseImages[lastIndex] = {\n                            ...file,\n                            url: response.url,\n                            fileName: response.fileName,\n                            newFileName: response.newFileName,\n                            originalFilename: response.originalFilename,\n                            response: response\n                        }\n                        console.log('替换最后一个文件后的formData.licenseImages:', formData.licenseImages)\n                    } else {\n                        console.log('数组为空，添加新文件')\n                        formData.licenseImages.push({\n                            ...file,\n                            url: response.url,\n                            fileName: response.fileName,\n                            newFileName: response.newFileName,\n                            originalFilename: response.originalFilename,\n                            response: response\n                        })\n                        console.log('添加后的formData.licenseImages:', formData.licenseImages)\n                    }\n                }\n                console.log('===== 文件上传成功处理完成 =====')\n\n                // 触发表单验证\n                setTimeout(() => {\n                    if (formRef.value) {\n                        formRef.value.validateField('licenseImages')\n                    }\n                }, 100)\n            } else {\n                uni.showToast({\n                    title: '文件上传失败',\n                    icon: 'none'\n                })\n            }\n        },\n        fail: (err) => {\n            uni.showToast({\n                title: '文件上传失败',\n                icon: 'none'\n            })\n        }\n    })\n}\n\n// 文件选择事件\nconst onFileSelect = (res) => {\n\n    // 手动更新表单数据，因为 v-model 可能要等上传完成后才更新\n    if (res.tempFiles && res.tempFiles.length > 0) {\n        // 将选择的文件添加到表单数据中\n        formData.licenseImages = [...formData.licenseImages, ...res.tempFiles]\n        console.log('手动更新后formData.licenseImages:', formData.licenseImages)\n\n        // 手动上传文件 - 传递新文件的索引\n        const newFileIndex = formData.licenseImages.length - 1\n        uploadFileManually(res.tempFiles[0], newFileIndex)\n\n        // 触发表单验证\n        setTimeout(() => {\n            if (formRef.value) {\n                formRef.value.validateField('licenseImages')\n            }\n        }, 100)\n    }\n\n}\n\n\n// 打开地图选择器\nconst openLocationPicker = () => {\n    uni.chooseLocation({\n        success: function (res) {\n            console.log('选择位置成功:', res)\n            formData.latitude = res.latitude.toString()\n            formData.longitude = res.longitude.toString()\n            formData.locationName = res.name || res.address || '已选择位置'\n\n            uni.showToast({\n                title: '位置选择成功',\n                icon: 'success'\n            })\n        },\n        fail: function (err) {\n            console.error('选择位置失败:', err)\n            if (err.errMsg && err.errMsg.includes('cancel')) {\n                // 用户取消选择，不显示错误提示\n                return\n            }\n            uni.showToast({\n                title: '位置选择失败',\n                icon: 'none'\n            })\n        }\n    })\n}\n\n// 表单验证（使用uni-forms的验证方式）\nconst validateForm = async () => {\n    try {\n        const result = await formRef.value.validate()\n        return true\n    } catch (error) {\n        console.log('表单验证失败:', error)\n        return false\n    }\n}\n\n// 提交认证\nconst submitAuth = async () => {\n    // 先进行表单验证\n    const isValid = await validateForm()\n    if (!isValid) {\n        return\n    }\n\n    submitting.value = true\n\n    try {\n        // 处理上传的图片数据\n        let imageUrls = []\n        if (formData.licenseImages && formData.licenseImages.length > 0) {\n            console.log('===== 开始处理图片数据 =====')\n            console.log('formData.licenseImages:', formData.licenseImages)\n\n            imageUrls = formData.licenseImages.map((file, index) => {\n\n                // uni-file-picker返回的文件对象结构\n                if (typeof file === 'string') {\n                    console.log(`使用字符串值:`, file)\n                    return file\n                } else if (file.url) {\n                    console.log(`使用URL:`, file.url)\n                    return file.url\n                } else if (file.path) {\n                    console.log(`使用路径:`, file.path)\n                    return file.path\n                } else {\n                    console.log(`使用原始值:`, file)\n                    return file\n                }\n            })\n\n            console.log('最终图片URLs:', imageUrls)\n            console.log('===== 图片数据处理完成 =====')\n        }\n\n        // 准备提交数据 - 只包含API需要的字段\n        const submitData = {\n            userid: userStore.userId,\n            id: userStore.merchant?.id || '',\n            name: formData.merchantName,              // 商户名称\n            address: formData.address,                // 地址\n            appcode: formData.appcode,                // 区域代码\n            lat: parseFloat(formData.latitude),       // 纬度\n            lon: parseFloat(formData.longitude),      // 经度\n            contactTruename: formData.contactPerson,  // 联系人姓名\n            contactTel: formData.contactPhone,        // 联系电话\n            bucketNum: parseInt(formData.bucketCount), // 预计桶数量\n            trashWeight: parseFloat(formData.estimatedWeight), // 预估垃圾重量\n            img: imageUrls.join(','), // 多张图片用逗号分隔\n            tempId: formData.tempId, // 合同模板ID\n            content: formData.content, // 合同内容\n            startTime: formData.startTime, // 合同开始时间\n            endTime: formData.endTime, // 合同结束时间\n            covenantId: formData.covenantId // 合同ID\n        }\n\n        console.log('提交修改认证数据:', submitData)\n\n        // 根据认证状态选择不同的API\n        let result\n        if (authStatus.value === 'rejected') {\n            // 审核不通过，使用修改接口\n            result = await apiPostEditMerchantCheck(submitData)\n            console.log('修改认证API返回:', result)\n            uni.showToast({\n                title: '修改提交成功',\n                icon: 'success'\n            })\n        } else {\n            // 首次提交，使用新增接口\n            result = await apiPostMerchantCheck(submitData)\n            console.log('认证提交API返回:', result)\n            uni.showToast({\n                title: '认证提交成功',\n                icon: 'success'\n            })\n        }\n\n        // 更新认证状态 - 提交成功后状态为待审核(0)\n        merchantData.value = {\n            ...submitData,\n            status: 0, // 待审核状态\n            updateTime: new Date().toLocaleString()\n        }\n\n        // 同时更新用户store中的merchant数据\n        if (userStore.userInfo) {\n            userStore.updateUserInfo({\n                merchant: merchantData.value\n            })\n        }\n\n    } catch (error) {\n        uni.showToast({\n            title: '提交失败，请重试',\n            icon: 'none'\n        })\n    } finally {\n        submitting.value = false\n    }\n}\n\n\n</script>\n\n<style scoped lang=\"scss\">\n.auth-container {\n    min-height: 100vh;\n    background: $bg-theme-color;\n    padding: 0 30rpx 30rpx;\n\n\n    // 步骤条样式\n    .step-container {\n        background: #ffffff;\n        padding: 40rpx 30rpx;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin: 30rpx 0;\n        height: 144rpx;\n        border-radius: 20rpx;\n\n        .step-item {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            gap: 16rpx;\n\n            &.active {\n                .step-circle {\n                    width: 48rpx;\n                    height: 48rpx;\n                    background: rgba(7, 193, 96, 1);\n                    color: #fff;\n                }\n\n                .step-label {\n                    color: #07c160;\n                    font-weight: 400;\n                }\n            }\n\n            &.completed .step-circle {\n                background: #07c160;\n                color: #fff;\n            }\n        }\n\n        .step-circle {\n            width: 48rpx;\n            height: 48rpx;\n            border-radius: 50%;\n            background: rgba(217, 217, 217, 1);\n            color: #fff;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 24rpx;\n            font-weight: 400;\n            transition: all 0.3s ease;\n        }\n\n        .step-number,\n        .step-check {\n            font-size: 24rpx;\n            font-weight: 400;\n        }\n\n        .step-label {\n            font-size: 24rpx;\n            color: rgba(61, 61, 61, 1);\n            text-align: center;\n        }\n\n        .step-line {\n            flex: 1;\n            height: 2rpx;\n            background: #e5e5e5;\n            margin: 0 20rpx;\n            margin-top: -45rpx; // 向上偏移，与圆圈居中对齐\n            transition: all 0.3s ease;\n\n            &.active {\n                background: #07c160;\n            }\n        }\n    }\n\n    // 表单样式\n    .auth-form {\n        .form-section {\n            background: #ffffff;\n            border-radius: 16rpx;\n            padding: 30rpx;\n            margin-bottom: 30rpx;\n            box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.05);\n\n            .status-tip {\n                margin-bottom: 20rpx;\n\n                .tip-content {\n                    display: flex;\n                    align-items: center;\n                    gap: 8rpx;\n                    padding: 16rpx 20rpx;\n                    background-color: #f8f9fa;\n                    border-radius: 8rpx;\n                    border-left: 4rpx solid #ff9500;\n\n                    &.approved {\n                        border-left-color: #07c160;\n                    }\n\n                    &.rejected {\n                        border-left-color: #ff4444;\n                    }\n\n                    .tip-text {\n                        font-size: 26rpx;\n                        color: #666666;\n                    }\n                }\n            }\n\n            .section-title {\n                font-size: 32rpx;\n                font-weight: bold;\n                color: rgba(38, 38, 38, 1);\n                margin-bottom: 30rpx;\n                display: block;\n            }\n\n            // uni-forms组件样式调整\n            :deep(.uni-forms-item) {\n                margin-bottom: 40rpx; // 增加表单项之间的间距\n\n                // 标签样式调整\n                .uni-forms-item__label {\n                    font-size: 28rpx !important;\n                    color: rgba(38, 38, 38, 1) !important;\n                    margin-bottom: 0rpx !important; // 标签和输入框的间距\n                    white-space: nowrap !important; // 防止标签换行\n\n                    .uni-forms-item__label-text {\n                        white-space: nowrap !important;\n                    }\n                }\n\n                // 错误信息样式调整 - 恢复原始位置但优化样式\n                .uni-forms-item__error {\n                    margin-top: 8rpx !important; // 与输入框的间距\n                    margin-bottom: 20rpx !important; // 与下一个表单项的间距\n                    font-size: 24rpx !important;\n                    color: #ff4444 !important;\n                    line-height: 1.4 !important;\n                    background: transparent !important;\n                }\n            }\n\n            // input样式调整\n            .input-field {\n                width: calc(100% - 24rpx); // 减去左右边距，与下划线对齐\n                height: 55rpx;\n                border: none;\n                border-bottom: 2rpx solid #e5e5e5;\n                background: transparent;\n                padding: 0; // \n                font-size: 28rpx;\n                color: rgba(38, 38, 38, 1);\n                line-height: 40rpx;\n                text-align: left;\n                box-sizing: border-box;\n                margin-left: 12rpx; // 可输入状态：向右偏移12rpx来对齐*号\n                margin-right: 12rpx; // 右边距12rpx，与下划线对齐\n\n                &:focus {\n                    border-bottom-color: #07c160;\n                    outline: none;\n                }\n\n                // 只读状态：不偏移，因为没有*号\n                &:disabled {\n                    margin-left: 0;\n                    margin-right: 0;\n                    width: 100%;\n                }\n            }\n\n            // 微信小程序placeholder样式\n            ::v-deep .custom-placeholder {\n                color: rgba(191, 191, 191, 1) !important;\n                font-size: 28rpx !important;\n                line-height: 40rpx !important;\n            }\n\n            // 只读状态：label不显示*号，需要偏移12rpx来对齐\n            &.readonly ::v-deep .uni-forms-item__label {\n                margin-left: 12rpx !important;\n            }\n\n\n            &:disabled {\n                background-color: #f5f5f5;\n                color: #999;\n                margin-left: 0; // 只读状态不偏移\n            }\n        }\n\n        // 商户名称输入框样式\n        .merchant-name-input {\n            display: flex;\n            align-items: center;\n            gap: 10rpx;\n\n            .input-field {\n                flex: 1;\n            }\n\n            .select-icon {\n                width: 40rpx;\n                height: 40rpx;\n                cursor: pointer;\n            }\n        }\n\n        // uni-data-select 插槽自定义样式\n        .custom-selected {\n            display: flex;\n            align-items: center;\n            height: 40rpx;\n            margin-left: -8rpx; // 往左偏移8rpx对齐\n\n            .selected-text {\n                font-size: 28rpx;\n                color: rgba(38, 38, 38, 1) !important;\n                line-height: 40rpx;\n            }\n\n            .placeholder-text {\n                font-size: 28rpx;\n                color: rgba(191, 191, 191, 1) !important;\n                line-height: 40rpx;\n            }\n        }\n\n        // 所属区域包装器样式\n        .area-select-wrapper {\n\n            height: 55rpx;\n            margin-top: -10rpx;\n        }\n\n        // uni-data-select 组件整体样式调整（微信小程序兼容）\n        ::v-deep .area-select .uni-data-select__input-box {\n            border: none !important; // 完全移除自带的下划线\n            background: transparent !important;\n            padding: 0 12rpx 0 12rpx !important; // 恢复正常的padding\n            display: flex !important;\n            align-items: center !important;\n            justify-content: flex-start !important;\n\n            margin-left: 0 !important;\n        }\n\n\n        // 自定义下划线\n        .area-underline {\n            position: absolute;\n            bottom: -15rpx;\n            left: 12rpx;\n            right: 12rpx;\n            height: 2rpx;\n\n            background-color: #e5e5e5;\n        }\n\n        // 确保placeholder颜色一致（微信小程序兼容）\n        ::v-deep .uni-data-select .uni-data-select__input-box .uni-data-select__input {\n            color: rgba(38, 38, 38, 1) !important;\n        }\n\n        ::v-deep .uni-data-select .uni-data-select__input-box .uni-data-select__placeholder {\n            color: rgba(191, 191, 191, 1) !important;\n        }\n\n        // 位置字段样式\n        .location-field {\n            display: flex;\n            align-items: center;\n            gap: 10rpx;\n\n            .location-display {\n                flex: 1;\n                height: 55rpx;\n                border: none;\n                border-bottom: 2rpx solid #e5e5e5;\n                background: transparent;\n                padding: 0;\n                display: flex;\n                align-items: center;\n                margin-left: 12rpx;\n                margin-right: 12rpx; // 右边距12rpx，与下划线对齐\n                cursor: pointer;\n                -webkit-tap-highlight-color: transparent; // 移除点击高亮效果\n\n                .location-text {\n                    font-size: 28rpx;\n                    color: rgba(38, 38, 38, 1);\n                    line-height: 40rpx;\n                }\n\n                .location-placeholder {\n                    font-size: 28rpx;\n                    color: rgba(191, 191, 191, 1);\n                    line-height: 40rpx;\n                }\n            }\n\n            // 只读状态：位置字段不偏移\n            &.readonly .location-display {\n                margin-left: 0;\n                margin-right: 0;\n            }\n\n            .select-icon {\n                width: 40rpx;\n                height: 40rpx;\n                cursor: pointer;\n            }\n        }\n\n        // 电子合同字段样式（与位置字段相同）\n        .contract-field {\n            display: flex;\n            align-items: center;\n            gap: 10rpx;\n\n            .contract-display {\n                flex: 1;\n                height: 55rpx;\n                border: none;\n                border-bottom: 2rpx solid #e5e5e5;\n                background: transparent;\n                padding: 0;\n                display: flex;\n                align-items: center;\n                margin-left: 12rpx;\n                margin-right: 12rpx; // 右边距12rpx，与下划线对齐\n                cursor: pointer;\n                -webkit-tap-highlight-color: transparent; // 移除点击高亮效果\n\n                .contract-text {\n                    font-size: 28rpx;\n                    color: rgba(38, 38, 38, 1);\n                    line-height: 40rpx;\n                }\n\n                .contract-placeholder {\n                    font-size: 28rpx;\n                    color: rgba(191, 191, 191, 1);\n                    line-height: 40rpx;\n                }\n\n                .contract-placeholder-readonly {\n                    font-size: 28rpx;\n                    color: rgba(38, 38, 38, 1);\n                    line-height: 40rpx;\n                }\n            }\n\n            // 只读状态：电子合同字段不偏移\n            &.readonly .contract-display {\n                margin-left: 0;\n                margin-right: 0;\n            }\n\n            .select-icon {\n                width: 40rpx;\n                height: 40rpx;\n                cursor: pointer;\n            }\n        }\n\n        // 上传提示样式\n        .upload-tip {\n            font-size: 24rpx;\n            color: #999999;\n            margin-top: 10rpx;\n            line-height: 1.4;\n        }\n\n\n        // 只读状态样式\n        &.readonly {\n            .input-field {\n                color: rgba(38, 38, 38, 1);\n            }\n\n        }\n    }\n\n    // 上传区域样式（保留旧的，以防需要）\n    .upload-group {\n        display: flex;\n        flex-direction: column;\n        gap: 30rpx;\n\n        .upload-item {\n            display: flex;\n            flex-direction: column;\n            gap: 15rpx;\n\n            .upload-label {\n                font-size: 28rpx;\n                color: #333333;\n                font-weight: 500;\n            }\n\n            .upload-area {\n                width: 100%;\n                height: 200rpx;\n                background: #f8f8f8;\n                border: 2rpx dashed #cccccc;\n                border-radius: 12rpx;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                overflow: hidden;\n\n                .upload-placeholder {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    gap: 10rpx;\n\n                    .upload-icon {\n                        font-size: 48rpx;\n                    }\n\n                    .upload-text {\n                        font-size: 24rpx;\n                        color: #999999;\n                    }\n                }\n\n                .uploaded-image {\n                    width: 100%;\n                    height: 100%;\n                }\n            }\n        }\n    }\n\n    // 提交按钮样式\n    .submit-section {\n        padding: 0 30rpx;\n        margin-top: 40rpx;\n\n        .submit-btn {\n            width: 100%;\n            height: 80rpx;\n            background: linear-gradient(135deg, #07c160 0%, #10ad6a 100%);\n            color: #ffffff;\n            border-radius: 60rpx;\n            font-size: 32rpx;\n            font-weight: bold;\n            border: none;\n\n            &:disabled {\n                background: #cccccc;\n                color: #999999;\n            }\n\n            &:active:not(:disabled) {\n                transform: scale(0.98);\n            }\n        }\n    }\n}\n\n\n// 商户选择弹窗样式\n.merchant-popup-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 9999;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n}\n\n.merchant-popup {\n    background: white;\n    border-radius: 20rpx 20rpx 0 0;\n    height: 60vh;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .popup-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 30rpx;\n        border-bottom: 1rpx solid #e5e5e5;\n        flex-shrink: 0; // 防止压缩\n        height: 88rpx; // 固定头部高度\n\n        .popup-title {\n            font-size: 32rpx;\n            font-weight: bold;\n            color: #333;\n        }\n\n        .popup-close {\n            font-size: 28rpx;\n            color: #007aff;\n            padding: 10rpx;\n        }\n    }\n\n    .search-box {\n        padding: 20rpx 30rpx;\n        border-bottom: 1rpx solid #e5e5e5;\n        flex-shrink: 0; // 防止压缩\n        height: 100rpx; // 固定搜索框高度\n        display: flex;\n        align-items: center;\n\n        .search-input {\n            width: 100%;\n            height: 60rpx;\n            border: 1rpx solid #e5e5e5;\n            border-radius: 30rpx;\n            background: #f8f8f8;\n            padding: 0 20rpx;\n            font-size: 28rpx;\n            color: #333;\n\n            &::placeholder {\n                color: rgba(191, 191, 191, 1);\n            }\n\n            &:focus {\n                border-color: #07c160;\n                background: #fff;\n                outline: none;\n            }\n        }\n    }\n\n    .merchant-list {\n        flex: 1;\n        height: calc(80vh - 188rpx); // 减去头部(88rpx)和搜索框(100rpx)的高度\n        overflow-y: auto;\n\n        .merchant-item {\n            padding: 30rpx;\n            border-bottom: 1rpx solid #f0f0f0;\n            display: flex;\n            align-items: center;\n\n            &:active {\n                background-color: #f5f5f5;\n            }\n\n            .merchant-name {\n                font-size: 28rpx;\n                color: #333;\n            }\n        }\n\n        .empty-merchant {\n            padding: 60rpx 30rpx;\n            text-align: center;\n\n            text {\n                font-size: 26rpx;\n                color: #999;\n            }\n        }\n    }\n}\n</style>\n","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/merchant/shCertification.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","useUserStore","ref","computed","reactive","createUploadHeaders","isReadOnly","url","onMounted","apiGetMerchantCheck","apiSelectMerchantList","uploadUrl","apiPostEditMerchantCheck","apiPostMerchantCheck"],"mappings":"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"}