{"version":3,"file":"certification.js","sources":["pages/merchant/certification.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVyY2hhbnQvY2VydGlmaWNhdGlvbi52dWU"],"sourcesContent":["<!-- 认证界面 -->\r\n<template>\r\n    <view class=\"auth-container\">\r\n        <!-- 步骤条 -->\r\n        <view class=\"step-container\">\r\n            <view class=\"step-item\" :class=\"{ active: currentStep >= 1, completed: currentStep > 1 }\">\r\n                <view class=\"step-circle\">\r\n                    <text class=\"step-number\" v-if=\"currentStep <= 1\">1</text>\r\n                    <text class=\"step-check\" v-else>✓</text>\r\n                </view>\r\n                <text class=\"step-label\">申请认证</text>\r\n            </view>\r\n            <view class=\"step-line\" :class=\"{ active: currentStep > 1 }\"></view>\r\n            <view class=\"step-item\" :class=\"{ active: currentStep >= 2, completed: currentStep > 2 }\">\r\n                <view class=\"step-circle\">\r\n                    <text class=\"step-number\" v-if=\"currentStep <= 2\">2</text>\r\n                    <text class=\"step-check\" v-else>✓</text>\r\n                </view>\r\n                <text class=\"step-label\">待审核</text>\r\n            </view>\r\n            <view class=\"step-line\" :class=\"{ active: currentStep > 2 }\"></view>\r\n            <view class=\"step-item\" :class=\"{ active: currentStep >= 3 }\">\r\n                <view class=\"step-circle\">\r\n                    <text class=\"step-number\">3</text>\r\n                </view>\r\n                <text class=\"step-label\">认证完成</text>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 认证表单 -->\r\n        <view class=\"auth-form\">\r\n            <view class=\"form-section\" :class=\"{ readonly: isReadOnly }\">\r\n                <view class=\"status-tip\" v-if=\"isReadOnly\">\r\n                    <view class=\"tip-content\" v-if=\"authStatus === 'pending'\">\r\n                        <uni-icons type=\"info\" size=\"16\" color=\"#ff9500\"></uni-icons>\r\n                        <text class=\"tip-text\">您的认证申请正在审核中，请耐心等待</text>\r\n                    </view>\r\n                    <view class=\"tip-content approved\" v-else-if=\"authStatus === 'approved'\">\r\n                        <uni-icons type=\"checkmarkempty\" size=\"16\" color=\"#07c160\"></uni-icons>\r\n                        <text class=\"tip-text\">恭喜！您的商户认证已通过</text>\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 审核不通过提示 -->\r\n                <view class=\"status-tip\" v-if=\"authStatus === 'rejected'\">\r\n                    <view class=\"tip-content rejected\">\r\n                        <uni-icons type=\"closeempty\" size=\"16\" color=\"#ff4444\"></uni-icons>\r\n                        <text class=\"tip-text\">很抱歉，您的认证申请未通过审核，请重新提交</text>\r\n                    </view>\r\n                </view>\r\n                <text class=\"section-title\">基本信息</text>\r\n\r\n                <!-- 使用uni-forms表单组件 -->\r\n                <uni-forms ref=\"formRef\" :modelValue=\"formData\" :rules=\"formRules\" label-position=\"top\">\r\n                    <uni-forms-item label=\"商户名称\" name=\"merchantName\" required>\r\n                        <uni-easyinput v-model=\"formData.merchantName\" placeholder=\"请输入商户名称\" :clearable=\"false\"\r\n                            :disabled=\"isReadOnly\">\r\n                        </uni-easyinput>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"商户地址\" name=\"address\" required>\r\n                        <uni-easyinput v-model=\"formData.address\" placeholder=\"请输入详细地址\" :clearable=\"false\"\r\n                            :disabled=\"isReadOnly\">\r\n                        </uni-easyinput>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"所属区域\" name=\"appcode\" required>\r\n                        <uni-data-select v-model=\"formData.appcode\" :localdata=\"appCodeOptions\" placeholder=\"请选择区域\"\r\n                            :clear=\"false\" :disabled=\"isReadOnly\">\r\n                        </uni-data-select>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"商户位置\" name=\"latitude\" required>\r\n                        <view class=\"location-picker\">\r\n                            <view class=\"location-input\" @click=\"!isReadOnly && openLocationPicker()\"\r\n                                :class=\"{ disabled: isReadOnly }\">\r\n                                <view v-if=\"formData.latitude && formData.longitude\" class=\"location-info\">\r\n                                    <text class=\"location-name\">{{ formData.locationName || '已选择位置' }}</text>\r\n                                    <text class=\"location-coords\">经度: {{ formData.longitude }}, 纬度: {{ formData.latitude\r\n                                        }}</text>\r\n                                </view>\r\n                                <text class=\"location-placeholder\" v-else>点击选择商户位置</text>\r\n                                <uni-icons type=\"location\" size=\"20\" color=\"#999\"></uni-icons>\r\n                            </view>\r\n                        </view>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"联系人\" name=\"contactPerson\" required>\r\n                        <uni-easyinput v-model=\"formData.contactPerson\" placeholder=\"请输入联系人姓名\" :clearable=\"false\"\r\n                            :disabled=\"isReadOnly\">\r\n                        </uni-easyinput>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"联系电话\" name=\"contactPhone\" required>\r\n                        <uni-easyinput v-model=\"formData.contactPhone\" placeholder=\"请输入联系电话\" type=\"number\"\r\n                            maxlength=\"11\" :clearable=\"false\" :disabled=\"isReadOnly\">\r\n                        </uni-easyinput>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"需要垃圾桶数(个)\" name=\"bucketCount\" required>\r\n                        <uni-easyinput v-model=\"formData.bucketCount\" placeholder=\"请输入垃圾桶数量\" type=\"number\"\r\n                            :clearable=\"false\" :disabled=\"isReadOnly\">\r\n                        </uni-easyinput>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"预估垃圾重量\" name=\"estimatedWeight\" required>\r\n                        <uni-easyinput v-model=\"formData.estimatedWeight\" placeholder=\"请输入预估垃圾重量\" type=\"number\"\r\n                            :clearable=\"false\" :disabled=\"isReadOnly\">\r\n                        </uni-easyinput>\r\n                    </uni-forms-item>\r\n\r\n                    <uni-forms-item label=\"营业执照上传\" name=\"licenseImages\" required>\r\n                        <uni-file-picker v-model=\"formData.licenseImages\" file-mediatype=\"image\" mode=\"grid\" :limit=\"3\"\r\n                            :auto-upload=\"true\" :upload-url=\"uploadUrl\" :header=\"uploadHeaders\" @select=\"onFileSelect\"\r\n                            @progress=\"onUploadProgress\" @success=\"onUploadSuccess\" @fail=\"onUploadFail\"\r\n                            @delete=\"onFileDelete\" :disabled=\"isReadOnly\" file-extname=\"jpg,jpeg,png\"\r\n                            :max-size=\"20971520\">\r\n                        </uni-file-picker>\r\n                        <text class=\"upload-tip\" v-if=\"!isReadOnly\">最多上传3张图片，每张图片不超过20MB，支持jpg、png格式</text>\r\n                    </uni-forms-item>\r\n                </uni-forms>\r\n            </view>\r\n\r\n            <!-- 提交按钮 -->\r\n            <view class=\"submit-section\" v-if=\"authStatus === 'none' || authStatus === 'rejected'\">\r\n                <button class=\"submit-btn\" @click=\"submitAuth\" :loading=\"submitting\">\r\n                    {{ authStatus === 'rejected' ? '重新提交' : '提交认证' }}\r\n                </button>\r\n            </view>\r\n        </view>\r\n\r\n\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, onMounted } from 'vue'\r\nimport { apiPostMerchantCheck, apiGetMerchantCheck } from '@/api/apis.js'\r\nimport { useUserStore } from '@/stores/user.js'\r\n\r\n//商户信息\r\nconst userStore = useUserStore();\r\n\r\n\r\n// 商户认证数据 - 直接存储API返回的数据\r\nconst merchantData = ref(null)\r\n//0:未审核/待审核 1:认证成功 2: 审核不通过\r\n\r\n// 当前步骤 - 基于 merchant.status\r\nconst currentStep = computed(() => {\r\n    const status = merchantData.value?.status\r\n    switch (status) {\r\n        case 0: // 待审核\r\n            return 2\r\n        case 1: // 认证成功\r\n            return 3\r\n        case 2: // 审核不通过\r\n            return 1\r\n        default: // 未提交认证\r\n            return 1\r\n    }\r\n})\r\n\r\n// 认证状态 - 根据后端状态码正确映射\r\nconst authStatus = computed(() => {\r\n    const status = merchantData.value?.status\r\n    switch (status) {\r\n        case 0: // 未审核/待审核 -> 认证中\r\n            return 'pending'\r\n        case 1: // 认证成功 -> 已认证\r\n            return 'approved'\r\n        case 2: // 审核不通过 -> 未认证\r\n            return 'rejected'\r\n        default: // 未提交认证 -> 未认证\r\n            return 'none'\r\n    }\r\n})\r\n\r\n// 认证状态显示文本\r\nconst authStatusText = computed(() => {\r\n    switch (authStatus.value) {\r\n        case 'pending':\r\n            return '认证中'\r\n        case 'approved':\r\n            return '已认证'\r\n        case 'rejected':\r\n        case 'none':\r\n            return '未认证'\r\n        default:\r\n            return '未认证'\r\n    }\r\n})\r\n\r\n// 是否为只读状态\r\nconst isReadOnly = computed(() => {\r\n    return authStatus.value === 'pending' || authStatus.value === 'approved'\r\n})\r\n\r\n// 表单数据\r\nconst formData = reactive({\r\n    merchantName: '',\r\n    address: '',\r\n    contactPerson: '',\r\n    contactPhone: '',\r\n    bucketCount: '',\r\n    estimatedWeight: '',\r\n    appcode: '', // 区域代码\r\n    latitude: '', // 纬度\r\n    longitude: '', // 经度\r\n    locationName: '', // 选择的位置名称（用于显示）\r\n    licenseImages: [] // 改为数组支持多图上传\r\n})\r\n\r\n// 区域选择数据\r\nconst appCodeOptions = [\r\n    { value: 1, text: '普兴' },\r\n    { value: 2, text: '兴义' },\r\n    { value: 3, text: '安西' },\r\n    { value: 4, text: '五津' },\r\n    { value: 5, text: '花桥' },\r\n    { value: 6, text: '永商' },\r\n    { value: 7, text: '花源' }\r\n]\r\n\r\n// 表单引用\r\nconst formRef = ref()\r\n\r\n// 表单验证规则\r\nconst formRules = {\r\n    merchantName: {\r\n        rules: [\r\n            { required: true, errorMessage: '请输入商户名称' }\r\n        ]\r\n    },\r\n    address: {\r\n        rules: [\r\n            { required: true, errorMessage: '请输入商户地址' }\r\n        ]\r\n    },\r\n    appcode: {\r\n        rules: [\r\n            { required: true, errorMessage: '请选择所属区域' },\r\n            {\r\n                validateFunction: function (rule, value, data, callback) {\r\n                    // 验证选中的值是否在有效的区域选项中\r\n                    const validValues = appCodeOptions.map(option => option.value);\r\n                    if (value && !validValues.includes(parseInt(value))) {\r\n                        callback('请选择有效的区域');\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    contactPerson: {\r\n        rules: [\r\n            { required: true, errorMessage: '请输入联系人姓名' }\r\n        ]\r\n    },\r\n    contactPhone: {\r\n        rules: [\r\n            { required: true, errorMessage: '请输入联系电话' },\r\n            { pattern: /^1[3-9]\\d{9}$/, errorMessage: '请输入正确的手机号码' }\r\n        ]\r\n    },\r\n    bucketCount: {\r\n        rules: [\r\n            { required: true, errorMessage: '请输入垃圾桶数量' },\r\n            {\r\n                validateFunction: function (rule, value, data, callback) {\r\n                    if (value && (isNaN(value) || parseInt(value) <= 0)) {\r\n                        callback('垃圾桶数量必须大于0')\r\n                    }\r\n                    return true\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    estimatedWeight: {\r\n        rules: [\r\n            { required: true, errorMessage: '请输入预估垃圾重量' },\r\n            {\r\n                validateFunction: function (rule, value, data, callback) {\r\n                    if (value && (isNaN(value) || parseFloat(value) <= 0)) {\r\n                        callback('预估垃圾重量必须大于0')\r\n                    }\r\n                    return true\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    latitude: {\r\n        rules: [\r\n            { required: true, errorMessage: '请选择商户位置坐标' },\r\n            {\r\n                validateFunction: function (rule, value, data, callback) {\r\n                    if (value && (isNaN(value) || parseFloat(value) < -90 || parseFloat(value) > 90)) {\r\n                        callback('纬度值必须在-90到90之间');\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    longitude: {\r\n        rules: [\r\n            { required: true, errorMessage: '请选择商户位置坐标' },\r\n            {\r\n                validateFunction: function (rule, value, data, callback) {\r\n                    if (value && (isNaN(value) || parseFloat(value) < -180 || parseFloat(value) > 180)) {\r\n                        callback('经度值必须在-180到180之间');\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    licenseImages: {\r\n        rules: [\r\n            {\r\n                required: true,\r\n                validateFunction: function (rule, value, data, callback) {\r\n                    console.log('===== 开始验证营业执照 =====')\r\n                    console.log('验证营业执照 - 完整数据:', JSON.stringify(value))\r\n                    console.log('验证营业执照 - 数据类型:', typeof value)\r\n                    console.log('验证营业执照 - 是否数组:', Array.isArray(value))\r\n                    console.log('验证营业执照 - 原始值:', value)\r\n\r\n                    // 特殊处理：如果是 undefined 或 null，直接失败\r\n                    if (value === undefined || value === null) {\r\n                        console.log('验证失败: 值为 undefined 或 null')\r\n                        callback('请至少上传1张营业执照')\r\n                        return false\r\n                    }\r\n\r\n                    // 检查是否为数组\r\n                    if (!Array.isArray(value)) {\r\n                        console.log('验证失败: 不是数组，类型为:', typeof value)\r\n                        callback('请至少上传1张营业执照')\r\n                        return false\r\n                    }\r\n\r\n                    // 检查数组长度\r\n                    if (value.length === 0) {\r\n                        console.log('验证失败: 数组为空')\r\n                        callback('请至少上传1张营业执照')\r\n                        return false\r\n                    }\r\n\r\n                    // 检查是否有有效的文件（更全面的检查）\r\n                    const validFiles = value.filter((file, index) => {\r\n                        console.log(`检查文件${index}:`, JSON.stringify(file))\r\n                        if (!file) {\r\n                            console.log(`文件${index}: 文件对象为空`)\r\n                            return false\r\n                        }\r\n\r\n                        // 检查各种可能的文件格式\r\n                        const hasUrl = file.url && file.url.trim()\r\n                        const hasPath = file.path && file.path.trim()\r\n                        const hasResponse = file.response && file.response.url\r\n                        const isString = typeof file === 'string' && file.trim()\r\n                        const hasFileId = file.fileID || file.id\r\n                        const hasName = file.name\r\n                        const hasSize = file.size\r\n                        const hasTempFilePath = file.tempFilePath // uni-file-picker 的临时文件路径\r\n                        const hasFile = file.file // 原始文件对象\r\n\r\n                        console.log(`文件${index}检查结果:`, {\r\n                            hasUrl, hasPath, hasResponse, isString, hasFileId, hasName, hasSize, hasTempFilePath, hasFile,\r\n                            url: file.url,\r\n                            path: file.path,\r\n                            name: file.name,\r\n                            size: file.size,\r\n                            tempFilePath: file.tempFilePath,\r\n                            file: file.file\r\n                        })\r\n\r\n                        const isValid = hasUrl || hasPath || hasResponse || isString || hasFileId || hasName || hasTempFilePath || hasFile\r\n                        console.log(`文件${index}是否有效:`, isValid)\r\n                        return isValid\r\n                    })\r\n\r\n                    console.log('有效文件数量:', validFiles.length)\r\n                    console.log('有效文件详情:', validFiles.map(f => ({ url: f.url, path: f.path, name: f.name })))\r\n\r\n                    if (validFiles.length === 0) {\r\n                        console.log('验证失败: 没有有效文件')\r\n                        callback('请至少上传1张营业执照')\r\n                        return false\r\n                    }\r\n\r\n                    // 检查文件数量限制\r\n                    if (validFiles.length > 3) {\r\n                        console.log('验证失败: 文件数量超过限制')\r\n                        callback('最多只能上传3张图片')\r\n                        return false\r\n                    }\r\n\r\n                    console.log('验证成功: 有效文件数量', validFiles.length)\r\n                    console.log('===== 验证营业执照结束 =====')\r\n                    return true\r\n                },\r\n                errorMessage: '请至少上传1张营业执照'\r\n            }\r\n        ]\r\n    }\r\n}\r\n\r\n// 文件上传配置\r\nconst uploadUrl = 'http://192.168.0.118:8089/api/merchantapi/webupload'\r\nconst uploadHeaders = computed(() => {\r\n    const accessToken = uni.getStorageSync('access_token')\r\n    return {\r\n        'authorization': accessToken ? `Bearer ${accessToken}` : ''\r\n    }\r\n})\r\n\r\n\r\n// 提交状态\r\nconst submitting = ref(false)\r\n\r\n// 页面加载完成\r\nonMounted(() => {\r\n    console.log('商户认证页面加载完成')\r\n    // 这里可以调用接口获取认证状态\r\n    loadAuthStatus()\r\n})\r\n\r\n// 加载认证状态\r\nconst loadAuthStatus = async () => {\r\n    try {\r\n        console.log('开始加载认证状态...')\r\n\r\n        // 调用获取认证信息接口\r\n        const result = await apiGetMerchantCheck({\r\n            userid: userStore.userId\r\n        })\r\n\r\n        console.log('获取认证状态API返回:', result)\r\n\r\n        if (result.code === 200 && result.data) {\r\n            // 存储商户认证数据\r\n            merchantData.value = result.data\r\n\r\n            // 数据回显\r\n            fillFormData(result.data)\r\n\r\n            console.log('认证状态加载成功, 状态:', result.data.status)\r\n        } else {\r\n            console.log('用户尚未提交认证申请')\r\n            // 没有认证数据，保持默认状态\r\n            merchantData.value = null\r\n        }\r\n    } catch (error) {\r\n        console.error('加载认证状态失败:', error)\r\n        // 发生错误时也保持默认状态\r\n        merchantData.value = null\r\n    }\r\n}\r\n\r\n// 数据回显函数\r\nconst fillFormData = (data) => {\r\n    if (!data) return\r\n\r\n    console.log('开始数据回显:', data)\r\n\r\n    // 基本信息回显\r\n    formData.merchantName = data.name || ''\r\n    formData.address = data.address || ''\r\n    formData.appcode = data.appcode || ''\r\n    formData.contactPerson = data.contactTruename || ''\r\n    formData.contactPhone = data.contactTel || ''\r\n    formData.bucketCount = data.bucketNum?.toString() || ''\r\n    formData.estimatedWeight = data.trashWeight?.toString() || ''\r\n\r\n    // 经纬度回显\r\n    if (data.lat && data.lon) {\r\n        formData.latitude = data.lat.toString()\r\n        formData.longitude = data.lon.toString()\r\n        // 可以根据经纬度获取位置名称，这里先用默认值\r\n        formData.locationName = '已选择位置'\r\n    }\r\n\r\n    // 图片回显\r\n    if (data.img) {\r\n        const imageUrls = data.img.split(',').filter(url => url.trim())\r\n        formData.licenseImages = imageUrls.map(url => ({\r\n            url: url.trim(),\r\n            path: url.trim(),\r\n            name: '营业执照'\r\n        }))\r\n    }\r\n\r\n    console.log('数据回显完成:', formData)\r\n}\r\n\r\n\r\n\r\n// 文件上传成功事件\r\nconst onUploadSuccess = (res) => {\r\n    console.log('===== 文件上传成功事件 =====')\r\n    console.log('上传成功回调参数:', res)\r\n    console.log('tempFiles:', res.tempFiles)\r\n    console.log('tempFilePaths:', res.tempFilePaths)\r\n    console.log('当前formData.licenseImages:', formData.licenseImages)\r\n\r\n    // 根据文档，上传成功后 v-model 会自动绑定值\r\n    // 但我们仍需要触发表单验证\r\n    setTimeout(() => {\r\n        console.log('延迟后的formData.licenseImages:', formData.licenseImages)\r\n        if (formRef.value) {\r\n            formRef.value.validateField('licenseImages')\r\n        }\r\n    }, 200) // 增加延迟时间，确保 v-model 更新完成\r\n\r\n    console.log('===== 文件上传成功事件结束 =====')\r\n}\r\n\r\n// 文件上传失败事件\r\nconst onUploadFail = (err) => {\r\n    console.error('文件上传失败:', err)\r\n    uni.showToast({\r\n        title: '文件上传失败',\r\n        icon: 'none'\r\n    })\r\n}\r\n\r\n// 文件选择事件\r\nconst onFileSelect = (res) => {\r\n    console.log('===== 文件选择事件 =====')\r\n    console.log('选择文件:', res)\r\n    console.log('tempFiles:', res.tempFiles)\r\n    console.log('tempFilePaths:', res.tempFilePaths)\r\n    console.log('选择前formData.licenseImages:', formData.licenseImages)\r\n\r\n    // 手动更新表单数据，因为 v-model 可能要等上传完成后才更新\r\n    if (res.tempFiles && res.tempFiles.length > 0) {\r\n        // 将选择的文件添加到表单数据中\r\n        formData.licenseImages = [...formData.licenseImages, ...res.tempFiles]\r\n        console.log('手动更新后formData.licenseImages:', formData.licenseImages)\r\n\r\n        // 触发表单验证\r\n        setTimeout(() => {\r\n            if (formRef.value) {\r\n                formRef.value.validateField('licenseImages')\r\n            }\r\n        }, 100)\r\n    }\r\n\r\n    console.log('===== 文件选择事件结束 =====')\r\n}\r\n\r\n// 文件上传进度事件\r\nconst onUploadProgress = (res) => {\r\n    console.log('上传进度:', res)\r\n}\r\n\r\n// 文件删除事件\r\nconst onFileDelete = (res) => {\r\n    console.log('===== 文件删除事件 =====')\r\n    console.log('文件删除:', res)\r\n    console.log('删除前formData.licenseImages:', formData.licenseImages)\r\n\r\n    // v-model 应该会自动更新，但我们确保验证被触发\r\n    setTimeout(() => {\r\n        console.log('删除后formData.licenseImages:', formData.licenseImages)\r\n        if (formRef.value) {\r\n            formRef.value.validateField('licenseImages')\r\n        }\r\n    }, 100)\r\n    console.log('===== 文件删除事件结束 =====')\r\n}\r\n\r\n// 打开地图选择器\r\nconst openLocationPicker = () => {\r\n    uni.chooseLocation({\r\n        success: function (res) {\r\n            console.log('选择位置成功:', res)\r\n            formData.latitude = res.latitude.toString()\r\n            formData.longitude = res.longitude.toString()\r\n            formData.locationName = res.name || res.address || '已选择位置'\r\n\r\n            uni.showToast({\r\n                title: '位置选择成功',\r\n                icon: 'success'\r\n            })\r\n        },\r\n        fail: function (err) {\r\n            console.error('选择位置失败:', err)\r\n            if (err.errMsg && err.errMsg.includes('cancel')) {\r\n                // 用户取消选择，不显示错误提示\r\n                return\r\n            }\r\n            uni.showToast({\r\n                title: '位置选择失败',\r\n                icon: 'none'\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\n// 表单验证（使用uni-forms的验证方式）\r\nconst validateForm = async () => {\r\n    try {\r\n        const result = await formRef.value.validate()\r\n        return true\r\n    } catch (error) {\r\n        console.log('表单验证失败:', error)\r\n        return false\r\n    }\r\n}\r\n\r\n// 提交认证\r\nconst submitAuth = async () => {\r\n    // 先进行表单验证\r\n    const isValid = await validateForm()\r\n    if (!isValid) {\r\n        return\r\n    }\r\n\r\n    submitting.value = true\r\n\r\n    try {\r\n        // 处理上传的图片数据\r\n        let imageUrls = []\r\n        if (formData.licenseImages && formData.licenseImages.length > 0) {\r\n            imageUrls = formData.licenseImages.map(file => {\r\n                // uni-file-picker返回的文件对象结构\r\n                if (typeof file === 'string') {\r\n                    return file\r\n                } else if (file.url) {\r\n                    return file.url\r\n                } else if (file.path) {\r\n                    return file.path\r\n                } else {\r\n                    return file\r\n                }\r\n            })\r\n        }\r\n\r\n        // 准备提交数据 - 只包含API需要的字段\r\n        const submitData = {\r\n            userid: userStore.userId,\r\n            name: formData.merchantName,              // 商户名称\r\n            address: formData.address,                // 地址\r\n            appcode: formData.appcode,                // 区域代码\r\n            lat: parseFloat(formData.latitude),       // 纬度\r\n            lon: parseFloat(formData.longitude),      // 经度\r\n            contactTruename: formData.contactPerson,  // 联系人姓名\r\n            contactTel: formData.contactPhone,        // 联系电话\r\n            bucketNum: parseInt(formData.bucketCount), // 预计桶数量\r\n            trashWeight: parseFloat(formData.estimatedWeight), // 预估垃圾重量\r\n            img: imageUrls.join(',') // 法人证照片，多张图片用逗号分隔\r\n        }\r\n\r\n        console.log('提交认证数据:', submitData)\r\n\r\n        // 调用认证提交API\r\n        const result = await apiPostMerchantCheck(submitData)\r\n        console.log('认证提交API返回:', result)\r\n\r\n        uni.showToast({\r\n            title: '认证申请提交成功',\r\n            icon: 'success'\r\n        })\r\n\r\n        // 更新认证状态 - 提交成功后状态为待审核(0)\r\n        merchantData.value = {\r\n            ...submitData,\r\n            status: 0, // 待审核状态\r\n            updateTime: new Date().toLocaleString()\r\n        }\r\n\r\n        // 同时更新用户store中的merchant数据\r\n        if (userStore.userInfo) {\r\n            userStore.updateUserInfo({\r\n                merchant: merchantData.value\r\n            })\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('提交认证失败:', error)\r\n        uni.showToast({\r\n            title: '提交失败，请重试',\r\n            icon: 'none'\r\n        })\r\n    } finally {\r\n        submitting.value = false\r\n    }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.auth-container {\r\n    min-height: 100vh;\r\n    background: $bg-theme-color;\r\n\r\n    padding: 20rpx 30rpx 40rpx 30rpx;\r\n\r\n    // 步骤条样式\r\n    .step-container {\r\n        background: #ffffff;\r\n        padding: 40rpx 30rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin-bottom: 30rpx;\r\n        height: 144rpx;\r\n\r\n        .step-item {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            gap: 16rpx;\r\n\r\n            &.active {\r\n                .step-circle {\r\n                    width: 48rpx;\r\n                    height: 48rpx;\r\n                    background: rgba(7, 193, 96, 1);\r\n                    color: #fff;\r\n                }\r\n\r\n                .step-label {\r\n                    color: #07c160;\r\n                    font-weight: 400;\r\n                }\r\n            }\r\n\r\n            &.completed .step-circle {\r\n                background: #07c160;\r\n                color: #fff;\r\n            }\r\n        }\r\n\r\n        .step-circle {\r\n            width: 48rpx;\r\n            height: 48rpx;\r\n            border-radius: 50%;\r\n            background: rgba(217, 217, 217, 1);\r\n            color: #fff;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            font-size: 24rpx;\r\n            font-weight: 400;\r\n            transition: all 0.3s ease;\r\n        }\r\n\r\n        .step-number,\r\n        .step-check {\r\n            font-size: 24rpx;\r\n            font-weight: 400;\r\n        }\r\n\r\n        .step-label {\r\n            font-size: 24rpx;\r\n            color: rgba(61, 61, 61, 1);\r\n            text-align: center;\r\n        }\r\n\r\n        .step-line {\r\n            flex: 1;\r\n            height: 2rpx;\r\n            background: #e5e5e5;\r\n            margin: 0 20rpx;\r\n            margin-top: -45rpx; // 向上偏移，与圆圈居中对齐\r\n            transition: all 0.3s ease;\r\n\r\n            &.active {\r\n                background: #07c160;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 表单样式\r\n    .auth-form {\r\n        .form-section {\r\n            background: #ffffff;\r\n            border-radius: 16rpx;\r\n            padding: 30rpx;\r\n            margin-bottom: 30rpx;\r\n            box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.05);\r\n\r\n            .status-tip {\r\n                margin-bottom: 20rpx;\r\n\r\n                .tip-content {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 8rpx;\r\n                    padding: 16rpx 20rpx;\r\n                    background-color: #f8f9fa;\r\n                    border-radius: 8rpx;\r\n                    border-left: 4rpx solid #ff9500;\r\n\r\n                    &.approved {\r\n                        border-left-color: #07c160;\r\n                    }\r\n\r\n                    &.rejected {\r\n                        border-left-color: #ff4444;\r\n                    }\r\n\r\n                    .tip-text {\r\n                        font-size: 26rpx;\r\n                        color: #666666;\r\n                    }\r\n                }\r\n            }\r\n\r\n            .section-title {\r\n                font-size: 32rpx;\r\n                font-weight: bold;\r\n                color: rgba(38, 38, 38, 1);\r\n                margin-bottom: 30rpx;\r\n                display: block;\r\n            }\r\n\r\n            // uni-forms组件样式调整\r\n            :deep(.uni-forms-item) {\r\n                margin-bottom: 40rpx; // 增加表单项之间的间距\r\n\r\n                // 标签样式调整\r\n                .uni-forms-item__label {\r\n                    font-size: 28rpx !important;\r\n                    color: rgba(38, 38, 38, 1) !important;\r\n                    margin-bottom: 0rpx !important; // 标签和输入框的间距\r\n                    white-space: nowrap !important; // 防止标签换行\r\n\r\n                    .uni-forms-item__label-text {\r\n                        white-space: nowrap !important;\r\n                    }\r\n                }\r\n\r\n                // 错误信息样式调整 - 恢复原始位置但优化样式\r\n                .uni-forms-item__error {\r\n                    margin-top: 8rpx !important; // 与输入框的间距\r\n                    margin-bottom: 20rpx !important; // 与下一个表单项的间距\r\n                    font-size: 24rpx !important;\r\n                    color: #ff4444 !important;\r\n                    line-height: 1.4 !important;\r\n                    background: transparent !important;\r\n                }\r\n            }\r\n\r\n            // uni-easyinput样式调整，根据官方文档优化\r\n            // 使用!important是因为uni-app组件有内联样式和深层嵌套样式，需要强制覆盖\r\n            :deep(.uni-easyinput) {\r\n                .uni-easyinput__content {\r\n                    border: none !important;\r\n                    border-radius: 0 !important;\r\n                    border-bottom: 2rpx solid #e5e5e5 !important;\r\n                    background: transparent !important;\r\n                    padding: 0 30rpx 10rpx 30rpx !important; // 左右各30rpx边距\r\n                    height: 60rpx !important;\r\n                    display: flex !important;\r\n                    align-items: center !important;\r\n                    justify-content: flex-start !important;\r\n                    position: relative !important;\r\n\r\n                    &.is-focused {\r\n                        border-bottom-color: #07c160 !important;\r\n                    }\r\n                }\r\n\r\n                .uni-easyinput__content-input {\r\n                    font-size: 28rpx !important;\r\n                    color: rgba(38, 38, 38, 1) !important;\r\n                    height: 40rpx !important; // 设置固定高度\r\n                    line-height: 40rpx !important; // 行高与高度一致实现垂直居中\r\n                    padding: 0 !important;\r\n                    margin: 0 !important;\r\n                    flex: 1 !important;\r\n                    text-align: left !important;\r\n                    transform: translateY(5rpx) !important; // 向下偏移10rpx\r\n                    box-sizing: border-box !important;\r\n                }\r\n\r\n                .uni-easyinput__placeholder-class {\r\n                    color: rgba(191, 191, 191, 1) !important;\r\n                    font-size: 28rpx !important;\r\n                    line-height: 40rpx !important;\r\n                    text-align: left !important;\r\n                    transform: translateY(5rpx) !important; // 占位符也向下偏移10rpx\r\n                }\r\n\r\n                // 清除按钮样式调整\r\n                .uni-easyinput__content-clear-icon {\r\n                    transform: translateY(10rpx) !important; // 清除按钮也向下偏移\r\n                }\r\n            }\r\n\r\n            // uni-data-select样式调整，与uni-easyinput保持一致\r\n            :deep(.uni-data-select) {\r\n                .uni-data-select__input-box {\r\n                    border: none !important;\r\n                    border-radius: 0 !important;\r\n                    border-bottom: 2rpx solid #e5e5e5 !important;\r\n                    background: transparent !important;\r\n                    padding: 0 30rpx 10rpx 30rpx !important; // 左右各30rpx边距\r\n                    height: 60rpx !important;\r\n                    box-shadow: none !important;\r\n                    display: flex !important;\r\n                    align-items: center !important;\r\n                    justify-content: flex-start !important;\r\n                    position: relative !important;\r\n\r\n                    .uni-data-select__input {\r\n                        font-size: 28rpx !important;\r\n                        color: rgba(38, 38, 38, 1) !important;\r\n                        height: 40rpx !important; // 设置固定高度\r\n                        line-height: 40rpx !important; // 行高与高度一致\r\n                        border: none !important;\r\n                        padding: 0 !important;\r\n                        margin: 0 !important;\r\n                        flex: 1 !important;\r\n                        text-align: left !important;\r\n                        transform: translateY(10rpx) !important; // 向下偏移10rpx\r\n                        box-sizing: border-box !important;\r\n                    }\r\n\r\n                    .uni-data-select__input.uni-data-select__input--placeholder {\r\n                        color: rgba(191, 191, 191, 1) !important;\r\n                        line-height: 40rpx !important;\r\n                        text-align: left !important;\r\n                        transform: translateY(10rpx) !important; // 占位符也向下偏移10rpx\r\n                    }\r\n\r\n                    // 下拉箭头也向下偏移\r\n                    .uni-data-select__input-arrow {\r\n                        transform: translateY(10rpx) !important;\r\n                    }\r\n                }\r\n\r\n                // 移除选择器的外层边框\r\n                .uni-data-select__selector {\r\n                    border: none !important;\r\n                    box-shadow: none !important;\r\n                }\r\n\r\n                // 移除可能存在的其他边框\r\n                &>view {\r\n                    border: none !important;\r\n                }\r\n            }\r\n\r\n            // 上传提示样式\r\n            .upload-tip {\r\n                font-size: 24rpx;\r\n                color: #999999;\r\n                margin-top: 10rpx;\r\n                line-height: 1.4;\r\n            }\r\n\r\n            // 位置选择器样式，与其他输入框保持一致\r\n            .location-picker {\r\n                .location-input {\r\n                    border: none;\r\n                    border-bottom: 2rpx solid #e5e5e5;\r\n                    padding: 0 30rpx 10rpx 30rpx; // 左右各30rpx边距\r\n                    height: 60rpx;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: flex-start;\r\n                    cursor: pointer;\r\n                    position: relative;\r\n\r\n                    .location-info {\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        gap: 2rpx; // 减小间距\r\n                        flex: 1;\r\n                        justify-content: center;\r\n                        align-items: flex-start;\r\n                        transform: translateY(10rpx); // 向下偏移10rpx\r\n\r\n                        .location-name {\r\n                            font-size: 28rpx;\r\n                            color: rgba(38, 38, 38, 1);\r\n                            font-weight: 500;\r\n                            line-height: 1.3;\r\n                            text-align: left;\r\n                        }\r\n\r\n                        .location-coords {\r\n                            font-size: 20rpx; // 稍微减小字体\r\n                            color: #666666;\r\n                            line-height: 1.2;\r\n                            text-align: left;\r\n                        }\r\n                    }\r\n\r\n                    .location-placeholder {\r\n                        color: rgba(191, 191, 191, 1);\r\n                        font-size: 28rpx;\r\n                        flex: 1;\r\n                        line-height: 40rpx; // 与输入框保持一致\r\n                        display: flex;\r\n                        align-items: center;\r\n                        text-align: left;\r\n                        transform: translateY(10rpx); // 向下偏移10rpx\r\n                    }\r\n\r\n                    // 位置图标也向下偏移\r\n                    .uni-icons {\r\n                        transform: translateY(10rpx) !important;\r\n                    }\r\n\r\n                    &:active {\r\n                        background-color: rgba(0, 0, 0, 0.05);\r\n                    }\r\n\r\n                    &.disabled {\r\n                        cursor: not-allowed;\r\n                        opacity: 0.6;\r\n\r\n                        &:active {\r\n                            background-color: transparent;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 只读状态样式\r\n            &.readonly {\r\n                :deep(.uni-easyinput) {\r\n                    .uni-easyinput__content {\r\n                        background-color: #f5f5f5 !important;\r\n\r\n                        .uni-easyinput__content-input {\r\n                            color: #999 !important;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                :deep(.uni-data-select) {\r\n                    .uni-data-select__input-box {\r\n                        background-color: #f5f5f5 !important;\r\n\r\n                        .uni-data-select__input {\r\n                            color: #999 !important;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                :deep(.uni-file-picker) {\r\n                    opacity: 0.6;\r\n                    pointer-events: none;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // 上传区域样式（保留旧的，以防需要）\r\n    .upload-group {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 30rpx;\r\n\r\n        .upload-item {\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 15rpx;\r\n\r\n            .upload-label {\r\n                font-size: 28rpx;\r\n                color: #333333;\r\n                font-weight: 500;\r\n            }\r\n\r\n            .upload-area {\r\n                width: 100%;\r\n                height: 200rpx;\r\n                background: #f8f8f8;\r\n                border: 2rpx dashed #cccccc;\r\n                border-radius: 12rpx;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                overflow: hidden;\r\n\r\n                .upload-placeholder {\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    align-items: center;\r\n                    gap: 10rpx;\r\n\r\n                    .upload-icon {\r\n                        font-size: 48rpx;\r\n                    }\r\n\r\n                    .upload-text {\r\n                        font-size: 24rpx;\r\n                        color: #999999;\r\n                    }\r\n                }\r\n\r\n                .uploaded-image {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 提交按钮样式\r\n    .submit-section {\r\n        padding: 0 30rpx;\r\n        margin-top: 40rpx;\r\n\r\n        .submit-btn {\r\n            width: 100%;\r\n            height: 80rpx;\r\n            background: linear-gradient(135deg, #07c160 0%, #10ad6a 100%);\r\n            color: #ffffff;\r\n            border-radius: 60rpx;\r\n            font-size: 32rpx;\r\n            font-weight: bold;\r\n            border: none;\r\n\r\n            &:disabled {\r\n                background: #cccccc;\r\n                color: #999999;\r\n            }\r\n\r\n            &:active:not(:disabled) {\r\n                transform: scale(0.98);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Vue3Project/cycl/pages/merchant/certification.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","computed","reactive","uni","onMounted","apiGetMerchantCheck","apiPostMerchantCheck"],"mappings":"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"}