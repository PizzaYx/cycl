{"version":3,"file":"shyyDetail.js","sources":["pages/merchant/shyyDetail.vue","pages/merchant/shyyDetail.vue?type=page"],"sourcesContent":["<!-- 商户预约详细 -->\n<template>\n    <view class=\"container\">\n        <!-- 头部导航 -->\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"预约详细\"\n            @clickLeft=\"back\" />\n\n        <!-- 用户信息 -->\n        <view class=\"user-info\">\n            <view class=\"name\">{{ pageData.merchantName }}</view>\n            <view class=\"status-tag\" :class=\"statusClass\">{{ statusText }}</view>\n        </view>\n        <!-- 内容区域 -->\n        <view class=\"content\">\n            <!-- 基础信息列表 -->\n            <view class=\"info-list\">\n                <view class=\"info-item\" v-for=\"(item, index) in infoList\" :key=\"index\">\n                    <text class=\"label\">{{ item.label }}</text>\n                    <text class=\"value\">{{ item.value }}</text>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script setup>\nimport { onMounted, ref, computed } from 'vue';\nimport { apiGetPlanTemporaryById } from '@/api/apis.js'\nimport { onLoad } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\nimport { formatWeight, formatNum } from '@/utils/orderUtils'\n\n// 页面参数\nconst merchantId = ref(); // 商户ID\nconst id = ref(); // 收运ID\n\n// 页面数据\nconst pageData = ref({\n\n});\n\n// 根据状态显示对应的文字\nconst statusText = computed(() => {\n    switch (pageData.value.status) {\n        case 0: return '待审核';\n        case 1: return '审核通过';\n        case 2: return '未通过';\n        default: return '';\n    }\n});\n\nconst statusClass = computed(() => {\n    switch (pageData.value.status) {\n        case 0: return 'booking'; // 待审核 \n        case 1: return 'passed'; // 审核通过 \n        case 2: return 'notpassed'; // 审核不通过 \n        default: return '';\n    }\n});\n\n// 信息列表配置\nconst infoList = computed(() => [\n    {\n        label: '预估时间:',\n        value: pageData.value.appointmentTime ? pageData.value.appointmentTime : '暂无',\n    },\n    {\n        label: '预估重量:',\n        value: formatWeight(pageData.value.estimateWeight)\n    },\n    {\n        label: '预估桶数:',\n        value: formatNum(pageData.value.estimateBucketNum)\n    },\n    {\n        label: '收运地址:',\n        value: pageData.value.address ?? '暂无',\n    },\n    {\n        label: '其他说明:',\n        value: pageData.value.explain ?? '暂无',\n    }\n]);\n\nonLoad((options) => {\n    if (options.id) id.value = options.id;\n    // 处理参数名可能有空格的情况\n    if (options.merchantId) {\n        merchantId.value = options.merchantId;\n    } else if (options['merchantId ']) {\n        merchantId.value = options['merchantId '];\n    }\n\n    // 在参数赋值后立即调用API\n    getSyCheckDetail();\n});\n\n// 页面逻辑\nonMounted(() => {\n    // API调用已移到onLoad中\n})\n\n\n\n//获取收运记录详情\nconst getSyCheckDetail = async () => {\n\n    const res = await apiGetPlanTemporaryById({\n        merchantId: merchantId.value,\n        id: id.value,\n\n    })\n\n    if (res.code === 200) {\n        const data = res.data;\n\n        // 统一更新pageData\n        pageData.value = {\n            driverName: data.driverName ?? '',\n            status: data.status,\n            merchantName: data.merchantName ?? '',\n            estimateWeight: data.estimateWeight ?? 0,\n            weight: data.weight ?? 0,\n            estimateBucketNum: data.estimateBucketNum ?? 0,\n            bucketNum: data.bucketNum ?? 0,\n            registrationNumber: data.registrationNumber ?? 0,\n            img: data.img ? data.img.split(',') : [],\n            appointmentTime: data.appointmentTime ?? 0,\n            arrivalTime: data.arrivalTime,\n            address: data.address ?? '',\n            explain: data.explain ?? '暂无',\n\n        };\n        console.log('获取收运记录详情成功', pageData.value);\n    }\n}\n// 返回上一页\nconst back = () => {\n    uni.navigateBack()\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: $bg-theme-color;\n    padding: 0 30rpx;\n}\n\n.user-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 30rpx;\n    background-color: #ffffff;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n    margin-top: 20rpx;\n    border-radius: 16rpx;\n\n    .name {\n        font-size: 32rpx;\n        font-weight: bold;\n        color: #333333;\n    }\n\n    .status-tag {\n        font-size: 24rpx;\n        width: 120rpx;\n        height: 40rpx;\n        border-radius: 8rpx;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n\n\n        &.booking {\n            color: rgba(255, 161, 0, 1);\n            background: rgba(255, 161, 0, 0.10);\n        }\n\n        &.passed {\n            color: rgba(7, 193, 96, 1);\n            background: rgba(7, 193, 96, 0.10);\n        }\n\n        &.notpassed {\n            color: rgba(221, 57, 47, 1);\n            background: rgba(221, 57, 47, 0.10);\n        }\n    }\n}\n\n.content {\n    padding: 32rpx 0;\n    position: relative;\n    background-color: #ffffff;\n    border-radius: 16rpx;\n    margin-top: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n\n    .info-list {\n        padding: 0 30rpx;\n        margin-bottom: 40rpx;\n\n        .info-item {\n            display: block;\n            margin-bottom: 30rpx;\n            // padding-bottom: 32rpx;\n            border-bottom: 1rpx solid #f0f0f0;\n\n            &:last-child {\n                border-bottom: none;\n                margin-bottom: 0;\n                padding-bottom: 0;\n            }\n\n            .label {\n                display: block;\n                font-size: 14px;\n                color: #999999;\n                margin-bottom: 20rpx;\n            }\n\n            .value {\n                display: block;\n                font-size: 14px;\n                color: #333333;\n                line-height: 1.4;\n                margin-bottom: 5rpx;\n            }\n        }\n    }\n\n    .photo-section {\n        margin-top: 48rpx;\n        padding: 0 30rpx;\n\n        .photo-title {\n            font-size: 14px;\n            color: #999999;\n            margin-bottom: 24rpx;\n            display: block;\n        }\n\n        .photo-list {\n            display: flex;\n            gap: 20rpx;\n\n            .photo-item {\n                width: 186rpx;\n                height: 186rpx;\n                border-radius: 8rpx;\n                box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n            }\n        }\n    }\n}\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/merchant/shyyDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","formatWeight","formatNum","onLoad","onMounted","apiGetPlanTemporaryById","uni"],"mappings":";;;;;;;;;;;;;;;AAgCA,UAAM,aAAaA,cAAG,IAAA;AACtB,UAAM,KAAKA,cAAG,IAAA;AAGd,UAAM,WAAWA,cAAAA,IAAI,CAErB,CAAC;AAGD,UAAM,aAAaC,cAAQ,SAAC,MAAM;AAC9B,cAAQ,SAAS,MAAM,QAAM;AAAA,QACzB,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACnB;AAAA,IACL,CAAC;AAED,UAAM,cAAcA,cAAQ,SAAC,MAAM;AAC/B,cAAQ,SAAS,MAAM,QAAM;AAAA,QACzB,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACnB;AAAA,IACL,CAAC;AAGD,UAAM,WAAWA,cAAQ,SAAC,MAAM;AAAA,MAC5B;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,kBAAkB,SAAS,MAAM,kBAAkB;AAAA,MAC5E;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOC,iBAAY,aAAC,SAAS,MAAM,cAAc;AAAA,MACpD;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOC,iBAAS,UAAC,SAAS,MAAM,iBAAiB;AAAA,MACpD;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,WAAW;AAAA,MACpC;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,WAAW;AAAA,MACpC;AAAA,IACL,CAAC;AAEDC,kBAAM,OAAC,CAAC,YAAY;AAChB,UAAI,QAAQ;AAAI,WAAG,QAAQ,QAAQ;AAEnC,UAAI,QAAQ,YAAY;AACpB,mBAAW,QAAQ,QAAQ;AAAA,MACnC,WAAe,QAAQ,aAAa,GAAG;AAC/B,mBAAW,QAAQ,QAAQ,aAAa;AAAA,MAC3C;AAGD;IACJ,CAAC;AAGDC,kBAAAA,UAAU,MAAM;AAAA,IAEhB,CAAC;AAKD,UAAM,mBAAmB,YAAY;AAEjC,YAAM,MAAM,MAAMC,iCAAwB;AAAA,QACtC,YAAY,WAAW;AAAA,QACvB,IAAI,GAAG;AAAA,MAEf,CAAK;AAED,UAAI,IAAI,SAAS,KAAK;AAClB,cAAM,OAAO,IAAI;AAGjB,iBAAS,QAAQ;AAAA,UACb,YAAY,KAAK,cAAc;AAAA,UAC/B,QAAQ,KAAK;AAAA,UACb,cAAc,KAAK,gBAAgB;AAAA,UACnC,gBAAgB,KAAK,kBAAkB;AAAA,UACvC,QAAQ,KAAK,UAAU;AAAA,UACvB,mBAAmB,KAAK,qBAAqB;AAAA,UAC7C,WAAW,KAAK,aAAa;AAAA,UAC7B,oBAAoB,KAAK,sBAAsB;AAAA,UAC/C,KAAK,KAAK,MAAM,KAAK,IAAI,MAAM,GAAG,IAAI,CAAE;AAAA,UACxC,iBAAiB,KAAK,mBAAmB;AAAA,UACzC,aAAa,KAAK;AAAA,UAClB,SAAS,KAAK,WAAW;AAAA,UACzB,SAAS,KAAK,WAAW;AAAA,QAErC;AACQC,sBAAA,MAAA,MAAA,OAAA,wCAAY,cAAc,SAAS,KAAK;AAAA,MAC3C;AAAA,IACL;AAEA,UAAM,OAAO,MAAM;AACfA,oBAAAA,MAAI,aAAc;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzIA,GAAG,WAAW,eAAe;"}