{"version":3,"file":"syCheckDetail.js","sources":["pages/collection/syCheckDetail.vue","pages/collection/syCheckDetail.vue?type=page"],"sourcesContent":["<!-- 收运记录详细 -->\r\n<template>\r\n    <view class=\"container\">\r\n        <!-- 头部导航 -->\r\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"收运记录详细\"\r\n            @clickLeft=\"back\" />\r\n\r\n        <!-- 用户信息 -->\r\n        <view class=\"user-info\">\r\n            <view class=\"name\">{{ pageData.driverName }}</view>\r\n            <view class=\"status-tag\" :class=\"statusClass\">{{ statusText }}</view>\r\n        </view>\r\n        <!-- 内容区域 -->\r\n        <view class=\"content\">\r\n\r\n            <!-- 基础信息列表 -->\r\n            <view class=\"info-list\">\r\n                <view class=\"info-item\" v-for=\"(item, index) in infoList\" :key=\"index\">\r\n                    <text class=\"label\">{{ item.label }}</text>\r\n                    <text class=\"value\">{{ item.value }}</text>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- 照片区域 -->\r\n            <view class=\"photo-section\">\r\n                <text class=\"photo-title\">厨余垃圾照片:</text>\r\n                <view class=\"photo-list\">\r\n                    <image v-for=\"(item, index) in pageData.img\" :key=\"index\" class=\"photo-item\" :src=\"item\"\r\n                        mode=\"aspectFill\" @click=\"previewImage(index)\" />\r\n                </view>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, computed } from 'vue';\r\nimport { apiGetDriverPlanById } from '@/api/apis.js'\r\nimport { onLoad } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\r\n\r\n// 页面参数\r\nconst planId = ref(''); // 车辆ID\r\nconst driverId = ref(''); // 司机ID\r\n\r\n// 页面数据\r\nconst pageData = ref({\r\n    // driverName: '', //司机名称\r\n    // status: null, //状态 0 进行中 1.已完成 2.无法收运 \r\n    // merchantName: '', //商家名称\r\n\r\n    // weight: 0.0, //重量\r\n    // bucketNum: 0, //桶数\r\n    // address: '', //地址 \r\n    // registrationNumber: '', //车牌号\r\n    // img: [], //照片数组\r\n    // time: '', // 收运时间\r\n    // estimateTime: '' // 预估时间\r\n});\r\n\r\n// 根据状态显示对应的文字\r\nconst statusText = computed(() => {\r\n    switch (pageData.value.status) {\r\n        case 0: return '进行中';\r\n        case 1: return '已完成';\r\n        case 2: return '无法收运';\r\n        default: return '';\r\n    }\r\n});\r\n\r\nconst statusClass = computed(() => {\r\n    switch (pageData.value.status) {\r\n        case 0: return 'processing';\r\n        case 1: return 'completed';\r\n        case 2: return 'cancelled';\r\n        default: return '';\r\n    }\r\n});\r\n\r\n// 信息列表配置\r\nconst infoList = computed(() => [\r\n    {\r\n        label: '商家名称:',\r\n        value: pageData.value.merchantName\r\n    },\r\n    {\r\n        label: '预估时间:',\r\n        value: pageData.value.appointmentTime ?? '暂无',\r\n    },\r\n    {\r\n        label: '收运时间:',\r\n        value: pageData.value.arrivalTime ?? '暂无',\r\n    },\r\n    {\r\n        label: '预估重量:',\r\n        value: pageData.value.estimateWeight + 'kg' ?? '暂无'\r\n\r\n    },\r\n    {\r\n        label: '收运重量:',\r\n        value: pageData.value.weight + 'kg' ?? '暂无'\r\n    },\r\n    {\r\n        label: '预估桶数:',\r\n        value: pageData.value.estimateBucketNum + '个' ?? '暂无'\r\n    },\r\n    {\r\n        label: '收运桶数:',\r\n        value: pageData.value.bucketNum + '个' ?? '暂无'\r\n    },\r\n    {\r\n        label: '收运地址:',\r\n        value: pageData.value.address ?? '暂无',\r\n    },\r\n    {\r\n        label: '车牌号:',\r\n        value: pageData.value.registrationNumber ?? '暂无',\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n]);\r\n\r\nonLoad((options) => {\r\n    if (options.planId) planId.value = options.planId;\r\n    if (options.driverId) driverId.value = options.driverId;\r\n\r\n    console.log('接收到的参数:', options);\r\n});\r\n\r\n// 页面逻辑\r\nonMounted(() => {\r\n    // 获取收运记录详情\r\n    getSyCheckDetail()\r\n})\r\n\r\n\r\n\r\n//获取收运记录详情\r\nconst getSyCheckDetail = async () => {\r\n    const res = await apiGetDriverPlanById({\r\n        driverId: driverId.value,\r\n        id: planId.value\r\n\r\n    })\r\n\r\n    if (res.code === 200) {\r\n        const data = res.data;\r\n\r\n        // 统一更新pageData\r\n        pageData.value = {\r\n            driverName: data.driverName,\r\n            status: data.status,\r\n            merchantName: data.merchantName,\r\n            estimateWeight: data.estimateWeight || 0.0,\r\n            weight: data.weight || 0.0,\r\n            estimateBucketNum: data.estimateBucketNum || 0,\r\n            bucketNum: data.bucketNum || 0,\r\n            registrationNumber: data.registrationNumber,\r\n            img: data.img ? data.img.split(',') : [],\r\n            appointmentTime: data.appointmentTime,\r\n            arrivalTime: data.arrivalTime,\r\n            address: data.address,\r\n\r\n        };\r\n    }\r\n}\r\n// 返回上一页\r\nconst back = () => {\r\n    uni.navigateBack()\r\n}\r\n\r\n// 照片预览功能\r\nconst previewImage = (index) => {\r\n    uni.previewImage({\r\n        urls: pageData.value.img,\r\n        current: index\r\n    })\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n    min-height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: $bg-theme-color;\r\n    padding: 0 30rpx;\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 30rpx;\r\n    background-color: #ffffff;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n    margin-top: 20rpx;\r\n    border-radius: 16rpx;\r\n\r\n    .name {\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        color: #333333;\r\n    }\r\n\r\n    .status-tag {\r\n        font-size: 24rpx;\r\n        width: 120rpx;\r\n        height: 40rpx;\r\n        border-radius: 8rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        text-align: center;\r\n\r\n\r\n        &.processing {\r\n            //进行中 待完成\r\n            color: rgba(0, 170, 255, 1);\r\n            background: rgba(0, 170, 255, 0.10);\r\n        }\r\n\r\n        &.completed {\r\n            //已完成\r\n            color: rgba(61, 61, 61, 0.50);\r\n            background: rgba(153, 153, 153, 0.1);\r\n        }\r\n\r\n        &.cancelled {\r\n            //无法收运\r\n            color: rgba(255, 161, 0, 1);\r\n            background: rgba(255, 161, 0, 0.10);\r\n\r\n        }\r\n    }\r\n}\r\n\r\n.content {\r\n    padding: 32rpx 0;\r\n    position: relative;\r\n    background-color: #ffffff;\r\n    border-radius: 16rpx;\r\n    margin-top: 20rpx;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n    .info-list {\r\n        padding: 0 30rpx;\r\n\r\n        .info-item {\r\n            display: flex;\r\n            margin-bottom: 32rpx;\r\n            padding-bottom: 32rpx;\r\n            border-bottom: 1rpx solid #f0f0f0;\r\n\r\n            &:last-child {\r\n                border-bottom: none;\r\n                margin-bottom: 0;\r\n                padding-bottom: 0;\r\n            }\r\n\r\n            .label {\r\n                width: 140rpx;\r\n                font-size: 14px;\r\n                color: #999999;\r\n                flex-shrink: 0;\r\n            }\r\n\r\n            .value {\r\n                margin-left: 30rpx;\r\n                flex: 1;\r\n                font-size: 14px;\r\n                color: #333333;\r\n            }\r\n        }\r\n    }\r\n\r\n    .photo-section {\r\n        margin-top: 48rpx;\r\n        padding: 0 30rpx;\r\n\r\n        .photo-title {\r\n            font-size: 14px;\r\n            color: #999999;\r\n            margin-bottom: 24rpx;\r\n            display: block;\r\n        }\r\n\r\n        .photo-list {\r\n            display: flex;\r\n            gap: 20rpx;\r\n\r\n            .photo-item {\r\n                width: 186rpx;\r\n                height: 186rpx;\r\n                border-radius: 8rpx;\r\n                box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/collection/syCheckDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onLoad","uni","onMounted","apiGetDriverPlanById"],"mappings":"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"}