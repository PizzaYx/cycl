{"version":3,"file":"syCheckDetail.js","sources":["pages/collection/syCheckDetail.vue","pages/collection/syCheckDetail.vue?type=page"],"sourcesContent":["<!-- 收运记录详细 -->\r\n<template>\r\n    <view class=\"container\">\r\n        <!-- 头部导航 -->\r\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"收运记录详细\"\r\n            @clickLeft=\"back\" />\r\n\r\n        <!-- 用户信息 -->\r\n        <view class=\"user-info\">\r\n            <view class=\"name\">{{ pageData.driverName }}</view>\r\n            <DriverStatusTag :status=\"pageData.status\" />\r\n        </view>\r\n        <!-- 内容区域 -->\r\n        <view class=\"content\">\r\n\r\n            <!-- 基础信息列表 -->\r\n            <view class=\"info-list\">\r\n                <view class=\"info-item\" v-for=\"(item, index) in infoList\" :key=\"index\">\r\n                    <text class=\"label\">{{ item.label }}</text>\r\n                    <text class=\"value\">{{ item.value }}</text>\r\n                </view>\r\n            </view>\r\n\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, computed } from 'vue';\r\nimport { apiGetDriverPlanById } from '@/api/apis.js'\r\nimport { onLoad } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\r\nimport DriverStatusTag from '@/components/DriverStatusTag/DriverStatusTag.vue'\r\nimport { formatWeight, formatNum } from '@/utils/orderUtils'\r\n\r\n// 页面参数\r\nconst planId = ref(''); // 车辆ID\r\nconst driverId = ref(''); // 司机ID\r\n\r\n// 页面数据\r\nconst pageData = ref({\r\n    // driverName: '', //司机名称\r\n    // status: null, //状态 0 进行中 1.已完成 2.无法收运 \r\n    // merchantName: '', //商家名称\r\n\r\n    // weight: 0.0, //重量\r\n    // bucketNum: 0, //桶数\r\n    // address: '', //地址 \r\n    // registrationNumber: '', //车牌号\r\n    // img: [], //照片数组\r\n    // time: '', // 收运时间\r\n    // estimateTime: '' // 预估时间\r\n});\r\n\r\n\r\n// 信息列表配置\r\nconst infoList = computed(() => [\r\n    {\r\n        label: '商家名称:',\r\n        value: pageData.value.merchantName ?? '暂无'\r\n    },\r\n    {\r\n        label: '预估时间:',\r\n        value: pageData.value.appointmentTime ?? '暂无',\r\n    },\r\n    {\r\n        label: '收运时间:',\r\n        value: pageData.value.arrivalTime ?? '暂无',\r\n    },\r\n    {\r\n        label: '预估重量:',\r\n        value: formatWeight(pageData.value.estimateWeight)\r\n    },\r\n    {\r\n        label: '收运重量:',\r\n        value: formatWeight(pageData.value.weight)\r\n    },\r\n    {\r\n        label: '预估桶数:',\r\n        value: formatNum(pageData.value.estimateBucketNum)\r\n    },\r\n    {\r\n        label: '收运桶数:',\r\n        value: formatNum(pageData.value.bucketNum)\r\n    },\r\n    {\r\n        label: '收运地址:',\r\n        value: pageData.value.address ?? '暂无',\r\n    },\r\n    {\r\n        label: '车牌号:',\r\n        value: pageData.value.registrationNumber ?? '暂无',\r\n    },\r\n    {\r\n        label: '其他说明:',\r\n        value: pageData.value.remark ?? '暂无',\r\n    }\r\n]);\r\n\r\nonLoad((options) => {\r\n    if (options.planId) planId.value = options.planId;\r\n    if (options.driverId) driverId.value = options.driverId;\r\n\r\n    console.log('接收到的参数:', options);\r\n});\r\n\r\n// 页面逻辑\r\nonMounted(() => {\r\n    // 获取收运记录详情\r\n    getSyCheckDetail()\r\n})\r\n\r\n\r\n\r\n//获取收运记录详情\r\nconst getSyCheckDetail = async () => {\r\n    const res = await apiGetDriverPlanById({\r\n        driverId: driverId.value,\r\n        id: planId.value\r\n\r\n    })\r\n\r\n    if (res.code === 200) {\r\n        const data = res.data;\r\n\r\n        // 统一更新pageData\r\n        pageData.value = {\r\n            driverName: data.driverName,\r\n            status: data.status,\r\n            merchantName: data.merchantName,\r\n            estimateWeight: data.estimateWeight || 0.0,\r\n            weight: data.weight || 0.0,\r\n            estimateBucketNum: data.estimateBucketNum || 0,\r\n            bucketNum: data.bucketNum || 0,\r\n            registrationNumber: data.registrationNumber,\r\n            appointmentTime: data.appointmentTime,\r\n            arrivalTime: data.arrivalTime,\r\n            address: data.address,\r\n            remark: data.remark,\r\n        };\r\n    }\r\n}\r\n// 返回上一页\r\nconst back = () => {\r\n    uni.navigateBack()\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n    min-height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: $bg-theme-color;\r\n    padding: 0 30rpx;\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 30rpx;\r\n    background-color: #ffffff;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n    margin-top: 20rpx;\r\n    border-radius: 16rpx;\r\n\r\n    .name {\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        color: #333333;\r\n    }\r\n\r\n}\r\n\r\n.content {\r\n    padding: 32rpx 0;\r\n    position: relative;\r\n    background-color: #ffffff;\r\n    border-radius: 16rpx;\r\n    margin-top: 20rpx;\r\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n    .info-list {\r\n        padding: 0 30rpx;\r\n        margin-bottom: 40rpx;\r\n\r\n        .info-item {\r\n            display: block;\r\n            margin-bottom: 30rpx;\r\n            border-bottom: 1rpx solid #f0f0f0;\r\n\r\n            &:last-child {\r\n                border-bottom: none;\r\n                margin-bottom: 0;\r\n                padding-bottom: 0;\r\n            }\r\n\r\n            .label {\r\n                display: block;\r\n                font-size: 14px;\r\n                color: #999999;\r\n                margin-bottom: 20rpx;\r\n            }\r\n\r\n            .value {\r\n                display: block;\r\n                font-size: 14px;\r\n                color: #333333;\r\n                line-height: 1.4;\r\n                margin-bottom: 5rpx;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/collection/syCheckDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","formatWeight","formatNum","onLoad","uni","onMounted","apiGetDriverPlanById"],"mappings":";;;;;;;;;;;;AA+BA,MAAM,kBAAkB,MAAW;;;;AAInC,UAAM,SAASA,cAAAA,IAAI,EAAE;AACrB,UAAM,WAAWA,cAAAA,IAAI,EAAE;AAGvB,UAAM,WAAWA,cAAAA,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAYrB,CAAC;AAID,UAAM,WAAWC,cAAQ,SAAC,MAAM;AAAA,MAC5B;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,gBAAgB;AAAA,MACzC;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,mBAAmB;AAAA,MAC5C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,eAAe;AAAA,MACxC;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOC,iBAAY,aAAC,SAAS,MAAM,cAAc;AAAA,MACpD;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOA,iBAAY,aAAC,SAAS,MAAM,MAAM;AAAA,MAC5C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOC,iBAAS,UAAC,SAAS,MAAM,iBAAiB;AAAA,MACpD;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAOA,iBAAS,UAAC,SAAS,MAAM,SAAS;AAAA,MAC5C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,WAAW;AAAA,MACpC;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,sBAAsB;AAAA,MAC/C;AAAA,MACD;AAAA,QACI,OAAO;AAAA,QACP,OAAO,SAAS,MAAM,UAAU;AAAA,MACnC;AAAA,IACL,CAAC;AAEDC,kBAAM,OAAC,CAAC,YAAY;AAChB,UAAI,QAAQ;AAAQ,eAAO,QAAQ,QAAQ;AAC3C,UAAI,QAAQ;AAAU,iBAAS,QAAQ,QAAQ;AAE/CC,oBAAY,MAAA,MAAA,OAAA,6CAAA,WAAW,OAAO;AAAA,IAClC,CAAC;AAGDC,kBAAAA,UAAU,MAAM;AAEZ,uBAAkB;AAAA,IACtB,CAAC;AAKD,UAAM,mBAAmB,YAAY;AACjC,YAAM,MAAM,MAAMC,8BAAqB;AAAA,QACnC,UAAU,SAAS;AAAA,QACnB,IAAI,OAAO;AAAA,MAEnB,CAAK;AAED,UAAI,IAAI,SAAS,KAAK;AAClB,cAAM,OAAO,IAAI;AAGjB,iBAAS,QAAQ;AAAA,UACb,YAAY,KAAK;AAAA,UACjB,QAAQ,KAAK;AAAA,UACb,cAAc,KAAK;AAAA,UACnB,gBAAgB,KAAK,kBAAkB;AAAA,UACvC,QAAQ,KAAK,UAAU;AAAA,UACvB,mBAAmB,KAAK,qBAAqB;AAAA,UAC7C,WAAW,KAAK,aAAa;AAAA,UAC7B,oBAAoB,KAAK;AAAA,UACzB,iBAAiB,KAAK;AAAA,UACtB,aAAa,KAAK;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,QACzB;AAAA,MACK;AAAA,IACL;AAEA,UAAM,OAAO,MAAM;AACfF,oBAAAA,MAAI,aAAc;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/IA,GAAG,WAAW,eAAe;"}