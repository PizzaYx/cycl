{"version":3,"file":"syReport.js","sources":["pages/collection/syReport.vue","pages/collection/syReport.vue?type=page"],"sourcesContent":["<!-- 收运上报 -->\n<template>\n    <view class=\"container\">\n        <PageHeader title=\"收运上报\" @back=\"back\" />\n        <!-- 添加商店信息和扫码区域 -->\n        <view class=\"store-info\">\n            <view class=\"store-name\">商店名称: {{ merchantName }}</view>\n            <view class=\"bin-info\">\n                <text>已收垃圾桶: <text class=\"bin-count\">{{ ljNum ?? 0 }}</text> 个</text>\n                <!-- <uni-icons type=\"scan\" size=\"30\" color=\"#07C160\" class=\"scan-icon\" @click=\"handleScan\" /> -->\n            </view>\n        </view>\n        <scroll-view class=\"content\" scroll-y>\n            <view class=\"record-list\">\n                <!-- 自动刷新提示区域 -->\n                <view v-if=\"isAutoRefreshing\" class=\"auto-refresh-tip\">\n                    <view v-if=\"records.length === 0\" class=\"tip-text\">\n                        正在自动获取称重数据...\n                    </view>\n                    <view v-else class=\"tip-text\">\n                        已获取 {{ records.length }} 条称重数据，系统继续等待更多称重数据，全部称重完成后请点击收运完成按钮\n                    </view>\n                </view>\n\n                <!-- 自动刷新超时提示区域 -->\n                <view v-if=\"isAutoRefreshTimeout\" class=\"timeout-tip\">\n                    <view class=\"tip-text\">\n                        自动获取称重数据已超时，请手动点击刷新按钮获取最新数据\n                    </view>\n                </view>\n\n\n                <!-- 有数据时显示记录列表 -->\n                <view v-for=\"(item, index) in records\" :key=\"index\" class=\"record-item\">\n                    <view class=\"record-header\">\n                        <text class=\"bucket-number\">桶 {{ index + 1 }} 重量: </text>\n                        <view class=\"weight-display\">\n                            <text class=\"weight-value\">{{ item.weight }}</text>\n                            <text class=\"weight-unit\"> kg</text>\n                        </view>\n                    </view>\n                </view>\n\n            </view>\n        </scroll-view>\n\n        <!-- 固定底部按钮 -->\n        <view class=\"bottom-button\">\n            <button class=\"btn-complete\" :class=\"{ 'btn-loading': isSubmitting }\" :disabled=\"isSubmitting\"\n                @click=\"getSyCheckDetail\">\n                <text v-if=\"isSubmitting\">提交中...</text>\n                <text v-else>收运完成</text>\n            </button>\n        </view>\n    </view>\n</template>\n\n<script setup>\n// @ts-nocheck\nimport { ref } from 'vue';\nimport { onLoad, onUnload } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\nimport { uploadUrl, createUploadHeaders } from '@/utils/config.js';\nimport { apiPostreportWeight, apiGetDriverPlanById, apiGetdriverConfirmPlan, apiGetBackfillBuckeWeight, apiGetPlanBuckeWeight } from '@/api/apis.js'\nimport { useUserStore } from '@/stores/user.js'\nimport uniFilePicker from '@/uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue'\nimport PageHeader from '@/components/PageHeader/PageHeader.vue'\n\n// 返回上一页\nconst back = () => {\n    // 返回前发送事件通知sfDetails页面刷新\n    uni.$emit('refreshSfDetails');\n    uni.navigateBack();\n};\n\n// 开始自动刷新\nconst startAutoRefresh = () => {\n    if (isAutoRefreshing.value) return; // 防止重复启动\n\n    isAutoRefreshing.value = true;\n    autoRefreshCount.value = 0;\n    isAutoRefreshTimeout.value = false;\n\n    // 设置超时定时器\n    autoRefreshTimeout.value = setTimeout(() => {\n        if (isAutoRefreshing.value && records.value.length === 0) {\n            isAutoRefreshTimeout.value = true;\n            stopAutoRefresh();\n        }\n    }, maxAutoRefreshTime);\n\n    autoRefreshTimer.value = setInterval(async () => {\n        autoRefreshCount.value++;\n\n        // 调用刷新\n        await handleRefresh();\n\n    }, refreshInterval);\n};\n\n// 停止自动刷新\nconst stopAutoRefresh = () => {\n    isAutoRefreshing.value = false;\n    if (autoRefreshTimer.value) {\n        clearInterval(autoRefreshTimer.value);\n        autoRefreshTimer.value = null;\n    }\n    if (autoRefreshTimeout.value) {\n        clearTimeout(autoRefreshTimeout.value);\n        autoRefreshTimeout.value = null;\n    }\n};\n\n// 刷新按钮处理\nconst handleRefresh = async () => {\n    try {\n        // 调用 apiGetBackfillBuckeWeight 获取回填重量\n        const weightRes = await apiGetBackfillBuckeWeight({\n            id: planId.value,           // 收运单ID\n            merchantId: merchantId.value, // 商户ID\n            driverId: driverId.value,   // 司机ID\n            registrationNumber: registrationNumber.value // 车牌号\n        });\n\n        if (weightRes.code === 200) {\n            console.log('刷新获取的重量信息:', weightRes.data);\n\n            // 获取当前已存在的 thirdpartyId 列表，用于去重\n            const existingThirdpartyIds = new Set(\n                submitData.value.map(item => item.thirdpartyId)\n            );\n\n            // 处理新的重量数据\n            if (weightRes.data && (Array.isArray(weightRes.data) ? weightRes.data.length > 0 : true)) {\n                const newWeightData = Array.isArray(weightRes.data) ? weightRes.data : [weightRes.data];\n\n                // 过滤出新的数据（去重）\n                const newData = newWeightData.filter(weightItem =>\n                    !existingThirdpartyIds.has(weightItem.id)\n                );\n\n                if (newData.length > 0) {\n                    // 只添加新数据，不清空现有数据\n                    addNewRecordsFromWeightData(newData);\n                }\n            }\n        }\n    } catch (error) {\n        console.error('刷新重量数据异常:', error);\n    }\n};\n\nconst ljNum = ref(0); // 垃圾桶数量\n\n// 自动刷新相关状态\nconst isAutoRefreshing = ref(false); // 是否正在自动刷新\nconst autoRefreshTimer = ref(null); // 自动刷新定时器\nconst autoRefreshCount = ref(0); // 自动刷新次数\nconst maxAutoRefreshTime = 900000; // 最大自动刷新时间（15分钟）\nconst maxAutoRefreshCount = Infinity; // 无限次重试\nconst refreshInterval = 5000; // 刷新间隔（5秒）\nconst autoRefreshTimeout = ref(null); // 超时定时器\nconst isAutoRefreshTimeout = ref(false); // 是否自动刷新超时\n\n// 新增接收页面参数的变量\nconst carId = ref(''); // 车辆ID\nconst driverId = ref(''); // 司机ID\nconst merchantId = ref(''); // 商户ID\nconst planId = ref(''); // 收运单ID\nconst merchantName = ref('')//商家名称\nconst registrationNumber = ref('')//车牌号\n\nconst userStore = useUserStore()\nconst records = ref([]);\n// 新增提交数据存储\nconst submitData = ref([]);\n\n// 添加按钮状态管理\nconst isSubmitting = ref(false); // 是否正在提交\n\n// 页面加载时获取传入的参数\nonLoad(async (options) => {\n    if (options.carId) carId.value = options.carId;\n    if (options.driverId) driverId.value = options.driverId;\n    if (options.merchantId) merchantId.value = options.merchantId;\n    if (options.planId) planId.value = options.planId;\n    if (options.merchantName) merchantName.value = options.merchantName;\n    registrationNumber.value = userStore.sfmerchant?.registrationNumber;\n    // if (options.registrationNumber) registrationNumber.value = options.registrationNumber;\n    console.log('接收到的参数:', options);\n\n    // 页面进入就开始自动刷新获取数据\n    startAutoRefresh();\n});\n\n// 页面卸载时清理定时器\nonUnload(() => {\n    stopAutoRefresh();\n});\n\n// 收运完成\nconst getSyCheckDetail = () => {\n    // 防止重复点击\n    if (isSubmitting.value) {\n        return;\n    }\n\n    // 检查提交数据是否为空\n    if (!submitData.value || submitData.value.length === 0) {\n        uni.showToast({\n            title: '没有收运数据，请先进行扫码上报操作',\n            icon: 'none'\n        });\n        return;\n    }\n\n    // 确认收运完成\n    uni.showModal({\n        title: '确认收运完成',\n        content: '是否确认收运完成？',\n        success: async (res) => {\n            if (res.confirm) {\n                // 设置提交状态，防止重复点击\n                isSubmitting.value = true;\n\n                // 停止自动刷新（在确认后停止）\n                stopAutoRefresh();\n\n                try {\n                    const confirmRes = await apiPostreportWeight(submitData.value);\n\n                    if (confirmRes.code === 200) {\n                        uni.showToast({\n                            title: confirmRes.msg || '操作成功',\n                            icon: 'success'\n                        });\n\n\n                        // 返回上一页\n                        setTimeout(() => {\n                            back();\n                        }, 500);\n                    } else {\n                        uni.showToast({\n                            title: confirmRes.msg || '操作失败',\n                            icon: 'error'\n                        });\n                        // 操作失败时重置提交状态\n                        isSubmitting.value = false;\n                    }\n                } catch (error) {\n                    console.error('确认收运异常:', error);\n                    uni.showToast({\n                        title: '操作异常',\n                        icon: 'none'\n                    });\n                    // 异常时重置提交状态\n                    isSubmitting.value = false;\n                }\n            }\n        }\n    });\n};\n\n\n\n// 添加新的重量数据记录（用于自动刷新时的增量添加）\nconst addNewRecordsFromWeightData = (newWeightData) => {\n    newWeightData.forEach((weightItem, index) => {\n        // 添加显示记录\n        records.value.push({\n            binCount: 1, // 默认垃圾桶数量为1\n            weight: weightItem.weight || '', // 使用回填的重量数据\n            images: [],\n            isConfirmed: false, // 新添加的记录标记为未确认\n            bucketCode: '', // 桶编码，自动刷新时可能没有桶信息\n            bucketType: '', // 桶类型\n            bucketName: '', // 桶名称\n            id: `temp_${Date.now()}_${index}` // 临时ID\n        });\n\n        // 添加提交数据\n        submitData.value.push({\n            thirdpartyId: weightItem.id, // 第三方垃圾桶称重记录id\n            bucketCode: '', // 桶编码\n            weight: parseFloat(weightItem.weight || 0), // 垃圾重量改为小数类型\n            carId: carId.value, // 车辆ID\n            driverId: driverId.value, // 司机ID\n            merchantId: merchantId.value, // 商户ID\n            planId: planId.value, // 收运单ID\n        });\n\n        ljNum.value++;\n    });\n\n    console.log('新增记录数据:', newWeightData);\n    console.log('当前提交数据:', submitData.value);\n};\n\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: $bg-theme-color;\n}\n\n// 添加商店信息样式\n.store-info {\n    padding: 32rpx;\n    background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);\n    margin: 20rpx;\n    border-radius: 24rpx;\n    box-shadow: 0 6rpx 24rpx rgba(0, 0, 0, 0.08);\n    border: 1px solid rgba(7, 193, 96, 0.1);\n\n    .store-name {\n        font-size: 32rpx;\n        font-weight: 600;\n        color: #333333;\n        margin-bottom: 20rpx;\n    }\n\n    .bin-info {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 28rpx;\n        color: #666666;\n        background: rgba(7, 193, 96, 0.05);\n        padding: 16rpx 20rpx;\n        border-radius: 16rpx;\n        border: 1px solid rgba(7, 193, 96, 0.1);\n\n        .bin-count {\n            font-size: 36rpx;\n            font-weight: bold;\n            color: #07C160;\n            display: inline;\n            vertical-align: -1rpx;\n            line-height: 1;\n        }\n\n        .scan-icon {\n            cursor: pointer;\n            padding: 8rpx;\n            border-radius: 50%;\n            background: rgba(7, 193, 96, 0.1);\n            transition: all 0.3s ease;\n\n            &:hover {\n                background: rgba(7, 193, 96, 0.2);\n                transform: scale(1.1);\n            }\n        }\n    }\n}\n\n.content {\n    flex: 1;\n    overflow: auto;\n    padding-bottom: 120rpx; // 为底部按钮留出空间\n\n    .record-list {\n        padding: 24rpx;\n\n        .auto-refresh-tip {\n            background: linear-gradient(135deg, #E8F5E8 0%, #F0F9F0 100%);\n            border-radius: 16rpx;\n            padding: 24rpx;\n            margin-bottom: 20rpx;\n            border: 1px solid rgba(7, 193, 96, 0.2);\n            box-shadow: 0 4rpx 12rpx rgba(7, 193, 96, 0.1);\n\n            .tip-text {\n                font-size: 28rpx;\n                color: #07C160;\n                text-align: center;\n                font-weight: 500;\n                line-height: 1.5;\n            }\n        }\n\n        .timeout-tip {\n            background: linear-gradient(135deg, #FFF2E8 0%, #FFF7F0 100%);\n            border-radius: 16rpx;\n            padding: 24rpx;\n            margin-bottom: 20rpx;\n            border: 1px solid rgba(255, 152, 0, 0.3);\n            box-shadow: 0 4rpx 12rpx rgba(255, 152, 0, 0.1);\n\n            .tip-text {\n                font-size: 28rpx;\n                color: #FF9800;\n                text-align: center;\n                font-weight: 500;\n                line-height: 1.5;\n            }\n        }\n\n\n        .record-item {\n            background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);\n            border-radius: 20rpx;\n            padding: 32rpx;\n            margin-bottom: 20rpx;\n            box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n            border: 1px solid rgba(7, 193, 96, 0.1);\n            transition: all 0.3s ease;\n\n            &:hover {\n                transform: translateY(-2rpx);\n                box-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.12);\n            }\n\n            .record-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 12rpx;\n                height: 35rpx;\n\n                .bucket-number {\n                    font-size: 28rpx;\n                    font-weight: 600;\n                    color: #333333;\n                    line-height: 35rpx;\n                    margin-top: 10rpx;\n                }\n\n                .weight-display {\n                    display: flex;\n                    align-items: center;\n                    margin-top: 10rpx;\n\n                    .weight-value {\n                        font-size: 36rpx;\n                        color: #07C160;\n                        font-weight: 700;\n                        line-height: 35rpx;\n                    }\n\n                    .weight-unit {\n                        font-size: 24rpx;\n                        color: #666666;\n                        margin-left: 8rpx;\n                        line-height: 35rpx;\n                    }\n                }\n            }\n\n            .record-details {\n                .detail-item {\n                    display: flex;\n                    align-items: center;\n                    margin-bottom: 12rpx;\n\n                    &:last-child {\n                        margin-bottom: 0;\n                    }\n\n                    .detail-label {\n                        font-size: 26rpx;\n                        color: #666666;\n                        min-width: 120rpx;\n                    }\n\n                    .detail-value {\n                        font-size: 26rpx;\n                        color: #333333;\n                        font-weight: 500;\n                        flex: 1;\n                    }\n                }\n            }\n        }\n\n\n        .record-card {\n            background-color: #FFFFFF;\n            border-radius: 16rpx;\n            padding: 32rpx;\n            margin-bottom: 24rpx;\n\n            .input-group {\n                margin-bottom: 32rpx;\n\n                .input-item {\n                    margin-bottom: 24rpx;\n\n                    &:last-child {\n                        margin-bottom: 0;\n                    }\n\n                    .label {\n                        display: block;\n                        font-size: 14px;\n                        color: #333333;\n                        margin-bottom: 16rpx;\n\n                        .required {\n                            color: #FF4D4F;\n                            margin-right: 8rpx;\n                        }\n                    }\n\n                    .input {\n                        height: 88rpx;\n                        background-color: #F5F5F5;\n                        border-radius: 8rpx;\n                        padding: 0 24rpx;\n                        font-size: 14px;\n                    }\n\n                    // 重量输入容器样式\n                    .weight-input-container {\n                        display: flex;\n                        align-items: center;\n                        gap: 16rpx;\n\n                        .input {\n                            flex: 1;\n                        }\n\n                        .get-weight-btn {\n                            width: 120rpx;\n                            height: 54rpx;\n                            background-color: #07C160;\n                            color: #FFFFFF;\n                            border: none;\n                            border-radius: 32rpx;\n                            font-size: 24rpx;\n                            font-weight: 500;\n                            line-height: 54rpx;\n                            text-align: center;\n                            white-space: nowrap;\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n\n                            &:active {\n                                background-color: #06AD56;\n                            }\n\n                            &[disabled] {\n                                background-color: #CCCCCC;\n                                color: #fff;\n                            }\n                        }\n                    }\n\n                    // 下划线样式输入框\n                    .underline-input {\n                        height: 88rpx;\n                        background-color: transparent;\n                        border: none;\n                        border-bottom: 1px solid #e0e0e0;\n                        border-radius: 0;\n                        padding: 0 8rpx;\n                        font-size: 14px;\n                        box-shadow: none;\n\n                        &:focus {\n                            outline: none;\n                            border-bottom: 1px solid #07C160;\n                        }\n\n                        // 只读状态样式\n                        &[disabled] {\n                            background-color: #f5f5f5;\n                            color: #999;\n                            -webkit-text-fill-color: #999; // 防止iOS设备上disabled文字变淡\n                            opacity: 1; // 防止某些浏览器中disabled元素透明度变化\n                        }\n\n                        &.readonly-input {\n                            background-color: #f5f5f5;\n                            color: #999;\n                        }\n                    }\n                }\n            }\n\n            .upload-section {\n                margin-bottom: 32rpx;\n\n                .label {\n                    display: block;\n                    font-size: 14px;\n                    color: #333333;\n                    margin-bottom: 16rpx;\n\n                    .required {\n                        color: #FF4D4F;\n                        margin-right: 8rpx;\n                    }\n                }\n\n                .upload-area {\n                    margin-top: 16rpx;\n\n                    .test-upload-btn {\n                        width: 200rpx;\n                        height: 60rpx;\n                        background-color: #07C160;\n                        color: #FFFFFF;\n                        border: none;\n                        border-radius: 8rpx;\n                        font-size: 28rpx;\n                        margin-bottom: 16rpx;\n                    }\n\n                    .upload-tip {\n                        font-size: 24rpx;\n                        color: #999999;\n                        line-height: 1.5;\n                        margin-top: 16rpx;\n                    }\n                }\n            }\n\n        }\n    }\n}\n\n// 底部固定按钮样式\n.bottom-button {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, #FFFFFF 100%);\n    padding: 24rpx 32rpx 40rpx;\n    border-top: 1px solid rgba(7, 193, 96, 0.1);\n    z-index: 999;\n    backdrop-filter: blur(10rpx);\n\n    .btn-complete {\n        width: 100%;\n        height: 96rpx;\n        background: linear-gradient(135deg, #07C160 0%, #06AD56 100%);\n        color: #FFFFFF;\n        border: none;\n        border-radius: 48rpx;\n        font-size: 32rpx;\n        font-weight: 600;\n        line-height: 96rpx;\n        text-align: center;\n        box-shadow: 0 8rpx 24rpx rgba(7, 193, 96, 0.3);\n        transition: all 0.3s ease;\n        position: relative;\n        overflow: hidden;\n\n\n        &:hover {\n            transform: translateY(-2rpx);\n            box-shadow: 0 12rpx 32rpx rgba(7, 193, 96, 0.4);\n        }\n\n        &:active {\n            transform: translateY(0);\n            background: linear-gradient(135deg, #06AD56 0%, #059B4A 100%);\n        }\n\n        // 禁用状态样式\n        &[disabled] {\n            background: linear-gradient(135deg, #CCCCCC 0%, #BBBBBB 100%);\n            color: #FFFFFF;\n            cursor: not-allowed;\n            transform: none;\n            box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n\n            &:hover {\n                transform: none;\n                box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n            }\n        }\n\n        // loading状态样式\n        &.btn-loading {\n            background: linear-gradient(135deg, #CCCCCC 0%, #BBBBBB 100%);\n            cursor: not-allowed;\n\n            &:hover {\n                transform: none;\n                box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n            }\n        }\n\n        &::after {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n            transition: left 0.5s;\n        }\n\n        &:hover::after {\n            left: 100%;\n        }\n\n        // 禁用状态时不显示光效\n        &[disabled]::after,\n        &.btn-loading::after {\n            display: none;\n        }\n    }\n}\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/collection/syReport.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","apiGetBackfillBuckeWeight","ref","useUserStore","onLoad","onUnload","apiPostreportWeight"],"mappings":";;;;;;;AAiEA,MAAM,aAAa,MAAW;AA4F9B,MAAM,qBAAqB;AAE3B,MAAM,kBAAkB;;;;AA3FxB,UAAM,OAAO,MAAM;AAEfA,0BAAI,MAAM,kBAAkB;AAC5BA,oBAAG,MAAC,aAAY;AAAA,IACpB;AAGA,UAAM,mBAAmB,MAAM;AAC3B,UAAI,iBAAiB;AAAO;AAE5B,uBAAiB,QAAQ;AACzB,uBAAiB,QAAQ;AACzB,2BAAqB,QAAQ;AAG7B,yBAAmB,QAAQ,WAAW,MAAM;AACxC,YAAI,iBAAiB,SAAS,QAAQ,MAAM,WAAW,GAAG;AACtD,+BAAqB,QAAQ;AAC7B;QACH;AAAA,MACJ,GAAE,kBAAkB;AAErB,uBAAiB,QAAQ,YAAY,YAAY;AAC7C,yBAAiB;AAGjB,cAAM,cAAa;AAAA,MAEtB,GAAE,eAAe;AAAA,IACtB;AAGA,UAAM,kBAAkB,MAAM;AAC1B,uBAAiB,QAAQ;AACzB,UAAI,iBAAiB,OAAO;AACxB,sBAAc,iBAAiB,KAAK;AACpC,yBAAiB,QAAQ;AAAA,MAC5B;AACD,UAAI,mBAAmB,OAAO;AAC1B,qBAAa,mBAAmB,KAAK;AACrC,2BAAmB,QAAQ;AAAA,MAC9B;AAAA,IACL;AAGA,UAAM,gBAAgB,YAAY;AAC9B,UAAI;AAEA,cAAM,YAAY,MAAMC,mCAA0B;AAAA,UAC9C,IAAI,OAAO;AAAA;AAAA,UACX,YAAY,WAAW;AAAA;AAAA,UACvB,UAAU,SAAS;AAAA;AAAA,UACnB,oBAAoB,mBAAmB;AAAA;AAAA,QACnD,CAAS;AAED,YAAI,UAAU,SAAS,KAAK;AACxBD,mFAAY,cAAc,UAAU,IAAI;AAGxC,gBAAM,wBAAwB,IAAI;AAAA,YAC9B,WAAW,MAAM,IAAI,UAAQ,KAAK,YAAY;AAAA,UAC9D;AAGY,cAAI,UAAU,SAAS,MAAM,QAAQ,UAAU,IAAI,IAAI,UAAU,KAAK,SAAS,IAAI,OAAO;AACtF,kBAAM,gBAAgB,MAAM,QAAQ,UAAU,IAAI,IAAI,UAAU,OAAO,CAAC,UAAU,IAAI;AAGtF,kBAAM,UAAU,cAAc;AAAA,cAAO,gBACjC,CAAC,sBAAsB,IAAI,WAAW,EAAE;AAAA,YAC5D;AAEgB,gBAAI,QAAQ,SAAS,GAAG;AAEpB,0CAA4B,OAAO;AAAA,YACtC;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ,SAAQ,OAAO;AACZA,sBAAc,MAAA,MAAA,SAAA,wCAAA,aAAa,KAAK;AAAA,MACnC;AAAA,IACL;AAEA,UAAM,QAAQE,cAAAA,IAAI,CAAC;AAGnB,UAAM,mBAAmBA,cAAAA,IAAI,KAAK;AAClC,UAAM,mBAAmBA,cAAAA,IAAI,IAAI;AACjC,UAAM,mBAAmBA,cAAAA,IAAI,CAAC;AAI9B,UAAM,qBAAqBA,cAAAA,IAAI,IAAI;AACnC,UAAM,uBAAuBA,cAAAA,IAAI,KAAK;AAGtC,UAAM,QAAQA,cAAAA,IAAI,EAAE;AACpB,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,aAAaA,cAAAA,IAAI,EAAE;AACzB,UAAM,SAASA,cAAAA,IAAI,EAAE;AACrB,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,qBAAqBA,cAAG,IAAC,EAAE;AAEjC,UAAM,YAAYC,YAAAA,aAAc;AAChC,UAAM,UAAUD,cAAAA,IAAI,CAAA,CAAE;AAEtB,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AAGzB,UAAM,eAAeA,cAAAA,IAAI,KAAK;AAG9BE,kBAAM,OAAC,OAAO,YAAY;;AACtB,UAAI,QAAQ;AAAO,cAAM,QAAQ,QAAQ;AACzC,UAAI,QAAQ;AAAU,iBAAS,QAAQ,QAAQ;AAC/C,UAAI,QAAQ;AAAY,mBAAW,QAAQ,QAAQ;AACnD,UAAI,QAAQ;AAAQ,eAAO,QAAQ,QAAQ;AAC3C,UAAI,QAAQ;AAAc,qBAAa,QAAQ,QAAQ;AACvD,yBAAmB,SAAQ,eAAU,eAAV,mBAAsB;AAEjDJ,oBAAA,MAAA,MAAA,OAAA,wCAAY,WAAW,OAAO;AAG9B;IACJ,CAAC;AAGDK,kBAAAA,SAAS,MAAM;AACX;IACJ,CAAC;AAGD,UAAM,mBAAmB,MAAM;AAE3B,UAAI,aAAa,OAAO;AACpB;AAAA,MACH;AAGD,UAAI,CAAC,WAAW,SAAS,WAAW,MAAM,WAAW,GAAG;AACpDL,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAClB,CAAS;AACD;AAAA,MACH;AAGDA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AAEb,yBAAa,QAAQ;AAGrB;AAEA,gBAAI;AACA,oBAAM,aAAa,MAAMM,SAAAA,oBAAoB,WAAW,KAAK;AAE7D,kBAAI,WAAW,SAAS,KAAK;AACzBN,8BAAAA,MAAI,UAAU;AAAA,kBACV,OAAO,WAAW,OAAO;AAAA,kBACzB,MAAM;AAAA,gBAClC,CAAyB;AAID,2BAAW,MAAM;AACb;gBACH,GAAE,GAAG;AAAA,cAC9B,OAA2B;AACHA,8BAAAA,MAAI,UAAU;AAAA,kBACV,OAAO,WAAW,OAAO;AAAA,kBACzB,MAAM;AAAA,gBAClC,CAAyB;AAED,6BAAa,QAAQ;AAAA,cACxB;AAAA,YACJ,SAAQ,OAAO;AACZA,4BAAA,MAAA,MAAA,SAAA,wCAAc,WAAW,KAAK;AAC9BA,4BAAAA,MAAI,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,MAAM;AAAA,cAC9B,CAAqB;AAED,2BAAa,QAAQ;AAAA,YACxB;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AAKA,UAAM,8BAA8B,CAAC,kBAAkB;AACnD,oBAAc,QAAQ,CAAC,YAAY,UAAU;AAEzC,gBAAQ,MAAM,KAAK;AAAA,UACf,UAAU;AAAA;AAAA,UACV,QAAQ,WAAW,UAAU;AAAA;AAAA,UAC7B,QAAQ,CAAE;AAAA,UACV,aAAa;AAAA;AAAA,UACb,YAAY;AAAA;AAAA,UACZ,YAAY;AAAA;AAAA,UACZ,YAAY;AAAA;AAAA,UACZ,IAAI,QAAQ,KAAK,IAAG,CAAE,IAAI,KAAK;AAAA;AAAA,QAC3C,CAAS;AAGD,mBAAW,MAAM,KAAK;AAAA,UAClB,cAAc,WAAW;AAAA;AAAA,UACzB,YAAY;AAAA;AAAA,UACZ,QAAQ,WAAW,WAAW,UAAU,CAAC;AAAA;AAAA,UACzC,OAAO,MAAM;AAAA;AAAA,UACb,UAAU,SAAS;AAAA;AAAA,UACnB,YAAY,WAAW;AAAA;AAAA,UACvB,QAAQ,OAAO;AAAA;AAAA,QAC3B,CAAS;AAED,cAAM;AAAA,MACd,CAAK;AAEDA,oBAAA,MAAA,MAAA,OAAA,wCAAY,WAAW,aAAa;AACpCA,oBAAA,MAAA,MAAA,OAAA,wCAAY,WAAW,WAAW,KAAK;AAAA,IAC3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvSA,GAAG,WAAW,eAAe;"}