{"version":3,"file":"syReport.js","sources":["pages/collection/syReport.vue","pages/collection/syReport.vue?type=page"],"sourcesContent":["<!-- 收运上报 -->\n<template>\n    <view class=\"container\">\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"收运上报\"\n            @clickLeft=\"back\" />\n        <!-- 添加商店信息和扫码区域 -->\n        <view class=\"store-info\">\n            <view class=\"store-name\">商店名称: {{ merchantName }}</view>\n            <view class=\"bin-info\">\n                <text>垃圾桶: <text class=\"bin-count\">{{ ljNum ?? 0 }}</text> 个</text>\n                <uni-icons type=\"scan\" size=\"30\" color=\"#07C160\" class=\"scan-icon\" @click=\"handleScan\" />\n            </view>\n        </view>\n        <scroll-view class=\"content\" scroll-y>\n            <view class=\"record-list\">\n                <!-- 当没有数据时显示提示 -->\n                <view v-if=\"records.length === 0\" class=\"empty-tip\">\n                    <text>请点击扫码按钮获取数据</text>\n                </view>\n\n                <!-- 有数据时显示记录列表 -->\n                <view v-for=\"(item, index) in records\" :key=\"index\" class=\"record-item\">\n                    <view class=\"record-header\">\n                        <text class=\"bucket-number\">桶 {{ index + 1 }} 重量: </text>\n                        <view class=\"weight-display\">\n                            <text class=\"weight-value\">{{ item.weight }}</text>\n                            <text class=\"weight-unit\"> kg</text>\n                        </view>\n                    </view>\n                </view>\n\n                <!-- 刷新按钮 -->\n                <view v-if=\"showRefreshButton\" class=\"refresh-button\" @click=\"handleRefresh\">\n                    <uni-icons type=\"reload\" size=\"45\" color=\"#07C160\"></uni-icons>\n                </view>\n            </view>\n        </scroll-view>\n\n        <!-- 固定底部按钮 -->\n        <view class=\"bottom-button\">\n            <button class=\"btn-complete\" @click=\"getSyCheckDetail\">收运完成</button>\n        </view>\n    </view>\n</template>\n\n<script setup>\n// @ts-nocheck\nimport { ref } from 'vue';\nimport { onLoad, onUnload } from '@dcloudio/uni-app'; // 正确导入onLoad生命周期\nimport { uploadUrl, createUploadHeaders } from '@/utils/config.js';\nimport { apiPostreportWeight, apiGetDriverPlanById, apiGetdriverConfirmPlan, apiGetMerchantBucke, apiGetBackfillBuckeWeight, apiGetPlanBuckeWeight } from '@/api/apis.js'\nimport { useUserStore } from '@/stores/user.js'\nimport uniFilePicker from '@/uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.vue'\n\n// 返回上一页\nconst back = () => {\n    // 返回前发送事件通知sfDetails页面刷新\n    uni.$emit('refreshSfDetails');\n    uni.navigateBack();\n};\n\n// 刷新按钮处理\nconst handleRefresh = async () => {\n    try {\n        // 显示加载提示\n        uni.showLoading({\n            title: '刷新中...'\n        });\n\n        // 调用 apiGetBackfillBuckeWeight 获取回填重量\n        const weightRes = await apiGetBackfillBuckeWeight({\n            id: planId.value,           // 收运单ID\n            merchantId: merchantId.value, // 商户ID\n            driverId: driverId.value,   // 司机ID\n            registrationNumber: registrationNumber.value // 车牌号\n        });\n\n        if (weightRes.code === 200) {\n            console.log('刷新获取的重量信息:', weightRes.data);\n\n            // 清空当前记录\n            records.value = [];\n            submitData.value = [];\n            ljNum.value = 0;\n\n            // 重新添加记录\n            if (weightRes.data && (Array.isArray(weightRes.data) ? weightRes.data.length > 0 : true)) {\n                addRecordsFromBucketData([], weightRes.data);\n\n                uni.showToast({\n                    title: '刷新成功',\n                    icon: 'success'\n                });\n            } else {\n                uni.showToast({\n                    title: '暂无重量数据',\n                    icon: 'none'\n                });\n            }\n        } else {\n            uni.showToast({\n                title: weightRes.msg || '刷新失败',\n                icon: 'none'\n            });\n        }\n    } catch (error) {\n        console.error('刷新重量数据异常:', error);\n        uni.showToast({\n            title: '刷新异常',\n            icon: 'none'\n        });\n    } finally {\n        uni.hideLoading();\n    }\n};\n\nconst ljNum = ref(0); // 垃圾桶数量\nconst showRefreshButton = ref(false); // 控制刷新按钮显示\n\n// 新增接收页面参数的变量\nconst carId = ref(''); // 车辆ID\nconst driverId = ref(''); // 司机ID\nconst merchantId = ref(''); // 商户ID\nconst planId = ref(''); // 收运单ID\nconst merchantName = ref('')//商家名称\nconst registrationNumber = ref('')//车牌号\n\nconst userStore = useUserStore()\nconst records = ref([]);\n// 新增提交数据存储\nconst submitData = ref([]);\n\n// 页面加载时获取传入的参数\nonLoad(async (options) => {\n    if (options.carId) carId.value = options.carId;\n    if (options.driverId) driverId.value = options.driverId;\n    if (options.merchantId) merchantId.value = options.merchantId;\n    if (options.planId) planId.value = options.planId;\n    if (options.merchantName) merchantName.value = options.merchantName;\n    registrationNumber.value = userStore.sfmerchant?.registrationNumber;\n    // if (options.registrationNumber) registrationNumber.value = options.registrationNumber;\n    console.log('接收到的参数:', options);\n\n});\n\n// 收运完成\nconst getSyCheckDetail = () => {\n    // 检查提交数据是否为空\n    if (!submitData.value || submitData.value.length === 0) {\n        uni.showToast({\n            title: '没有收运数据，请先进行扫码上报操作',\n            icon: 'none'\n        });\n        return;\n    }\n\n    // 确认收运完成\n    uni.showModal({\n        title: '确认收运完成',\n        content: '是否确认收运完成？',\n        success: async (res) => {\n            if (res.confirm) {\n                try {\n                    const confirmRes = await apiPostreportWeight(submitData.value);\n\n                    if (confirmRes.code === 200) {\n                        uni.showToast({\n                            title: confirmRes.msg || '操作成功',\n                            icon: 'success'\n                        });\n                        // 返回上一页\n                        setTimeout(() => {\n                            back();\n                        }, 1500);\n                    } else {\n                        uni.showToast({\n                            title: confirmRes.msg || '操作失败',\n                            icon: 'error'\n                        });\n                    }\n                } catch (error) {\n                    console.error('确认收运异常:', error);\n                    uni.showToast({\n                        title: '操作异常',\n                        icon: 'none'\n                    });\n                }\n            }\n        }\n    });\n};\n\n// 验证扫码结果格式\nconst validateScanResult = (scanResult) => {\n    if (!scanResult || typeof scanResult !== 'string') {\n        return false;\n    }\n\n    // 检查是否包含下划线\n    if (!scanResult.includes('_')) {\n        return false;\n    }\n\n    // 检查是否可以用下划线分割成2段\n    const parts = scanResult.split('_');\n    if (parts.length !== 2) {\n        return false;\n    }\n\n    // 检查两段都不为空\n    if (!parts[0] || !parts[1]) {\n        return false;\n    }\n\n    // 可以添加更多验证规则，比如：\n    // - 第一段是否为数字（桶编号）\n    // - 第二段是否为时间格式（20250913145507）\n    const bucketId = parts[0];\n    const timestamp = parts[1];\n\n    // 验证桶编号是否为数字\n    if (!/^\\d+$/.test(bucketId)) {\n        return false;\n    }\n\n    // 验证时间戳格式（14位数字）\n    if (!/^\\d{14}$/.test(timestamp)) {\n        return false;\n    }\n\n    return true;\n};\n\nconst handleScan = () => {\n    // 先进行扫码\n    // @ts-ignore\n    uni.scanCode({\n        success: async (res) => {\n            console.log('扫码结果', res);\n\n            // 验证扫码结果格式\n            if (!validateScanResult(res.result)) {\n                uni.showToast({\n                    title: '扫码格式不正确，请扫描正确的桶码',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            // 验证商户ID是否匹配\n            const scanResult = res.result;\n            const parts = scanResult.split('_');\n            const scannedMerchantId = parts[0]; // 下划线前面的是商户ID\n\n            console.log('扫码结果:', scanResult);\n            console.log('扫码中的商户ID:', scannedMerchantId);\n            console.log('当前商户ID:', merchantId.value);\n\n            if (scannedMerchantId !== merchantId.value) {\n                uni.showToast({\n                    title: '桶码不属于当前商户，请扫描正确的桶码',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            // 检查是否已经扫描过相同的桶码\n            const existingRecord = records.value.find(record => record.bucketCode === res.result);\n            if (existingRecord) {\n                uni.showToast({\n                    title: '该桶码已扫描，请勿重复扫描',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            try {\n                // 调用 apiGetMerchantBucke 获取商家所有桶信息\n                const bucketRes = await apiGetMerchantBucke({\n                    id: planId.value,           // 收运单ID\n                    merchantId: merchantId.value, // 商户ID\n                    driverId: driverId.value,   // 司机ID\n                    registrationNumber: registrationNumber.value // 车牌号\n                });\n\n                if (bucketRes.code !== 200) {\n                    uni.showToast({\n                        title: bucketRes.msg || '获取桶信息失败',\n                        icon: 'none'\n                    });\n                    return;\n                }\n\n                console.log('获取到的桶信息:', bucketRes.data);\n\n                // 调用 apiGetBackfillBuckeWeight 回填重量\n                const weightRes = await apiGetBackfillBuckeWeight({\n                    id: planId.value,           // 收运单ID\n                    merchantId: merchantId.value, // 商户ID\n                    driverId: driverId.value,   // 司机ID\n                    registrationNumber: registrationNumber.value // 车牌号\n                });\n\n                if (weightRes.code !== 200) {\n                    console.log('回填重量失败:', weightRes.msg);\n                    // 重量回填失败不影响主流程，继续执行\n                } else {\n                    console.log('回填的重量信息:', weightRes.data);\n                }\n\n                // 根据API返回的桶数据添加记录\n                addRecordsFromBucketData(bucketRes.data, weightRes.data);\n\n                // 扫码成功后显示刷新按钮\n                showRefreshButton.value = true;\n\n                uni.showToast({\n                    title: '扫码成功',\n                    icon: 'success'\n                });\n            } catch (error) {\n                console.error('获取桶信息异常:', error);\n                uni.showToast({\n                    title: '获取桶信息异常',\n                    icon: 'none'\n                });\n            }\n        },\n        fail: (err) => {\n            console.log('扫码失败', err);\n            uni.showToast({\n                title: '扫码失败,请重试!',\n                icon: 'none'\n            });\n        }\n    });\n};\n\n// 根据API返回的桶数据添加记录\nconst addRecordsFromBucketData = (bucketData, weightData) => {\n    // 清空之前的提交数据\n    submitData.value = [];\n\n    // 根据 apiGetBackfillBuckeWeight 的数据来添加记录，使用 apiGetMerchantBucke 里面的编号\n    if (Array.isArray(weightData)) {\n        // 如果重量数据是数组，按重量数据的数量来添加记录\n        weightData.forEach((weightItem, index) => {\n            // 从桶数据中获取对应的编号信息\n            let bucketInfo = null;\n            if (Array.isArray(bucketData) && bucketData.length > index) {\n                bucketInfo = bucketData[index];\n            }\n\n            // 添加显示记录\n            records.value.push({\n                binCount: 1, // 默认垃圾桶数量为1\n                weight: weightItem.weight || '', // 使用回填的重量数据\n                images: [],\n                isConfirmed: false, // 新添加的记录标记为未确认\n                bucketCode: bucketInfo ? bucketInfo.bucketCode : '', // 桶编码，有就给，没有就空着\n                bucketType: bucketInfo ? bucketInfo.bucketType : '', // 桶类型\n                bucketName: bucketInfo ? bucketInfo.bucketName : '', // 桶名称\n                id: `temp_${Date.now()}_${index}` // 临时ID\n            });\n\n            // 添加提交数据\n            submitData.value.push({\n                thirdpartyId: weightItem.id, // 第三方垃圾桶称重记录id\n                bucketCode: bucketInfo ? bucketInfo.bucketCode : '', // 桶编码\n                weight: parseFloat(weightItem.weight || 0), // 垃圾重量改为小数类型\n                carId: carId.value, // 车辆ID\n                driverId: driverId.value, // 司机ID\n                merchantId: merchantId.value, // 商户ID\n                planId: planId.value, // 收运单ID\n            });\n\n            ljNum.value++;\n        });\n    } else if (weightData && typeof weightData === 'object') {\n        // 如果重量数据是单个对象\n        // 从桶数据中获取第一个编号信息\n        let bucketInfo = null;\n        if (Array.isArray(bucketData) && bucketData.length > 0) {\n            bucketInfo = bucketData[0];\n        }\n\n        // 添加显示记录\n        records.value.push({\n            binCount: 1, // 默认垃圾桶数量为1\n            weight: weightData.weight || '', // 使用回填的重量数据\n            images: [],\n            isConfirmed: false, // 新添加的记录标记为未确认\n            bucketCode: bucketInfo ? bucketInfo.bucketCode : '', // 桶编码，有就给，没有就空着\n            bucketType: bucketInfo ? bucketInfo.bucketType : '', // 桶类型\n            bucketName: bucketInfo ? bucketInfo.bucketName : '', // 桶名称\n            id: `temp_${Date.now()}_0` // 临时ID\n        });\n\n        // 添加提交数据\n        submitData.value.push({\n            thirdpartyId: weightData.id, // 第三方垃圾桶称重记录id\n            bucketCode: bucketInfo ? bucketInfo.bucketCode : '', // 桶编码\n            weight: parseFloat(weightData.weight || 0), // 垃圾重量改为小数类型\n            carId: carId.value, // 车辆ID\n            driverId: driverId.value, // 司机ID\n            merchantId: merchantId.value, // 商户ID\n            planId: planId.value, // 收运单ID\n        });\n\n        ljNum.value++;\n    } else {\n        console.log('重量数据格式不正确');\n    }\n\n    console.log('提交数据:', submitData.value);\n};\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: $bg-theme-color;\n}\n\n// 添加商店信息样式\n.store-info {\n    padding: 32rpx;\n    background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);\n    margin: 20rpx;\n    border-radius: 24rpx;\n    box-shadow: 0 6rpx 24rpx rgba(0, 0, 0, 0.08);\n    border: 1px solid rgba(7, 193, 96, 0.1);\n\n    .store-name {\n        font-size: 32rpx;\n        font-weight: 600;\n        color: #333333;\n        margin-bottom: 20rpx;\n    }\n\n    .bin-info {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 28rpx;\n        color: #666666;\n        background: rgba(7, 193, 96, 0.05);\n        padding: 16rpx 20rpx;\n        border-radius: 16rpx;\n        border: 1px solid rgba(7, 193, 96, 0.1);\n\n        .bin-count {\n            font-size: 36rpx;\n            font-weight: bold;\n            color: #07C160;\n            display: inline-block;\n            vertical-align: text-bottom;\n            line-height: 1;\n        }\n\n        .scan-icon {\n            cursor: pointer;\n            padding: 8rpx;\n            border-radius: 50%;\n            background: rgba(7, 193, 96, 0.1);\n            transition: all 0.3s ease;\n\n            &:hover {\n                background: rgba(7, 193, 96, 0.2);\n                transform: scale(1.1);\n            }\n        }\n    }\n}\n\n.content {\n    flex: 1;\n    overflow: auto;\n    padding-bottom: 120rpx; // 为底部按钮留出空间\n\n    .record-list {\n        padding: 24rpx;\n\n        .empty-tip {\n            text-align: center;\n            padding: 120rpx 40rpx;\n            color: #999999;\n            font-size: 32rpx;\n            background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);\n            border-radius: 20rpx;\n            margin: 20rpx;\n            box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);\n            border: 1px solid rgba(7, 193, 96, 0.1);\n            position: relative;\n        }\n\n        .record-item {\n            background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);\n            border-radius: 20rpx;\n            padding: 32rpx;\n            margin-bottom: 20rpx;\n            box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n            border: 1px solid rgba(7, 193, 96, 0.1);\n            transition: all 0.3s ease;\n\n            &:hover {\n                transform: translateY(-2rpx);\n                box-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.12);\n            }\n\n            .record-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 12rpx;\n                height: 35rpx;\n\n                .bucket-number {\n                    font-size: 28rpx;\n                    font-weight: 600;\n                    color: #333333;\n                    line-height: 35rpx;\n                    margin-top: 10rpx;\n                }\n\n                .weight-display {\n                    display: flex;\n                    align-items: center;\n                    margin-top: 10rpx;\n\n                    .weight-value {\n                        font-size: 36rpx;\n                        color: #07C160;\n                        font-weight: 700;\n                        line-height: 35rpx;\n                    }\n\n                    .weight-unit {\n                        font-size: 24rpx;\n                        color: #666666;\n                        margin-left: 8rpx;\n                        line-height: 35rpx;\n                    }\n                }\n            }\n\n            .record-details {\n                .detail-item {\n                    display: flex;\n                    align-items: center;\n                    margin-bottom: 12rpx;\n\n                    &:last-child {\n                        margin-bottom: 0;\n                    }\n\n                    .detail-label {\n                        font-size: 26rpx;\n                        color: #666666;\n                        min-width: 120rpx;\n                    }\n\n                    .detail-value {\n                        font-size: 26rpx;\n                        color: #333333;\n                        font-weight: 500;\n                        flex: 1;\n                    }\n                }\n            }\n        }\n\n        .refresh-button {\n            position: fixed;\n            right: 30rpx;\n            bottom: 300rpx;\n            z-index: 999;\n        }\n\n        .record-card {\n            background-color: #FFFFFF;\n            border-radius: 16rpx;\n            padding: 32rpx;\n            margin-bottom: 24rpx;\n\n            .input-group {\n                margin-bottom: 32rpx;\n\n                .input-item {\n                    margin-bottom: 24rpx;\n\n                    &:last-child {\n                        margin-bottom: 0;\n                    }\n\n                    .label {\n                        display: block;\n                        font-size: 14px;\n                        color: #333333;\n                        margin-bottom: 16rpx;\n\n                        .required {\n                            color: #FF4D4F;\n                            margin-right: 8rpx;\n                        }\n                    }\n\n                    .input {\n                        height: 88rpx;\n                        background-color: #F5F5F5;\n                        border-radius: 8rpx;\n                        padding: 0 24rpx;\n                        font-size: 14px;\n                    }\n\n                    // 重量输入容器样式\n                    .weight-input-container {\n                        display: flex;\n                        align-items: center;\n                        gap: 16rpx;\n\n                        .input {\n                            flex: 1;\n                        }\n\n                        .get-weight-btn {\n                            width: 120rpx;\n                            height: 54rpx;\n                            background-color: #07C160;\n                            color: #FFFFFF;\n                            border: none;\n                            border-radius: 32rpx;\n                            font-size: 24rpx;\n                            font-weight: 500;\n                            line-height: 54rpx;\n                            text-align: center;\n                            white-space: nowrap;\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n\n                            &:active {\n                                background-color: #06AD56;\n                            }\n\n                            &[disabled] {\n                                background-color: #CCCCCC;\n                                color: #fff;\n                            }\n                        }\n                    }\n\n                    // 下划线样式输入框\n                    .underline-input {\n                        height: 88rpx;\n                        background-color: transparent;\n                        border: none;\n                        border-bottom: 1px solid #e0e0e0;\n                        border-radius: 0;\n                        padding: 0 8rpx;\n                        font-size: 14px;\n                        box-shadow: none;\n\n                        &:focus {\n                            outline: none;\n                            border-bottom: 1px solid #07C160;\n                        }\n\n                        // 只读状态样式\n                        &[disabled] {\n                            background-color: #f5f5f5;\n                            color: #999;\n                            -webkit-text-fill-color: #999; // 防止iOS设备上disabled文字变淡\n                            opacity: 1; // 防止某些浏览器中disabled元素透明度变化\n                        }\n\n                        &.readonly-input {\n                            background-color: #f5f5f5;\n                            color: #999;\n                        }\n                    }\n                }\n            }\n\n            .upload-section {\n                margin-bottom: 32rpx;\n\n                .label {\n                    display: block;\n                    font-size: 14px;\n                    color: #333333;\n                    margin-bottom: 16rpx;\n\n                    .required {\n                        color: #FF4D4F;\n                        margin-right: 8rpx;\n                    }\n                }\n\n                .upload-area {\n                    margin-top: 16rpx;\n\n                    .test-upload-btn {\n                        width: 200rpx;\n                        height: 60rpx;\n                        background-color: #07C160;\n                        color: #FFFFFF;\n                        border: none;\n                        border-radius: 8rpx;\n                        font-size: 28rpx;\n                        margin-bottom: 16rpx;\n                    }\n\n                    .upload-tip {\n                        font-size: 24rpx;\n                        color: #999999;\n                        line-height: 1.5;\n                        margin-top: 16rpx;\n                    }\n                }\n            }\n\n        }\n    }\n}\n\n// 底部固定按钮样式\n.bottom-button {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, #FFFFFF 100%);\n    padding: 24rpx 32rpx 40rpx;\n    border-top: 1px solid rgba(7, 193, 96, 0.1);\n    z-index: 999;\n    backdrop-filter: blur(10rpx);\n\n    .btn-complete {\n        width: 100%;\n        height: 96rpx;\n        background: linear-gradient(135deg, #07C160 0%, #06AD56 100%);\n        color: #FFFFFF;\n        border: none;\n        border-radius: 48rpx;\n        font-size: 32rpx;\n        font-weight: 600;\n        line-height: 96rpx;\n        text-align: center;\n        box-shadow: 0 8rpx 24rpx rgba(7, 193, 96, 0.3);\n        transition: all 0.3s ease;\n        position: relative;\n        overflow: hidden;\n\n\n        &:hover {\n            transform: translateY(-2rpx);\n            box-shadow: 0 12rpx 32rpx rgba(7, 193, 96, 0.4);\n        }\n\n        &:active {\n            transform: translateY(0);\n            background: linear-gradient(135deg, #06AD56 0%, #059B4A 100%);\n        }\n\n        &::after {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: -100%;\n            width: 100%;\n            height: 100%;\n            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n            transition: left 0.5s;\n        }\n\n        &:hover::after {\n            left: 100%;\n        }\n    }\n}\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/collection/syReport.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","apiGetBackfillBuckeWeight","ref","useUserStore","onLoad","apiPostreportWeight","apiGetMerchantBucke"],"mappings":"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"}