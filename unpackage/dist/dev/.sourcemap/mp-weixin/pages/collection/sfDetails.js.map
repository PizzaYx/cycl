{"version":3,"file":"sfDetails.js","sources":["pages/collection/sfDetails.vue","pages/collection/sfDetails.vue?type=page"],"sourcesContent":["<!-- 收运详情 -->\n<template>\n    <view class=\"container\">\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"收运详情\"\n            @clickLeft=\"back\" />\n        <view class=\"header-progress-container\">\n            <view class=\"header\">\n                <view class=\"driver-info\">\n                    <view class=\"info-item\">\n                        <uni-text class=\"label\">司机名称：</uni-text>\n                        <uni-text class=\"value\">{{ name }}</uni-text>\n                        <uni-button size=\"mini\" type=\"primary\" class=\"contact-btn\"\n                            @tap=\"contactLine()\">查看线路</uni-button>\n                    </view>\n                    <view class=\"info-item\">\n                        <uni-text class=\"label\">车牌号：</uni-text>\n                        <uni-text class=\"value\">{{ registrationNumber }}</uni-text>\n                    </view>\n                    <view class=\"info-item\">\n                        <uni-text class=\"label\">日期：</uni-text>\n                        <uni-text class=\"value\">{{ currentDate }}</uni-text>\n                    </view>\n                    <view class=\"info-item\">\n                        <uni-text class=\"label\">垃圾桶数：</uni-text>\n                        <uni-text class=\"value\">{{ bucketNum }}个</uni-text>\n                    </view>\n                </view>\n            </view>\n            <view class=\"divider\"></view>\n            <view class=\"progress-section\">\n                <view class=\"progress-title\">收运完成率</view>\n                <view class=\"progress-content\">\n                    <view class=\"progress-circle\"\n                        :style=\"{ background: `conic-gradient(#07C160 ${progressPercentage}%, rgba(216, 216, 216, 0.5) ${progressPercentage}% 100%)` }\">\n                        <view class=\"circle-text\">\n                            <uni-text class=\"percentage\">{{ progressPercentage }}%</uni-text>\n                            <uni-text class=\"label\">已完成</uni-text>\n                        </view>\n                    </view>\n                    <view class=\"progress-stats\">\n                        <view class=\"stat-item\">\n                            <image src=\"/static/ssd/greenbg.png\" mode=\"aspectFill\"></image>\n                            <uni-text class=\"value green\">{{ confirmNum ?? 0 }}</uni-text>\n                            <uni-text class=\"label\">已收运</uni-text>\n                        </view>\n                        <view class=\"stat-item\">\n                            <image src=\"/static/ssd/orangebg.png\" mode=\"aspectFill\"></image>\n                            <uni-text class=\"value orange\">{{ notConfirmNum }}</uni-text>\n                            <uni-text class=\"label\">未收运</uni-text>\n                        </view>\n                        <view class=\"stat-item\">\n                            <image src=\"/static/ssd/bluebg.png\" mode=\"aspectFill\"></image>\n                            <uni-text class=\"value blue\">{{ weightNum }}</uni-text>\n                            <uni-text class=\"label\">总重量</uni-text>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </view>\n        <view class=\"weight-section\">\n            <uni-text class=\"weight-header\">过磅信息 </uni-text>\n            <view class=\"weight-content\">\n                <image src=\"/static/ssd/gbicon.png\" mode=\"aspectFill\"></image>\n                <uni-text class=\"weight-title\">重量：</uni-text>\n                <input class=\"weight-input\" type=\"number\" v-model=\"weightInput\" placeholder=\"0\" />\n                <uni-text class=\"weight-unit\">kg</uni-text>\n                <uni-button size=\"mini\" type=\"primary\" class=\"tj-btn\" @tap=\"handleSubmitWeight()\">提交重量</uni-button>\n\n            </view>\n        </view>\n        <view class=\"task-list\">\n            <view class=\"task-item\" v-for=\"(task, index) in taskList\" :key=\"task.id\">\n                <view class=\"task-header\">\n                    <view class=\"time-info\">\n                        <uni-icons type=\"circle-filled\"\n                            :color=\"index === 0 ? 'rgba(7, 193, 96, 1)' : 'rgba(61, 61, 61, 0.50)'\" size=\"20\">\n                        </uni-icons>\n                        <uni-text class=\"date\">{{ task.appointmentTime }}</uni-text>\n                    </view>\n                    <!-- 状态类名对应：0: 进行中, 1: 已完成, 2: 无需收运 -->\n                    <uni-text class=\"status\" :class=\"{\n                        'processing': task.status === 0,\n                        'completed': task.status === 1,\n                        'cancelled': task.status === 2\n                    }\">\n                        {{ getStatusText(task.status) }}\n                    </uni-text>\n                </view>\n                <view class=\"divider\"></view>\n                <view class=\"task-content\">\n                    <view class=\"merchant-info\">\n                        <uni-text class=\"label\">商户名称：</uni-text>\n                        <uni-text class=\"value\">{{ task.merchantName }}</uni-text>\n                    </view>\n                    <view class=\"weight-info\">\n                        <uni-text class=\"label\">预估重量：</uni-text>\n                        <uni-text class=\"value\">{{ task.estimateWeight }}kg</uni-text>\n                    </view>\n                    <view class=\"bin-info\">\n                        <uni-text class=\"label\">桶数：</uni-text>\n                        <uni-text class=\"value\">{{ task.estimateBucketNum || 0 }}个</uni-text>\n                    </view>\n                    <view class=\"address-info\">\n                        <uni-text class=\"label\">地址：</uni-text>\n                        <uni-text class=\"value\">{{ task.address }}</uni-text>\n                        <uni-icons type=\"location\" size=\"16\" color=\"#00B578\"></uni-icons>\n                    </view>\n                </view>\n                <view class=\"task-footer\">\n                    <template v-if=\"task.status === 0\">\n                        <!-- 进行中状态：显示4个按钮 -->\n                        <uni-button size=\"mini\" class=\"cancel-btn\" @tap=\"cancelTask(task)\">取消</uni-button>\n                        <uni-button size=\"mini\" type=\"primary\" class=\"view-btn\" @tap=\"viewTask(task)\">查看</uni-button>\n                        <uni-button size=\"mini\" type=\"primary\" class=\"report-btn\"\n                            @tap=\"reportTask(task)\">收运上报</uni-button>\n                        <uni-button size=\"mini\" type=\"primary\" class=\"collect-btn\"\n                            @tap=\"collectTask(task)\">收运完成</uni-button>\n                    </template>\n                    <template v-else-if=\"task.status === 1\">\n                        <!-- 已完成状态：只显示查看按钮 -->\n                        <uni-button size=\"mini\" type=\"primary\" class=\"view-btn\" @tap=\"viewTask(task)\">查看</uni-button>\n                    </template>\n                    <template v-else-if=\"task.status === 2\">\n                        <!-- 无需收运状态：只显示查看按钮 -->\n                        <uni-button size=\"mini\" type=\"primary\" class=\"view-btn\" @tap=\"viewTask(task)\">查看</uni-button>\n                    </template>\n                </view>\n            </view>\n        </view>\n        <view class=\"headImage\">\n            <image src=\"/static/headTopBg.png\" mode=\"aspectFill\"></image>\n        </view>\n    </view>\n\n</template>\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { onShow } from '@dcloudio/uni-app' // 导入onShow生命周期\nimport { useUserStore } from '@/stores/user.js'\nimport { apiGetDriverInfo, apiGetDriverTodayPlan, apiGetnoNeedCollect, apiGetdriverConfirmPlan, apiAddCarWeight } from '@/api/apis.js'\n\n// 获取当前日期并格式化为 YYYY-MM-DD 格式\nconst getCurrentDate = () => {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n};\n\nconst userStore = useUserStore()\nconst weightNum = ref(0) // 已收运总量\nconst notConfirmNum = ref(0) // 未收运\nconst confirmNum = ref(0) // 已收运\nconst bucketNum = ref(0) // 垃圾桶数\nconst registrationNumber = ref('') // 车牌号\nconst name = ref('') // 司机名称\nconst currentDate = getCurrentDate() // 当前日期\nconst weightInput = ref('') // 重量输入框的值\nconst allCarId = ref(0)//车辆Id\nconst allRecordNo = ref('')//运单号\n\nconst taskList = ref([]) // 任务列表\n\n// 计算进度百分比\nconst progressPercentage = computed(() => {\n    if (confirmNum.value === 0 && weightNum.value === 0) return 0;\n    return Math.round((confirmNum.value / (confirmNum.value + notConfirmNum.value)) * 100);\n});\n\n// 获取状态文本\nconst getStatusText = (status) => {\n    switch (status) {\n        case 0: return '进行中';\n        case 1: return '已完成';\n        case 2: return '无需收运';\n        default: return '未知状态';\n    }\n};\n\nonMounted(async () => {\n    // 页面加载时的逻辑\n    try {\n        // const userInfo = await userStore.ensureUserInfo()\n        // if (userInfo === null) {\n        //     // 用户未登录，已跳转到登录页，不需要继续执行\n        //     console.log('用户未登录，已跳转到登录页')\n        //     return\n        // }\n        getapiGetDriverInfo();\n        getapiGetDriverTodayPlan();\n    } catch (error) {\n        // 其他非401错误的处理\n        console.error('页面初始化失败:', error)\n    }\n\n})\n\n// 页面显示时刷新数据\nonShow(async () => {\n    console.log('页面显示时刷新数据')\n    getapiGetDriverInfo();\n    getapiGetDriverTodayPlan();\n})\n\n\n//获取今日统计信息\nconst getapiGetDriverInfo = async () => {\n    try {\n        const res = await apiGetDriverInfo({\n            driverId: userStore.sfmerchant?.id || 5, \n          \n        })\n\n        if (res.code === 200) {\n            if (res.data === null)\n                return;\n            confirmNum.value = res.data.confirmNum ?? 0;\n            notConfirmNum.value = res.data.notConfirmNum ?? 0;\n            weightNum.value = res.data.weightNum ?? 0;\n\n            bucketNum.value = res.data.bucketNum ?? 0;\n            registrationNumber.value = res.data.registrationNumber;\n            name.value = res.data.name;\n            allCarId.value = res.data.carId;\n            allRecordNo.value = res.data.crecordNo;\n        } else {\n            console.error('获取司机信息失败:', res.message || '未知错误');\n        }\n    } catch (error) {\n        console.error('获取司机信息异常:', error);\n    }\n}\n\n//司机今日收运管理列表\nconst getapiGetDriverTodayPlan = async () => {\n    try {\n        const res = await apiGetDriverTodayPlan({\n            driverId: userStore.sfmerchant?.id || 5,\n            page: 1,\n        })\n        // status  0进行中  1已完成  2无需收运\n        if (res.code === 200) {\n            taskList.value = res.data;\n        } else {\n            console.error('获取今日收运计划失败:', res.message || '未知错误');\n        }\n    } catch (error) {\n        console.error('获取今日收运计划异常:', error);\n    }\n}\n\n\n\n// 取消任务\nconst cancelTask = (task) => {\n    console.log('取消任务:', task.id);\n    uni.showModal({\n        title: '确认取消',\n        content: '是否确认取消当前任务？',\n        success: async (res) => {\n            if (res.confirm) {\n                await apiGetnoNeedCollect({\n                    id: task.id,\n                    driverId: userStore.sfmerchant?.id || 5,\n                }).then((res) => {\n                    if (res.code === 200) {\n                        uni.showToast({\n                            title: res.message || '操作成功',\n                            icon: 'success'\n                        });\n                        // 刷新任务列表\n                        getapiGetDriverTodayPlan();\n                    } else {\n                        uni.showToast({\n                            title: res.message || '操作失败',\n                            icon: 'error'\n                        });\n                    }\n\n                })\n            }\n        }\n    })\n};\n\n// 查看任务\nconst viewTask = (task) => {\n\n    // 这里添加查看任务的逻辑\n    uni.navigateTo({\n        url: `/pages/collection/syCheckDetail?planId=${task.id}&driverId=${task.driverId}`\n    });\n};\n\n// 收运上报\nconst reportTask = (task) => {\n    console.log('收运上报:', task);\n\n    uni.navigateTo({\n        url: `/pages/collection/syReport?carId=${task.carId}&driverId=${task.driverId}&merchantId=${task.merchantId}&planId=${task.id}`\n    });\n};\n\n\n\nconst contactLine = () => {\n    console.log('查看线路');\n\n    const mapData = {\n        taskList: taskList.value,\n        driverName: name.value,\n        registrationNumber: registrationNumber.value,\n        bucketNum: bucketNum.value,\n        currentDate: currentDate\n    };\n\n    // 尝试使用 EventChannel，失败则使用存储方式\n    uni.navigateTo({\n        url: '/pages/collection/syAllMap',\n        events: {\n            // 可以接收目标页面回传的数据\n            acceptDataFromMap: (data) => {\n                console.log('地图页面回传数据:', data);\n            }\n        },\n        success: (res) => {\n            // 无论如何都使用存储方式，确保数据传递的可靠性\n            console.log('使用存储方式发送数据');\n            \n\n            // 同时尝试EventChannel（如果支持的话）\n            try {\n                if (res.eventChannel && res.eventChannel.emit) {\n                    res.eventChannel.emit('sendMapData', mapData);\n                    console.log('同时使用EventChannel发送数据');\n                }\n            } catch (error) {\n                console.log('EventChannel发送失败，但存储方式已保证数据传递');\n            }\n        },\n        fail: () => {\n            // 跳转失败时也使用存储方式\n            console.log('页面跳转失败，使用存储方式');\n           \n        }\n    });\n};\n\n// 收运\nconst collectTask = (task) => {\n    console.log('收运:', task.id);\n    //先判断task.weight是否大于0 he task.bucketNum是否大于0\n    if (task.weight > 0 && task.bucketNum > 0) {\n        //确认收运完成\n        uni.showModal({\n            title: '确认收运完成',\n            content: '是否确认收运完成？',\n            success: async (res) => {\n                if (res.confirm) {\n                    await apiGetdriverConfirmPlan({\n                        id: task.id,\n                        driverId: userStore.sfmerchant?.id || 5,\n                    }).then((res) => {\n                        if (res.code === 200) {\n                            uni.showToast({\n                                title: res.message || '操作成功',\n                                icon: 'success'\n                            });\n                            // 刷新任务列表\n                            getapiGetDriverTodayPlan();\n                        } else {\n                            uni.showToast({\n                                title: res.message || '操作失败',\n                                icon: 'error'\n                            });\n                        }\n                    })\n                }\n            }\n        })\n\n    }\n    else {\n        uni.showToast({\n            title: '请先进行 收运上报 操作',\n            icon: 'none'\n        });\n        return;\n    }\n};\n// 提交重量\nconst handleSubmitWeight = async () => {\n    // 验证提交重量是否输入 是否大于等于0，成功提示是否提交过磅重量 是就调取接口apiGetCarWeight\n    if (!weightInput.value) {\n        uni.showToast({\n            title: '请输入重量',\n            icon: 'none'\n        });\n        return;\n    }\n\n    const weight = parseFloat(weightInput.value);\n    if (isNaN(weight) || weight < 0) {\n        uni.showToast({\n            title: '请输入有效的重量(大于等于0)',\n            icon: 'none'\n        });\n        return;\n    }\n\n    uni.showModal({\n        title: '确认提交',\n        content: `是否确认提交过磅重量 ${weight}kg？`,\n        success: async (res) => {\n            if (res.confirm) {\n                try {\n                    const result = await apiAddCarWeight({\n                        carId: allCarId.value,\n                        recordNo: allRecordNo.value,\n                        weight: weight,\n                        registrationNumber: registrationNumber.value,\n                        driverId: userStore.sfmerchant?.id || 5\n                    });\n\n                    if (result.code === 200) {\n                        uni.showToast({\n                            title: '提交成功',\n                            icon: 'success'\n                        });\n                        // 清空输入框\n                        weightInput.value = '';\n                        // 刷新统计数据\n                        getapiGetDriverInfo();\n                    } else {\n                        uni.showToast({\n                            title: result.message || '提交失败',\n                            icon: 'none'\n                        });\n                    }\n                } catch (error) {\n                    uni.showToast({\n                        title: '提交失败',\n                        icon: 'none'\n                    });\n                    console.error('提交重量失败:', error);\n                }\n            }\n        }\n    });\n};\n\n// 返回上一页\nconst back = () => {\n    uni.navigateBack();\n};\n\n// 组件逻辑\n</script>\n\n\n\n<style scoped lang=\"scss\">\n.container {\n    background-color: $bg-theme-color;\n    min-height: 100vh;\n    box-sizing: border-box;\n    padding: 0 30rpx 30rpx;\n\n    .header-progress-container {\n        background: #FFFFFF;\n        border-radius: 16rpx;\n        padding: 30rpx;\n        margin-bottom: 20rpx;\n        margin-top: 20rpx;\n    }\n\n    .header {\n        background: none;\n        border-radius: 0;\n        padding: 0;\n        margin-bottom: 0;\n\n        .header-title {\n            margin-bottom: 20rpx;\n\n            .title {\n                font-size: 16px;\n                font-weight: 500;\n                color: #333333;\n            }\n        }\n\n        .driver-info {\n            display: flex;\n            flex-direction: column;\n            gap: 20rpx;\n\n            .info-item {\n                display: flex;\n                align-items: center;\n\n                .label {\n                    color: rgba(61, 61, 61, 0.50);\n                    font-size: 28rpx;\n                }\n\n                .value {\n                    color: rgba(61, 61, 61, 1);\n                    font-size: 14px;\n                }\n\n                .contact-btn {\n                    margin-left: auto;\n                    color: #07C160;\n                    border-radius: 100rpx;\n                    padding: 6rpx 20rpx;\n                    border: 2rpx solid #07C160;\n                    font-size: 26rpx;\n                }\n            }\n        }\n    }\n\n    .divider {\n        height: 2rpx;\n        background-color: #f0f0f0;\n        margin: 20rpx 0;\n    }\n\n    .progress-section {\n        background: none;\n        border-radius: 0;\n        padding: 0;\n        margin-bottom: 0;\n\n\n        .progress-title {\n            font-size: 34rpx;\n            color: rgba(61, 61, 61, 1);\n\n            margin-bottom: 30rpx;\n        }\n\n        .progress-content {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n\n            .progress-circle {\n                width: 200rpx;\n                height: 200rpx;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                position: relative;\n\n                .circle-text {\n                    text-align: center;\n                    background: white;\n                    border-radius: 50%;\n                    width: 170rpx;\n                    height: 170rpx;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    flex-direction: column;\n\n                    .percentage {\n                        font-size: 48rpx;\n                        color: #07C160;\n                        font-weight: 400;\n                        display: block;\n                    }\n\n                    .label {\n                        font-size: 24rpx;\n                        color: rgba(61, 61, 61, 0.50);\n                    }\n                }\n            }\n\n            .progress-stats {\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n                margin-left: 40rpx;\n                gap: 20rpx;\n                align-items: flex-end;\n\n                .stat-item {\n                    width: 300rpx;\n                    height: 88rpx;\n                    display: flex;\n                    flex-direction: column;\n                    justify-content: center;\n                    align-items: center;\n                    position: relative;\n\n                    image {\n                        width: 100%;\n                        height: 100%;\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        z-index: 0;\n                    }\n\n                    .value {\n                        font-size: 32rpx;\n                        font-weight: 500;\n                        display: block;\n                        z-index: 1;\n                        text-align: center;\n\n                        &.green {\n                            color: rgba(7, 193, 96, 1);\n                        }\n\n                        &.orange {\n                            color: rgba(255, 161, 0, 1);\n                        }\n\n                        &.blue {\n                            color: rgba(0, 170, 255, 1);\n                        }\n                    }\n\n                    .label {\n                        font-size: 24rpx;\n                        color: rgba(61, 61, 61, 0.50);\n                        z-index: 1;\n                        text-align: center;\n                    }\n                }\n            }\n        }\n    }\n\n    .weight-section {\n        background: #FFFFFF;\n        border-radius: 16rpx;\n        padding: 30rpx;\n        margin-bottom: 10rpx;\n\n        .weight-header {\n            font-size: 34rpx;\n            color: rgba(61, 61, 61, 1);\n            display: block;\n            margin-bottom: 20rpx;\n        }\n\n        .weight-content {\n            display: flex;\n            align-items: center;\n\n            image {\n                width: 80rpx;\n                height: 80rpx;\n                margin-right: 40rpx;\n            }\n\n            .weight-title {\n                font-size: 14px;\n                color: #333333;\n            }\n\n            .weight-input {\n                margin: 0 10rpx;\n                padding: 10rpx 20rpx;\n                border: 1rpx solid #ddd;\n                border-radius: 10rpx;\n                font-size: 14px;\n                width: 120rpx;\n                text-align: center;\n            }\n\n            .weight-unit {\n                font-size: 14px;\n                color: #999999;\n                margin-left: 10rpx;\n            }\n\n            .weight-btn {\n                margin-left: auto;\n                background-color: #00B578;\n            }\n        }\n\n\n        .tj-btn {\n            margin-left: auto;\n            color: #07C160;\n            border-radius: 100rpx;\n            padding: 6rpx 20rpx;\n            border: 2rpx solid #07C160;\n            font-size: 26rpx;\n        }\n    }\n\n    .task-list {\n        margin-top: 20rpx;\n        position: relative;\n        /* 移除左右内边距，因为任务项本身已经有30rpx的padding */\n\n        /* 移除整体时间轴线，改用分段方式 */\n\n        .task-item {\n            background: #FFFFFF;\n            border-radius: 16rpx;\n            padding: 30rpx;\n            margin-bottom: 0;\n            /* 移除任务项之间的间隔，让图标可以连线 */\n            position: relative;\n            z-index: 1;\n\n            /* 为除了第一个item添加上半段线条（从item顶部到uni-icons顶部） */\n            &:not(:first-child)::before {\n                content: '';\n                position: absolute;\n                left: 49rpx;\n                /* uni-icons图标中心位置 */\n                top: 0;\n                width: 2rpx;\n                height: 35rpx;\n                /* 从item顶部到uni-icons顶部 */\n                background-color: rgba(216, 216, 216, 1);\n                z-index: 1;\n            }\n\n            /* 为除了最后一个item添加下半段线条（从uni-icons底部到item底部） */\n            &:not(:last-child)::after {\n                content: '';\n                position: absolute;\n                left: 49rpx;\n                /* uni-icons图标中心位置 */\n                bottom: 0;\n                width: 2rpx;\n                height: 382rpx;\n                /* 从uni-icons底部到item底部 */\n                background-color: rgba(216, 216, 216, 1);\n                z-index: 1;\n            }\n\n            .task-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 20rpx;\n\n                .time-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 25rpx;\n                    /* 确保icon与时间文本之间有25rpx间距 */\n                    position: relative;\n                    z-index: 10;\n                    /* 设置高层级，确保图标在时间线之上 */\n\n\n                    .date {\n                        font-size: 14px;\n                        color: #666666;\n                    }\n                }\n\n                .status {\n                    font-size: 12px;\n                    width: 100rpx;\n                    height: 40rpx;\n                    border-radius: 8rpx;\n                    margin-right: 15rpx;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n\n                    &.processing {\n                        color: rgba(0, 170, 255, 1);\n                        background: rgba(0, 170, 255, 0.10);\n                    }\n\n                    &.completed {\n                        color: rgba(255, 161, 0, 1);\n                        background: rgba(255, 161, 0, 0.10);\n                    }\n\n                    &.cancelled {\n                        color: rgba(61, 61, 61, 0.50);\n                        background: rgba(153, 153, 153, 0.1);\n                    }\n                }\n            }\n\n            .divider {\n                height: 2rpx;\n                background-color: #f0f0f0;\n                margin: 22rpx 22rpx 0 55rpx;\n            }\n\n            .task-content {\n                margin: 22rpx 22rpx 0 55rpx;\n                display: flex;\n                flex-direction: column;\n                gap: 20rpx;\n\n                .merchant-info,\n                .weight-info,\n                .bin-info,\n                .address-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 10rpx;\n\n                    .label {\n                        color: #666666;\n                        font-size: 14px;\n                    }\n\n                    .value {\n                        color: #333333;\n                        font-size: 14px;\n                    }\n                }\n            }\n\n            .task-footer {\n                margin-top: 30rpx;\n                display: flex;\n                justify-content: flex-end;\n                gap: 15rpx;\n                flex-wrap: wrap; // 允许换行以适应4个按钮\n\n                .cancel-btn,\n                .view-btn,\n                .report-btn,\n                .collect-btn {\n                    width: 120rpx; // 减小按钮宽度以适应4个按钮\n                    height: 48rpx;\n                    color: #07C160;\n                    border-radius: 100rpx;\n                    border: 2rpx solid #07C160;\n                    font-size: 24rpx; // 稍微减小字体\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                }\n\n                .collect-btn {\n                    background-color: #07C160;\n                    color: white;\n                }\n\n                .cancel-btn {\n                    border: 1rpx solid rgba(196, 196, 196, 1);\n                    color: rgba(61, 61, 61, 1);\n                }\n\n                .report-btn {\n                    background-color: #FFA500;\n                    border-color: #FFA500;\n                    color: white;\n                }\n            }\n        }\n    }\n\n    .headImage {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        z-index: -1;\n\n        image {\n            width: 100%;\n            height: auto;\n            display: block;\n        }\n    }\n}\n\n/* 确保页面背景色始终正确显示 */\npage {\n    background-color: #F5F5F5;\n    height: 100%;\n}\n\nbody {\n    background-color: #F5F5F5;\n}\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/cycl/pages/collection/sfDetails.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","computed","onMounted","uni","onShow","apiGetDriverInfo","apiGetDriverTodayPlan","apiGetnoNeedCollect","res","apiGetdriverConfirmPlan","apiAddCarWeight"],"mappings":"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"}