{"version":3,"file":"user.js","sources":["pages/user/user.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci91c2VyLnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"container\">\r\n        <uni-nav-bar dark :fixed=\"true\" background-color=\"#fff\" status-bar left-icon=\"left\" color=\"#000\" title=\"个人信息\"\r\n            @clickLeft=\"back\" />\r\n        <view class=\"content\">\r\n            <view class=\"avatar-section\">\r\n                <view class=\"avatar-container\" @tap=\"handleAvatarClick\">\r\n                    <image v-if=\"avatarUrl\" class=\"avatar\" :src=\"avatarUrl\" mode=\"aspectFill\" />\r\n                    <view v-else class=\"avatar avatar-default\">\r\n                        <text class=\"avatar-text\">{{ userStore.userAvatar }}</text>\r\n                    </view>\r\n                    <view class=\"avatar-edit-overlay\">\r\n                        <uni-icons type=\"camera-filled\" size=\"32rpx\" color=\"#fff\"></uni-icons>\r\n                    </view>\r\n                </view>\r\n                <text class=\"change-avatar-text\">更换头像</text>\r\n            </view>\r\n\r\n            <view class=\"info-section\">\r\n                <text class=\"section-title\">基本信息</text>\r\n\r\n                <view class=\"info-item\">\r\n                    <text class=\"label\">昵称</text>\r\n                    <text class=\"value\">{{ userStore.nickName || '未设置' }}</text>\r\n                </view>\r\n\r\n                <view class=\"info-item\">\r\n                    <text class=\"label\">用户名</text>\r\n                    <text class=\"value\">{{ userStore.userName || '未设置' }}</text>\r\n                </view>\r\n\r\n                <view class=\"info-item\">\r\n                    <text class=\"label\">用户类型</text>\r\n                    <text class=\"value\">{{ userStore.userTypeText }}</text>\r\n                </view>\r\n\r\n                <view class=\"info-item\">\r\n                    <text class=\"label\">认证状态</text>\r\n                    <text class=\"value\" :class=\"getStatusClass()\">{{ userStore.merchantStatusText }}</text>\r\n                </view>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 文件选择器 -->\r\n        <uni-file-picker v-show=\"false\" ref=\"filePicker\" file-mediatype=\"image\" mode=\"grid\" :limit=\"1\"\r\n            @select=\"onFileSelect\" @success=\"onUploadSuccess\" @fail=\"onUploadFail\">\r\n        </uni-file-picker>\r\n\r\n        <view class=\"footer\">\r\n            <button class=\"save-btn\" @tap=\"handleSave\">保存</button>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useUserStore } from '@/stores/user.js'\r\n\r\n// 使用用户 store\r\nconst userStore = useUserStore()\r\n\r\n// 头像URL\r\nconst avatarUrl = ref('')\r\nconst filePicker = ref(null)\r\n\r\nonMounted(async () => {\r\n    // 确保有用户信息\r\n    await userStore.ensureUserInfo()\r\n})\r\n\r\n// 返回上一页\r\nconst back = () => {\r\n    uni.navigateBack()\r\n}\r\n\r\n// 点击头像\r\nconst handleAvatarClick = () => {\r\n    // 触发文件选择器\r\n    if (filePicker.value) {\r\n        filePicker.value.chooseFile()\r\n    }\r\n}\r\n\r\n// 文件选择回调\r\nconst onFileSelect = (e) => {\r\n    console.log('选择文件:', e)\r\n}\r\n\r\n// 上传成功回调\r\nconst onUploadSuccess = (e) => {\r\n    console.log('上传成功:', e)\r\n    if (e.tempFilePaths && e.tempFilePaths.length > 0) {\r\n        avatarUrl.value = e.tempFilePaths[0]\r\n    }\r\n}\r\n\r\n// 上传失败回调\r\nconst onUploadFail = (e) => {\r\n    console.log('上传失败:', e)\r\n    uni.showToast({\r\n        title: '上传失败',\r\n        icon: 'none'\r\n    })\r\n}\r\n\r\n// 获取认证状态样式类\r\nconst getStatusClass = () => {\r\n    const status = userStore.merchantStatus\r\n    switch (status) {\r\n        case 1:\r\n            return 'status-success'\r\n        case 0:\r\n            return 'status-pending'\r\n        case 2:\r\n            return 'status-failed'\r\n        default:\r\n            return 'status-default'\r\n    }\r\n}\r\n\r\n// 保存\r\nconst handleSave = () => {\r\n    uni.showToast({\r\n        title: '保存成功',\r\n        icon: 'success'\r\n    })\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .header {\r\n        flex-shrink: 0;\r\n        background-color: #ffffff;\r\n\r\n        .nav-bar {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 0 32rpx;\r\n            height: 88rpx;\r\n\r\n            .back-icon {\r\n                width: 44rpx;\r\n                height: 44rpx;\r\n            }\r\n\r\n            .title {\r\n                flex: 1;\r\n                text-align: center;\r\n                font-size: 17px;\r\n                font-weight: 500;\r\n                color: #333333;\r\n            }\r\n\r\n            .right-icons {\r\n                display: flex;\r\n                gap: 20rpx;\r\n\r\n                .more-icon,\r\n                .circle-icon {\r\n                    width: 44rpx;\r\n                    height: 44rpx;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .content {\r\n        flex: 1;\r\n        overflow: auto;\r\n        padding-bottom: 180rpx;\r\n        /* 为固定的保存按钮留出空间 */\r\n\r\n        .avatar-section {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            padding: 40rpx 0;\r\n            background-color: #ffffff;\r\n\r\n            .avatar-container {\r\n                position: relative;\r\n                width: 160rpx;\r\n                height: 160rpx;\r\n                margin-bottom: 16rpx;\r\n\r\n                .avatar {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    border-radius: 80rpx;\r\n                }\r\n\r\n                .avatar-default {\r\n                    background-color: rgba(7, 193, 96, 1);\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n\r\n                    .avatar-text {\r\n                        font-size: 48rpx;\r\n                        font-weight: 500;\r\n                        color: #fff;\r\n                    }\r\n                }\r\n\r\n                .avatar-edit-overlay {\r\n                    position: absolute;\r\n                    bottom: 0;\r\n                    right: 0;\r\n                    width: 48rpx;\r\n                    height: 48rpx;\r\n                    background-color: rgba(0, 0, 0, 0.6);\r\n                    border-radius: 24rpx;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    border: 4rpx solid #fff;\r\n                }\r\n            }\r\n\r\n            .change-avatar-text {\r\n                font-size: 14px;\r\n                color: #999999;\r\n            }\r\n        }\r\n\r\n        .info-section {\r\n            margin-top: 20rpx;\r\n            background-color: #ffffff;\r\n            padding: 0 32rpx;\r\n\r\n            .section-title {\r\n                font-size: 14px;\r\n                color: #333333;\r\n                padding: 24rpx 0;\r\n                display: block;\r\n            }\r\n\r\n            .info-item {\r\n                display: flex;\r\n                justify-content: space-between;\r\n                align-items: center;\r\n                padding: 32rpx 0;\r\n                border-bottom: 1px solid #f5f5f5;\r\n\r\n                &:last-child {\r\n                    border-bottom: none;\r\n                }\r\n\r\n                .label {\r\n                    font-size: 16px;\r\n                    color: #333333;\r\n                }\r\n\r\n                .value-container {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 8rpx;\r\n\r\n                    .value {\r\n                        font-size: 16px;\r\n                        color: #666666;\r\n                    }\r\n\r\n                    .arrow-right {\r\n                        width: 32rpx;\r\n                        height: 32rpx;\r\n                    }\r\n                }\r\n\r\n                .value {\r\n                    font-size: 16px;\r\n                    color: #666666;\r\n\r\n                    &.status-success {\r\n                        color: #07c160;\r\n                    }\r\n\r\n                    &.status-pending {\r\n                        color: #ff9500;\r\n                    }\r\n\r\n                    &.status-failed {\r\n                        color: #ff4444;\r\n                    }\r\n\r\n                    &.status-default {\r\n                        color: #666666;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .footer {\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        flex-shrink: 0;\r\n        padding: 40rpx 32rpx 60rpx;\r\n        background-color: #ffffff;\r\n        box-shadow: 0 -2rpx 20rpx rgba(0, 0, 0, 0.1);\r\n        z-index: 999;\r\n\r\n        .save-btn {\r\n            width: 100%;\r\n            height: 88rpx;\r\n            line-height: 88rpx;\r\n            background: linear-gradient(135deg, #07C160 0%, #05A64F 100%);\r\n            color: #ffffff;\r\n            font-size: 16px;\r\n            border-radius: 44rpx;\r\n            box-shadow: 0 8rpx 20rpx rgba(7, 193, 96, 0.3);\r\n            border: none;\r\n\r\n            &::after {\r\n                border: none;\r\n            }\r\n\r\n            &:active {\r\n                transform: scale(0.98);\r\n                transition: transform 0.1s;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'E:/Vue3Project/cycl/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","onMounted","uni"],"mappings":";;;;;;;;;;;;;;;;;;AA2DA,UAAM,YAAYA,YAAAA,aAAc;AAGhC,UAAM,YAAYC,cAAG,IAAC,EAAE;AACxB,UAAM,aAAaA,cAAG,IAAC,IAAI;AAE3BC,kBAAAA,UAAU,YAAY;AAElB,YAAM,UAAU,eAAgB;AAAA,IACpC,CAAC;AAGD,UAAM,OAAO,MAAM;AACfC,oBAAAA,MAAI,aAAc;AAAA,IACtB;AAGA,UAAM,oBAAoB,MAAM;AAE5B,UAAI,WAAW,OAAO;AAClB,mBAAW,MAAM,WAAY;AAAA,MAChC;AAAA,IACL;AAGA,UAAM,eAAe,CAAC,MAAM;AACxBA,oBAAAA,MAAA,MAAA,OAAA,6BAAY,SAAS,CAAC;AAAA,IAC1B;AAGA,UAAM,kBAAkB,CAAC,MAAM;AAC3BA,oBAAAA,MAAA,MAAA,OAAA,6BAAY,SAAS,CAAC;AACtB,UAAI,EAAE,iBAAiB,EAAE,cAAc,SAAS,GAAG;AAC/C,kBAAU,QAAQ,EAAE,cAAc,CAAC;AAAA,MACtC;AAAA,IACL;AAGA,UAAM,eAAe,CAAC,MAAM;AACxBA,oBAAAA,MAAA,MAAA,OAAA,6BAAY,SAAS,CAAC;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAK;AAAA,IACL;AAGA,UAAM,iBAAiB,MAAM;AACzB,YAAM,SAAS,UAAU;AACzB,cAAQ,QAAM;AAAA,QACV,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX;AACI,iBAAO;AAAA,MACd;AAAA,IACL;AAGA,UAAM,aAAa,MAAM;AACrBA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAK;AAAA,IACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7HA,GAAG,WAAW,eAAe;"}