{"version":3,"file":"CustomNavBar.js","sources":["components/CustomNavBar/CustomNavBar.vue","/Users/yx/Documents/Vue3Projects/cycl/components/CustomNavBar/CustomNavBar.vue?type=component"],"sourcesContent":["<!-- 自定义导航栏组件 - 支持横屏和微信小程序适配 -->\n<template>\n    <view class=\"custom-nav-bar\" :style=\"navBarStyle\">\n        <!-- 状态栏占位 -->\n        <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n\n        <!-- 导航栏内容 -->\n        <view class=\"nav-content\" :style=\"{ height: navBarHeight + 'px' }\">\n            <!-- 左侧返回按钮 -->\n            <view class=\"nav-left\" @click=\"handleBack\">\n                <uni-icons type=\"left\" size=\"20\" color=\"#000\"></uni-icons>\n            </view>\n\n            <!-- 中间标题 -->\n            <view class=\"nav-title\">{{ title }}</view>\n\n            <!-- 右侧占位 -->\n            <view class=\"nav-right\"></view>\n        </view>\n    </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\n\n/**\n * 自定义导航栏组件\n * \n * 功能说明：\n * - 支持横屏和竖屏模式\n * - 自动适配微信小程序胶囊按钮位置\n * - 处理安全区域和状态栏高度\n * - 兼容不同设备尺寸\n * \n * @author 系统\n * @version 1.0.0\n */\n\n// 定义组件属性\nconst props = defineProps({\n    /**\n     * 页面标题\n     * @type {String}\n     * @description 显示在导航栏中间的标题文字\n     * @required true\n     */\n    title: {\n        type: String,\n        required: true\n    }\n})\n\n// 定义组件事件\nconst emit = defineEmits(['back'])\n\n// 响应式数据\nconst statusBarHeight = ref(0)\nconst navBarHeight = ref(44) // 默认导航栏高度\nconst menuButtonInfo = ref({})\n\n/**\n * 计算导航栏样式\n */\nconst navBarStyle = computed(() => {\n    return {\n        paddingTop: statusBarHeight.value + 'px',\n        height: (statusBarHeight.value + navBarHeight.value) + 'px'\n    }\n})\n\n/**\n * 获取系统信息并计算导航栏高度\n */\nconst initNavBar = () => {\n    try {\n        // 获取系统信息\n        const systemInfo = uni.getSystemInfoSync()\n        statusBarHeight.value = systemInfo.statusBarHeight || 0\n\n        // 获取胶囊按钮信息\n        const menuButton = uni.getMenuButtonBoundingClientRect()\n        if (menuButton) {\n            menuButtonInfo.value = menuButton\n            // 计算导航栏高度：胶囊按钮顶部到状态栏的距离 * 2 + 胶囊按钮高度\n            navBarHeight.value = (menuButton.top - systemInfo.statusBarHeight) * 2 + menuButton.height\n        } else {\n            // 如果没有胶囊按钮信息，使用默认高度\n            navBarHeight.value = 44\n        }\n\n        console.log('导航栏初始化信息：')\n        console.log('状态栏高度:', statusBarHeight.value)\n        console.log('胶囊按钮信息:', menuButtonInfo.value)\n        console.log('计算后的导航栏高度:', navBarHeight.value)\n\n    } catch (error) {\n        console.error('获取系统信息失败:', error)\n        // 使用默认值\n        statusBarHeight.value = 20\n        navBarHeight.value = 44\n    }\n}\n\n/**\n * 处理返回按钮点击\n */\nconst handleBack = () => {\n    emit('back')\n}\n\n// 组件挂载时初始化\nonMounted(() => {\n    initNavBar()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.custom-nav-bar {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    background-color: #fff;\n    z-index: 999;\n    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);\n}\n\n.status-bar {\n    width: 100%;\n    background-color: #fff;\n}\n\n.nav-content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 15px;\n    background-color: #fff;\n}\n\n.nav-left {\n    width: 40px;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n}\n\n.nav-title {\n    flex: 1;\n    text-align: center;\n    font-size: 18px;\n    font-weight: 600;\n    color: #000;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    padding: 0 10px;\n}\n\n.nav-right {\n    width: 40px;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n}\n\n/* 横屏适配 */\n@media screen and (orientation: landscape) {\n    .custom-nav-bar {\n\n        /* 横屏时可能需要调整高度 */\n        .nav-content {\n            padding: 0 20px;\n        }\n    }\n}\n\n/* 微信小程序适配 */\n/* #ifdef MP-WEIXIN */\n.custom-nav-bar {\n\n    /* 微信小程序特殊处理 */\n    .nav-content {\n        /* 确保不与胶囊按钮重叠 */\n        padding-right: calc(env(safe-area-inset-right) + 10px);\n    }\n}\n\n/* #endif */\n</style>\n","import Component from '/Users/yx/Documents/Vue3Projects/cycl/components/CustomNavBar/CustomNavBar.vue'\nwx.createComponent(Component)"],"names":["ref","computed","uni","onMounted"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,UAAM,OAAO;AAGb,UAAM,kBAAkBA,cAAG,IAAC,CAAC;AAC7B,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,iBAAiBA,cAAG,IAAC,EAAE;AAK7B,UAAM,cAAcC,cAAQ,SAAC,MAAM;AAC/B,aAAO;AAAA,QACH,YAAY,gBAAgB,QAAQ;AAAA,QACpC,QAAS,gBAAgB,QAAQ,aAAa,QAAS;AAAA,MAC1D;AAAA,IACL,CAAC;AAKD,UAAM,aAAa,MAAM;AACrB,UAAI;AAEA,cAAM,aAAaC,cAAG,MAAC,kBAAmB;AAC1C,wBAAgB,QAAQ,WAAW,mBAAmB;AAGtD,cAAM,aAAaA,cAAG,MAAC,gCAAiC;AACxD,YAAI,YAAY;AACZ,yBAAe,QAAQ;AAEvB,uBAAa,SAAS,WAAW,MAAM,WAAW,mBAAmB,IAAI,WAAW;AAAA,QAChG,OAAe;AAEH,uBAAa,QAAQ;AAAA,QACxB;AAEDA,sBAAAA,MAAY,MAAA,OAAA,kDAAA,WAAW;AACvBA,sBAAA,MAAA,MAAA,OAAA,kDAAY,UAAU,gBAAgB,KAAK;AAC3CA,sBAAA,MAAA,MAAA,OAAA,kDAAY,WAAW,eAAe,KAAK;AAC3CA,sBAAY,MAAA,MAAA,OAAA,kDAAA,cAAc,aAAa,KAAK;AAAA,MAE/C,SAAQ,OAAO;AACZA,sBAAAA,MAAc,MAAA,SAAA,kDAAA,aAAa,KAAK;AAEhC,wBAAgB,QAAQ;AACxB,qBAAa,QAAQ;AAAA,MACxB;AAAA,IACL;AAKA,UAAM,aAAa,MAAM;AACrB,WAAK,MAAM;AAAA,IACf;AAGAC,kBAAAA,UAAU,MAAM;AACZ,iBAAY;AAAA,IAChB,CAAC;;;;;;;;;;;;;;;;;;AChHD,GAAG,gBAAgB,SAAS;"}