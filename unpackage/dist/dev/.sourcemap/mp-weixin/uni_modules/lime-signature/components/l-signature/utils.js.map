{"version":3,"file":"utils.js","sources":["uni_modules/lime-signature/components/l-signature/utils.js"],"sourcesContent":["export function compareVersion(v1, v2) {\r\n\tv1 = v1.split('.')\r\n\tv2 = v2.split('.')\r\n\tconst len = Math.max(v1.length, v2.length)\r\n\twhile (v1.length < len) {\r\n\t\tv1.push('0')\r\n\t}\r\n\twhile (v2.length < len) {\r\n\t\tv2.push('0')\r\n\t}\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tconst num1 = parseInt(v1[i], 10)\r\n\t\tconst num2 = parseInt(v2[i], 10)\r\n\r\n\t\tif (num1 > num2) {\r\n\t\t\treturn 1\r\n\t\t} else if (num1 < num2) {\r\n\t\t\treturn -1\r\n\t\t}\r\n\t}\r\n\treturn 0\r\n}\r\n\r\nfunction gte(version) {\r\n\tlet { SDKVersion } = uni.getSystemInfoSync() \r\n  // #ifdef MP-ALIPAY\r\n  SDKVersion = my.SDKVersion\r\n  // #endif\r\n  return compareVersion(SDKVersion, version) >= 0;\r\n}\r\n\r\nexport function canIUseCanvas2d() {\r\n\t// #ifdef MP-WEIXIN\r\n\treturn gte('2.9.0');\r\n\t// #endif\r\n\t// #ifdef MP-ALIPAY\r\n\treturn gte('2.7.0');\r\n\t// #endif\r\n\t// #ifdef MP-TOUTIAO\r\n\treturn gte('1.78.0');\r\n\t// #endif\r\n\treturn false\r\n}\r\n\r\n\r\nexport const wrapEvent = (e) => {\n  if (!e) return;\n  if (!e.preventDefault) {\n    e.preventDefault = function() {};\n  }\n  return e;\n}\r\n\r\nexport const requestAnimationFrame = (cb) => {\r\n\tsetTimeout(cb, 30)\r\n}\r\n\r\n// #ifdef MP\r\nexport const prefix = () => {\r\n\t// #ifdef MP-TOUTIAO\r\n\treturn tt\r\n\t// #endif\r\n\t// #ifdef MP-WEIXIN\r\n\treturn wx\r\n\t// #endif\r\n\t// #ifdef MP-BAIDU\r\n\treturn swan\r\n\t// #endif\r\n\t// #ifdef MP-ALIPAY\r\n\treturn my\r\n\t// #endif\r\n\t// #ifdef MP-QQ\r\n\treturn qq\r\n\t// #endif\r\n\t// #ifdef MP-360\r\n\treturn qh\r\n\t// #endif\r\n}\r\n// #endif\r\n\r\n/**\r\n * base64转路径\r\n * @param {Object} base64\r\n */\r\nexport function base64ToPath(base64) {\r\n\tconst [, format, bodyData] = /data:image\\/(\\w+);base64,(.*)/.exec(base64) || [];\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t// #ifdef MP\r\n\t\tconst p = prefix()\r\n\t\tconst fs = p.getFileSystemManager()\r\n\t\t//自定义文件名\r\n\t\tif (!format) {\r\n\t\t\treject(new Error('ERROR_BASE64SRC_PARSE'))\r\n\t\t}\r\n\t\tconst time = new Date().getTime();\r\n\t\tconst filePath = `${p.env.USER_DATA_PATH}/${time}.${format}`;\r\n\t\tfs.writeFile({\r\n\t\t\tfilePath,\r\n\t\t\tdata: base64.split(',')[1],\r\n\t\t\tencoding: 'base64',\r\n\t\t\tsuccess() {\r\n\t\t\t\tresolve(filePath)\r\n\t\t\t},\r\n\t\t\tfail(err) {\r\n\t\t\t\treject(err)\r\n\t\t\t}\r\n\t\t})\r\n\t\t// #endif\r\n\t\t// #ifdef APP-PLUS\r\n\t\tconst bitmap = new plus.nativeObj.Bitmap('bitmap' + Date.now())\r\n\t\tbitmap.loadBase64Data(base64, () => {\r\n\t\t\tif (!format) {\r\n\t\t\t\treject(new Error('ERROR_BASE64SRC_PARSE'))\r\n\t\t\t}\r\n\t\t\tconst time = new Date().getTime();\r\n\t\t\tconst filePath = `_doc/uniapp_temp/${time}.${format}`\r\n\t\t\tbitmap.save(filePath, {},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tbitmap.clear()\r\n\t\t\t\t\tresolve(filePath)\r\n\t\t\t\t},\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tbitmap.clear()\r\n\t\t\t\t\treject(error)\r\n\t\t\t\t})\r\n\t\t}, (error) => {\r\n\t\t\tbitmap.clear()\r\n\t\t\treject(error)\r\n\t\t})\r\n\t\t// #endif\r\n\t})\r\n}\r\n\r\n\r\nexport function sleep(delay) {\r\n\treturn new Promise(resolve => setTimeout(resolve, delay))\r\n}\r\n\r\nexport function getRect(selector, options = {}) {\r\n\tconst typeDefault = 'boundingClientRect'\r\n\tconst { context, type = typeDefault} = options\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst dom = uni.createSelectorQuery().in(context).select(selector);\r\n\t\tconst result = (rect) => {\r\n\t\t\tif(rect) {\r\n\t\t\t\t resolve(rect)\r\n\t\t\t} else {\r\n\t\t\t\treject()\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(type == typeDefault) {\r\n\t\t\tdom[type](result).exec()\r\n\t\t} else {\r\n\t\t\tdom[type]({\r\n\t\t\t\tnode: true,\r\n\t\t\t\tsize: true,\r\n\t\t\t\trect: true\r\n\t\t\t}, result).exec()\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport function isTransparent(color) {\n  // 判断颜色是否为 transparent\n  if (color === 'transparent') {\n    return true;\n  }\n\n  // 判断颜色是否为 rgba 的 a 为 0\n  if (color.startsWith('rgba')) {\n    const regex = /\\d+(\\.\\d+)?/g;\n    const matches = color.match(regex);\n    if (matches !== null) {\n      const alpha = parseFloat(matches[3]);\n      if (alpha === 0) {\n        return true;\n      }\n    }\n  }\n  return false;\n}"],"names":["uni"],"mappings":";;AAAO,SAAS,eAAe,IAAI,IAAI;AACtC,OAAK,GAAG,MAAM,GAAG;AACjB,OAAK,GAAG,MAAM,GAAG;AACjB,QAAM,MAAM,KAAK,IAAI,GAAG,QAAQ,GAAG,MAAM;AACzC,SAAO,GAAG,SAAS,KAAK;AACvB,OAAG,KAAK,GAAG;AAAA,EACX;AACD,SAAO,GAAG,SAAS,KAAK;AACvB,OAAG,KAAK,GAAG;AAAA,EACX;AACD,WAAS,IAAI,GAAG,IAAI,KAAK,KAAK;AAC7B,UAAM,OAAO,SAAS,GAAG,CAAC,GAAG,EAAE;AAC/B,UAAM,OAAO,SAAS,GAAG,CAAC,GAAG,EAAE;AAE/B,QAAI,OAAO,MAAM;AAChB,aAAO;AAAA,IACV,WAAa,OAAO,MAAM;AACvB,aAAO;AAAA,IACP;AAAA,EACD;AACD,SAAO;AACR;AAEA,SAAS,IAAI,SAAS;AACrB,MAAI,EAAE,WAAU,IAAKA,cAAG,MAAC,kBAAmB;AAI3C,SAAO,eAAe,YAAY,OAAO,KAAK;AAChD;AAEO,SAAS,kBAAkB;AAEjC,SAAO,IAAI,OAAO;AASnB;AAGY,MAAC,YAAY,CAAC,MAAM;AAC9B,MAAI,CAAC;AAAG;AACR,MAAI,CAAC,EAAE,gBAAgB;AACrB,MAAE,iBAAiB,WAAW;AAAA;EAC/B;AACD,SAAO;AACT;AAEY,MAAC,wBAAwB,CAAC,OAAO;AAC5C,aAAW,IAAI,EAAE;AAClB;AA+EO,SAAS,MAAM,OAAO;AAC5B,SAAO,IAAI,QAAQ,aAAW,WAAW,SAAS,KAAK,CAAC;AACzD;AAEO,SAAS,QAAQ,UAAU,UAAU,IAAI;AAC/C,QAAM,cAAc;AACpB,QAAM,EAAE,SAAS,OAAO,YAAW,IAAI;AACvC,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvC,UAAM,MAAMA,cAAG,MAAC,oBAAqB,EAAC,GAAG,OAAO,EAAE,OAAO,QAAQ;AACjE,UAAM,SAAS,CAAC,SAAS;AACxB,UAAG,MAAM;AACP,gBAAQ,IAAI;AAAA,MACjB,OAAU;AACN,eAAQ;AAAA,MACR;AAAA,IACD;AACD,QAAG,QAAQ,aAAa;AACvB,UAAI,IAAI,EAAE,MAAM,EAAE,KAAM;AAAA,IAC3B,OAAS;AACN,UAAI,IAAI,EAAE;AAAA,QACT,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACV,GAAM,MAAM,EAAE,KAAM;AAAA,IACjB;AAAA,EACH,CAAE;AACF;AAEO,SAAS,cAAc,OAAO;AAEnC,MAAI,UAAU,eAAe;AAC3B,WAAO;AAAA,EACR;AAGD,MAAI,MAAM,WAAW,MAAM,GAAG;AAC5B,UAAM,QAAQ;AACd,UAAM,UAAU,MAAM,MAAM,KAAK;AACjC,QAAI,YAAY,MAAM;AACpB,YAAM,QAAQ,WAAW,QAAQ,CAAC,CAAC;AACnC,UAAI,UAAU,GAAG;AACf,eAAO;AAAA,MACR;AAAA,IACF;AAAA,EACF;AACD,SAAO;AACT;;;;;;;"}